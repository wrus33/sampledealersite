/*!
 * CNJQ JavaScript Library
 */
(function(window,undefined){var rootCNJQ,readyList,document=window.document,location=window.location,navigator=window.navigator,_CNJQ=window.CNJQ,core_push=Array.prototype.push,core_slice=Array.prototype.slice,core_indexOf=Array.prototype.indexOf,core_toString=Object.prototype.toString,core_hasOwn=Object.prototype.hasOwnProperty,core_trim=String.prototype.trim,CNJQ=function(selector,context){return new CNJQ.fn.init(selector,context,rootCNJQ)},core_pnum=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,core_rnotwhite=/\S/,core_rspace=/\s+/,rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rquickExpr=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,rvalidchars=/^[\],:{}\s]*$/,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rvalidescape=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,rvalidtokens=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return(letter+"").toUpperCase()},DOMContentLoaded=function(){if(document.addEventListener){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);CNJQ.ready()}else{if(document.readyState==="complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);CNJQ.ready()}}},class2type={};CNJQ.fn=CNJQ.prototype={constructor:CNJQ,init:function(selector,context,rootCNJQ){var match,elem,ret,doc;if(!selector){return this}if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this}if(typeof selector==="string"){if(selector.charAt(0)==="<"&&selector.charAt(selector.length-1)===">"&&selector.length>=3){match=[null,selector,null]}else{match=rquickExpr.exec(selector)}if(match&&(match[1]||!context)){if(match[1]){context=context instanceof CNJQ?context[0]:context;doc=(context&&context.nodeType?context.ownerDocument||context:document);selector=CNJQ.parseHTML(match[1],doc,true);if(rsingleTag.test(match[1])&&CNJQ.isPlainObject(context)){this.attr.call(selector,context,true)}return CNJQ.merge(this,selector)}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){if(elem.id!==match[2]){return rootCNJQ.find(selector)}this.length=1;this[0]=elem}this.context=document;this.selector=selector;return this}}else{if(!context||context.CNJQ){return(context||rootCNJQ).find(selector)}else{return this.constructor(context).find(selector)}}}else{if(CNJQ.isFunction(selector)){return rootCNJQ.ready(selector)}}if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context}return CNJQ.makeArray(selector,this)},selector:"",CNJQ:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return core_slice.call(this)},get:function(num){return num==null?this.toArray():(num<0?this[this.length+num]:this[num])},pushStack:function(elems,name,selector){var ret=CNJQ.merge(this.constructor(),elems);ret.prevObject=this;ret.context=this.context;if(name==="find"){ret.selector=this.selector+(this.selector?" ":"")+selector}else{if(name){ret.selector=this.selector+"."+name+"("+selector+")"}}return ret},each:function(callback,args){return CNJQ.each(this,callback,args)},ready:function(fn){CNJQ.ready.promise().done(fn);return this},eq:function(i){i=+i;return i===-1?this.slice(i):this.slice(i,i+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(core_slice.apply(this,arguments),"slice",core_slice.call(arguments).join(","))},map:function(callback){return this.pushStack(CNJQ.map(this,function(elem,i){return callback.call(elem,i,elem)}))},end:function(){return this.prevObject||this.constructor(null)},push:core_push,sort:[].sort,splice:[].splice};CNJQ.fn.init.prototype=CNJQ.fn;CNJQ.extend=CNJQ.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2}if(typeof target!=="object"&&!CNJQ.isFunction(target)){target={}}if(length===i){target=this;--i}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue}if(deep&&copy&&(CNJQ.isPlainObject(copy)||(copyIsArray=CNJQ.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&CNJQ.isArray(src)?src:[]}else{clone=src&&CNJQ.isPlainObject(src)?src:{}}target[name]=CNJQ.extend(deep,clone,copy)}else{if(copy!==undefined){target[name]=copy}}}}}return target};CNJQ.extend({noConflict:function(deep){if(deep&&window.CNJQ===CNJQ){window.CNJQ=_CNJQ}return CNJQ},isReady:false,readyWait:1,holdReady:function(hold){if(hold){CNJQ.readyWait++}else{CNJQ.ready(true)}},ready:function(wait){if(wait===true?--CNJQ.readyWait:CNJQ.isReady){return}if(!document.body){return setTimeout(CNJQ.ready,1)}CNJQ.isReady=true;if(wait!==true&&--CNJQ.readyWait>0){return}readyList.resolveWith(document,[CNJQ]);if(CNJQ.fn.trigger){CNJQ(document).trigger("ready").off("ready")}},isFunction:function(obj){return CNJQ.type(obj)==="function"},isArray:Array.isArray||function(obj){return CNJQ.type(obj)==="array"},isWindow:function(obj){return obj!=null&&obj==obj.window},isNumeric:function(obj){return !isNaN(parseFloat(obj))&&isFinite(obj)},type:function(obj){return obj==null?String(obj):class2type[core_toString.call(obj)]||"object"},isPlainObject:function(obj){if(!obj||CNJQ.type(obj)!=="object"||obj.nodeType||CNJQ.isWindow(obj)){return false}try{if(obj.constructor&&!core_hasOwn.call(obj,"constructor")&&!core_hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false}}catch(e){return false}var key;for(key in obj){}return key===undefined||core_hasOwn.call(obj,key)},isEmptyObject:function(obj){var name;for(name in obj){return false}return true},error:function(msg){throw new Error(msg)},parseHTML:function(data,context,scripts){var parsed;if(!data||typeof data!=="string"){return null}if(typeof context==="boolean"){scripts=context;context=0}context=context||document;if((parsed=rsingleTag.exec(data))){return[context.createElement(parsed[1])]}parsed=CNJQ.buildFragment([data],context,scripts?null:[]);return CNJQ.merge([],(parsed.cacheable?CNJQ.clone(parsed.fragment):parsed.fragment).childNodes)},parseJSON:function(data){if(!data||typeof data!=="string"){return null}data=CNJQ.trim(data);if(window.JSON&&window.JSON.parse){return window.JSON.parse(data)}if(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))){return(new Function("return "+data))()}CNJQ.error("Invalid JSON: "+data)},parseXML:function(data){var xml,tmp;if(!data||typeof data!=="string"){return null}try{if(window.DOMParser){tmp=new DOMParser();xml=tmp.parseFromString(data,"text/xml")}else{xml=new ActiveXObject("Microsoft.XMLDOM");xml.async="false";xml.loadXML(data)}}catch(e){xml=undefined}if(!xml||!xml.documentElement||xml.getElementsByTagName("parsererror").length){CNJQ.error("Invalid XML: "+data)}return xml},noop:function(){},globalEval:function(data){if(data&&core_rnotwhite.test(data)){(window.execScript||function(data){window["eval"].call(window,data)})(data)}},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var name,i=0,length=obj.length,isObj=length===undefined||CNJQ.isFunction(obj);if(args){if(isObj){for(name in obj){if(callback.apply(obj[name],args)===false){break}}}else{for(;i<length;){if(callback.apply(obj[i++],args)===false){break}}}}else{if(isObj){for(name in obj){if(callback.call(obj[name],name,obj[name])===false){break}}}else{for(;i<length;){if(callback.call(obj[i],i,obj[i++])===false){break}}}}return obj},trim:core_trim&&!core_trim.call("\uFEFF\xA0")?function(text){return text==null?"":core_trim.call(text)}:function(text){return text==null?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var type,ret=results||[];if(arr!=null){type=CNJQ.type(arr);if(arr.length==null||type==="string"||type==="function"||type==="regexp"||CNJQ.isWindow(arr)){core_push.call(ret,arr)}else{CNJQ.merge(ret,arr)}}return ret},inArray:function(elem,arr,i){var len;if(arr){if(core_indexOf){return core_indexOf.call(arr,elem,i)}len=arr.length;i=i?i<0?Math.max(0,len+i):i:0;for(;i<len;i++){if(i in arr&&arr[i]===elem){return i}}}return -1},merge:function(first,second){var l=second.length,i=first.length,j=0;if(typeof l==="number"){for(;j<l;j++){first[i++]=second[j]}}else{while(second[j]!==undefined){first[i++]=second[j++]}}first.length=i;return first},grep:function(elems,callback,inv){var retVal,ret=[],i=0,length=elems.length;inv=!!inv;for(;i<length;i++){retVal=!!callback(elems[i],i);if(inv!==retVal){ret.push(elems[i])}}return ret},map:function(elems,callback,arg){var value,key,ret=[],i=0,length=elems.length,isArray=elems instanceof CNJQ||length!==undefined&&typeof length==="number"&&((length>0&&elems[0]&&elems[length-1])||length===0||CNJQ.isArray(elems));if(isArray){for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret[ret.length]=value}}}else{for(key in elems){value=callback(elems[key],key,arg);if(value!=null){ret[ret.length]=value}}}return ret.concat.apply([],ret)},guid:1,proxy:function(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp}if(!CNJQ.isFunction(fn)){return undefined}args=core_slice.call(arguments,2);proxy=function(){return fn.apply(context,args.concat(core_slice.call(arguments)))};proxy.guid=fn.guid=fn.guid||CNJQ.guid++;return proxy},access:function(elems,fn,key,value,chainable,emptyGet,pass){var exec,bulk=key==null,i=0,length=elems.length;if(key&&typeof key==="object"){for(i in key){CNJQ.access(elems,fn,i,key[i],1,emptyGet,value)}chainable=1}else{if(value!==undefined){exec=pass===undefined&&CNJQ.isFunction(value);if(bulk){if(exec){exec=fn;fn=function(elem,key,value){return exec.call(CNJQ(elem),value)}}else{fn.call(elems,value);fn=null}}if(fn){for(;i<length;i++){fn(elems[i],key,exec?value.call(elems[i],i,fn(elems[i],key)):value,pass)}}chainable=1}}return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet},now:function(){return(new Date()).getTime()}});CNJQ.ready.promise=function(obj){if(!readyList){readyList=CNJQ.Deferred();if(document.readyState==="complete"){setTimeout(CNJQ.ready,1)}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);window.addEventListener("load",CNJQ.ready,false)}else{document.attachEvent("onreadystatechange",DOMContentLoaded);window.attachEvent("onload",CNJQ.ready);var top=false;try{top=window.frameElement==null&&document.documentElement}catch(e){}if(top&&top.doScroll){(function doScrollCheck(){if(!CNJQ.isReady){try{top.doScroll("left")}catch(e){return setTimeout(doScrollCheck,50)}CNJQ.ready()}})()}}}}return readyList.promise(obj)};CNJQ.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});rootCNJQ=CNJQ(document);var optionsCache={};function createOptions(options){var object=optionsCache[options]={};CNJQ.each(options.split(core_rspace),function(_,flag){object[flag]=true});return object}CNJQ.Callbacks=function(options){options=typeof options==="string"?(optionsCache[options]||createOptions(options)):CNJQ.extend({},options);var memory,fired,firing,firingStart,firingLength,firingIndex,list=[],stack=!options.once&&[],fire=function(data){memory=options.memory&&data;fired=true;firingIndex=firingStart||0;firingStart=0;firingLength=list.length;firing=true;for(;list&&firingIndex<firingLength;firingIndex++){if(list[firingIndex].apply(data[0],data[1])===false&&options.stopOnFalse){memory=false;break}}firing=false;if(list){if(stack){if(stack.length){fire(stack.shift())}}else{if(memory){list=[]}else{self.disable()}}}},self={add:function(){if(list){var start=list.length;(function add(args){CNJQ.each(args,function(_,arg){var type=CNJQ.type(arg);if(type==="function"){if(!options.unique||!self.has(arg)){list.push(arg)}}else{if(arg&&arg.length&&type!=="string"){add(arg)}}})})(arguments);if(firing){firingLength=list.length}else{if(memory){firingStart=start;fire(memory)}}}return this},remove:function(){if(list){CNJQ.each(arguments,function(_,arg){var index;while((index=CNJQ.inArray(arg,list,index))>-1){list.splice(index,1);if(firing){if(index<=firingLength){firingLength--}if(index<=firingIndex){firingIndex--}}}})}return this},has:function(fn){return CNJQ.inArray(fn,list)>-1},empty:function(){list=[];return this},disable:function(){list=stack=memory=undefined;return this},disabled:function(){return !list},lock:function(){stack=undefined;if(!memory){self.disable()}return this},locked:function(){return !stack},fireWith:function(context,args){args=args||[];args=[context,args.slice?args.slice():args];if(list&&(!fired||stack)){if(firing){stack.push(args)}else{fire(args)}}return this},fire:function(){self.fireWith(this,arguments);return this},fired:function(){return !!fired}};return self};CNJQ.extend({Deferred:function(func){var tuples=[["resolve","done",CNJQ.Callbacks("once memory"),"resolved"],["reject","fail",CNJQ.Callbacks("once memory"),"rejected"],["notify","progress",CNJQ.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){deferred.done(arguments).fail(arguments);return this},then:function(){var fns=arguments;return CNJQ.Deferred(function(newDefer){CNJQ.each(tuples,function(i,tuple){var action=tuple[0],fn=fns[i];deferred[tuple[1]](CNJQ.isFunction(fn)?function(){var returned=fn.apply(this,arguments);if(returned&&CNJQ.isFunction(returned.promise)){returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify)}else{newDefer[action+"With"](this===deferred?newDefer:this,[returned])}}:newDefer[action])});fns=null}).promise()},promise:function(obj){return obj!=null?CNJQ.extend(obj,promise):promise}},deferred={};promise.pipe=promise.then;CNJQ.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add;if(stateString){list.add(function(){state=stateString},tuples[i^1][2].disable,tuples[2][2].lock)}deferred[tuple[0]]=list.fire;deferred[tuple[0]+"With"]=list.fireWith});promise.promise(deferred);if(func){func.call(deferred,deferred)}return deferred},when:function(subordinate){var i=0,resolveValues=core_slice.call(arguments),length=resolveValues.length,remaining=length!==1||(subordinate&&CNJQ.isFunction(subordinate.promise))?length:0,deferred=remaining===1?subordinate:CNJQ.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this;values[i]=arguments.length>1?core_slice.call(arguments):value;if(values===progressValues){deferred.notifyWith(contexts,values)}else{if(!(--remaining)){deferred.resolveWith(contexts,values)}}}},progressValues,progressContexts,resolveContexts;if(length>1){progressValues=new Array(length);progressContexts=new Array(length);resolveContexts=new Array(length);for(;i<length;i++){if(resolveValues[i]&&CNJQ.isFunction(resolveValues[i].promise)){resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues))}else{--remaining}}}if(!remaining){deferred.resolveWith(resolveContexts,resolveValues)}return deferred.promise()}});CNJQ.support=(function(){var support,all,a,select,opt,input,fragment,eventName,i,isSupported,clickFn,div=document.createElement("div");div.setAttribute("className","t");div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";all=div.getElementsByTagName("*");a=div.getElementsByTagName("a")[0];if(!all||!a||!all.length){return{}}select=document.createElement("select");opt=select.appendChild(document.createElement("option"));input=div.getElementsByTagName("input")[0];a.style.cssText="top:1px;float:left;opacity:.5";support={leadingWhitespace:(div.firstChild.nodeType===3),tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:(a.getAttribute("href")==="/a"),opacity:/^0.5/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:(input.value==="on"),optSelected:opt.selected,getSetAttribute:div.className!=="t",enctype:!!document.createElement("form").enctype,html5Clone:document.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",boxModel:(document.compatMode==="CSS1Compat"),submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,boxSizingReliable:true,pixelPosition:false};input.checked=true;support.noCloneChecked=input.cloneNode(true).checked;select.disabled=true;support.optDisabled=!opt.disabled;try{delete div.test}catch(e){support.deleteExpando=false}if(!div.addEventListener&&div.attachEvent&&div.fireEvent){div.attachEvent("onclick",clickFn=function(){support.noCloneEvent=false});div.cloneNode(true).fireEvent("onclick");div.detachEvent("onclick",clickFn)}input=document.createElement("input");input.value="t";input.setAttribute("type","radio");support.radioValue=input.value==="t";input.setAttribute("checked","checked");input.setAttribute("name","t");div.appendChild(input);fragment=document.createDocumentFragment();fragment.appendChild(div.lastChild);support.checkClone=fragment.cloneNode(true).cloneNode(true).lastChild.checked;support.appendChecked=input.checked;fragment.removeChild(input);fragment.appendChild(div);if(div.attachEvent){for(i in {submit:true,change:true,focusin:true}){eventName="on"+i;isSupported=(eventName in div);if(!isSupported){div.setAttribute(eventName,"return;");isSupported=(typeof div[eventName]==="function")}support[i+"Bubbles"]=isSupported}}CNJQ(function(){var container,div,tds,marginDiv,divReset="padding:0;margin:0;border:0;display:block;overflow:hidden;",body=document.getElementsByTagName("body")[0];if(!body){return}container=document.createElement("div");container.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px";body.insertBefore(container,body.firstChild);div=document.createElement("div");container.appendChild(div);div.innerHTML="<table><tr><td></td><td>t</td></tr></table>";tds=div.getElementsByTagName("td");tds[0].style.cssText="padding:0;margin:0;border:0;display:none";isSupported=(tds[0].offsetHeight===0);tds[0].style.display="";tds[1].style.display="none";support.reliableHiddenOffsets=isSupported&&(tds[0].offsetHeight===0);div.innerHTML="";div.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";support.boxSizing=(div.offsetWidth===4);support.doesNotIncludeMarginInBodyOffset=(body.offsetTop!==1);if(window.getComputedStyle){support.pixelPosition=(window.getComputedStyle(div,null)||{}).top!=="1%";support.boxSizingReliable=(window.getComputedStyle(div,null)||{width:"4px"}).width==="4px";marginDiv=document.createElement("div");marginDiv.style.cssText=div.style.cssText=divReset;marginDiv.style.marginRight=marginDiv.style.width="0";div.style.width="1px";div.appendChild(marginDiv);support.reliableMarginRight=!parseFloat((window.getComputedStyle(marginDiv,null)||{}).marginRight)}if(typeof div.style.zoom!=="undefined"){div.innerHTML="";div.style.cssText=divReset+"width:1px;padding:1px;display:inline;zoom:1";support.inlineBlockNeedsLayout=(div.offsetWidth===3);div.style.display="block";div.style.overflow="visible";div.innerHTML="<div></div>";div.firstChild.style.width="5px";support.shrinkWrapBlocks=(div.offsetWidth!==3);container.style.zoom=1}body.removeChild(container);container=div=tds=marginDiv=null});fragment.removeChild(div);all=a=select=opt=input=fragment=div=null;return support})();var rbrace=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,rmultiDash=/([A-Z])/g;CNJQ.extend({cache:{},deletedIds:[],uuid:0,expando:"CNJQ"+(CNJQ.fn.CNJQ+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(elem){elem=elem.nodeType?CNJQ.cache[elem[CNJQ.expando]]:elem[CNJQ.expando];return !!elem&&!isEmptyDataObject(elem)},data:function(elem,name,data,pvt){if(!CNJQ.acceptData(elem)){return}var thisCache,ret,internalKey=CNJQ.expando,getByName=typeof name==="string",isNode=elem.nodeType,cache=isNode?CNJQ.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if((!id||!cache[id]||(!pvt&&!cache[id].data))&&getByName&&data===undefined){return}if(!id){if(isNode){elem[internalKey]=id=CNJQ.deletedIds.pop()||CNJQ.guid++}else{id=internalKey}}if(!cache[id]){cache[id]={};if(!isNode){cache[id].toJSON=CNJQ.noop}}if(typeof name==="object"||typeof name==="function"){if(pvt){cache[id]=CNJQ.extend(cache[id],name)}else{cache[id].data=CNJQ.extend(cache[id].data,name)}}thisCache=cache[id];if(!pvt){if(!thisCache.data){thisCache.data={}}thisCache=thisCache.data}if(data!==undefined){thisCache[CNJQ.camelCase(name)]=data}if(getByName){ret=thisCache[name];if(ret==null){ret=thisCache[CNJQ.camelCase(name)]}}else{ret=thisCache}return ret},removeData:function(elem,name,pvt){if(!CNJQ.acceptData(elem)){return}var thisCache,i,l,isNode=elem.nodeType,cache=isNode?CNJQ.cache:elem,id=isNode?elem[CNJQ.expando]:CNJQ.expando;if(!cache[id]){return}if(name){thisCache=pvt?cache[id]:cache[id].data;if(thisCache){if(!CNJQ.isArray(name)){if(name in thisCache){name=[name]}else{name=CNJQ.camelCase(name);if(name in thisCache){name=[name]}else{name=name.split(" ")}}}for(i=0,l=name.length;i<l;i++){delete thisCache[name[i]]}if(!(pvt?isEmptyDataObject:CNJQ.isEmptyObject)(thisCache)){return}}}if(!pvt){delete cache[id].data;if(!isEmptyDataObject(cache[id])){return}}if(isNode){CNJQ.cleanData([elem],true)}else{if(CNJQ.support.deleteExpando||cache!=cache.window){delete cache[id]}else{cache[id]=null}}},_data:function(elem,name,data){return CNJQ.data(elem,name,data,true)},acceptData:function(elem){var noData=elem.nodeName&&CNJQ.noData[elem.nodeName.toLowerCase()];return !noData||noData!==true&&elem.getAttribute("classid")===noData}});CNJQ.fn.extend({data:function(key,value){var parts,part,attr,name,l,elem=this[0],i=0,data=null;if(key===undefined){if(this.length){data=CNJQ.data(elem);if(elem.nodeType===1&&!CNJQ._data(elem,"parsedAttrs")){attr=elem.attributes;for(l=attr.length;i<l;i++){name=attr[i].name;if(!name.indexOf("data-")){name=CNJQ.camelCase(name.substring(5));dataAttr(elem,name,data[name])}}CNJQ._data(elem,"parsedAttrs",true)}}return data}if(typeof key==="object"){return this.each(function(){CNJQ.data(this,key)})}parts=key.split(".",2);parts[1]=parts[1]?"."+parts[1]:"";part=parts[1]+"!";return CNJQ.access(this,function(value){if(value===undefined){data=this.triggerHandler("getData"+part,[parts[0]]);if(data===undefined&&elem){data=CNJQ.data(elem,key);data=dataAttr(elem,key,data)}return data===undefined&&parts[1]?this.data(parts[0]):data}parts[1]=value;this.each(function(){var self=CNJQ(this);self.triggerHandler("setData"+part,parts);CNJQ.data(this,key,value);self.triggerHandler("changeData"+part,parts)})},null,value,arguments.length>1,null,false)},removeData:function(key){return this.each(function(){CNJQ.removeData(this,key)})}});function dataAttr(elem,key,data){if(data===undefined&&elem.nodeType===1){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:+data+""===data?+data:rbrace.test(data)?CNJQ.parseJSON(data):data}catch(e){}CNJQ.data(elem,key,data)}else{data=undefined}}return data}function isEmptyDataObject(obj){var name;for(name in obj){if(name==="data"&&CNJQ.isEmptyObject(obj[name])){continue}if(name!=="toJSON"){return false}}return true}CNJQ.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=CNJQ._data(elem,type);if(data){if(!queue||CNJQ.isArray(data)){queue=CNJQ._data(elem,type,CNJQ.makeArray(data))}else{queue.push(data)}}return queue||[]}},dequeue:function(elem,type){type=type||"fx";var queue=CNJQ.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=CNJQ._queueHooks(elem,type),next=function(){CNJQ.dequeue(elem,type)};if(fn==="inprogress"){fn=queue.shift();startLength--}if(fn){if(type==="fx"){queue.unshift("inprogress")}delete hooks.stop;fn.call(elem,next,hooks)}if(!startLength&&hooks){hooks.empty.fire()}},_queueHooks:function(elem,type){var key=type+"queueHooks";return CNJQ._data(elem,key)||CNJQ._data(elem,key,{empty:CNJQ.Callbacks("once memory").add(function(){CNJQ.removeData(elem,type+"queue",true);CNJQ.removeData(elem,key,true)})})}});CNJQ.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--}if(arguments.length<setter){return CNJQ.queue(this[0],type)}return data===undefined?this:this.each(function(){var queue=CNJQ.queue(this,type,data);CNJQ._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress"){CNJQ.dequeue(this,type)}})},dequeue:function(type){return this.each(function(){CNJQ.dequeue(this,type)})},delay:function(time,type){time=CNJQ.fx?CNJQ.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=CNJQ.Deferred(),elements=this,i=this.length,resolve=function(){if(!(--count)){defer.resolveWith(elements,[elements])}};if(typeof type!=="string"){obj=type;type=undefined}type=type||"fx";while(i--){tmp=CNJQ._data(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve)}}resolve();return defer.promise(obj)}});var nodeHook,boolHook,fixSpecified,rclass=/[\t\r\n]/g,rreturn=/\r/g,rtype=/^(?:button|input)$/i,rfocusable=/^(?:button|input|object|select|textarea)$/i,rclickable=/^a(?:rea|)$/i,rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,getSetAttribute=CNJQ.support.getSetAttribute;CNJQ.fn.extend({attr:function(name,value){return CNJQ.access(this,CNJQ.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){CNJQ.removeAttr(this,name)})},prop:function(name,value){return CNJQ.access(this,CNJQ.prop,name,value,arguments.length>1)},removeProp:function(name){name=CNJQ.propFix[name]||name;return this.each(function(){try{this[name]=undefined;delete this[name]}catch(e){}})},addClass:function(value){var classNames,i,l,elem,setClass,c,cl;if(CNJQ.isFunction(value)){return this.each(function(j){CNJQ(this).addClass(value.call(this,j,this.className))})}if(value&&typeof value==="string"){classNames=value.split(core_rspace);for(i=0,l=this.length;i<l;i++){elem=this[i];if(elem.nodeType===1){if(!elem.className&&classNames.length===1){elem.className=value}else{setClass=" "+elem.className+" ";for(c=0,cl=classNames.length;c<cl;c++){if(setClass.indexOf(" "+classNames[c]+" ")<0){setClass+=classNames[c]+" "}}elem.className=CNJQ.trim(setClass)}}}}return this},removeClass:function(value){var removes,className,elem,c,cl,i,l;if(CNJQ.isFunction(value)){return this.each(function(j){CNJQ(this).removeClass(value.call(this,j,this.className))})}if((value&&typeof value==="string")||value===undefined){removes=(value||"").split(core_rspace);for(i=0,l=this.length;i<l;i++){elem=this[i];if(elem.nodeType===1&&elem.className){className=(" "+elem.className+" ").replace(rclass," ");for(c=0,cl=removes.length;c<cl;c++){while(className.indexOf(" "+removes[c]+" ")>=0){className=className.replace(" "+removes[c]+" "," ")}}elem.className=value?CNJQ.trim(className):""}}}return this},toggleClass:function(value,stateVal){var type=typeof value,isBool=typeof stateVal==="boolean";if(CNJQ.isFunction(value)){return this.each(function(i){CNJQ(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)})}return this.each(function(){if(type==="string"){var className,i=0,self=CNJQ(this),state=stateVal,classNames=value.split(core_rspace);while((className=classNames[i++])){state=isBool?state:!self.hasClass(className);self[state?"addClass":"removeClass"](className)}}else{if(type==="undefined"||type==="boolean"){if(this.className){CNJQ._data(this,"__className__",this.className)}this.className=this.className||value===false?"":CNJQ._data(this,"__className__")||""}}})},hasClass:function(selector){var className=" "+selector+" ",i=0,l=this.length;for(;i<l;i++){if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0){return true}}return false},val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=CNJQ.valHooks[elem.type]||CNJQ.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get" in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret}ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret}return}isFunction=CNJQ.isFunction(value);return this.each(function(i){var val,self=CNJQ(this);if(this.nodeType!==1){return}if(isFunction){val=value.call(this,i,self.val())}else{val=value}if(val==null){val=""}else{if(typeof val==="number"){val+=""}else{if(CNJQ.isArray(val)){val=CNJQ.map(val,function(value){return value==null?"":value+""})}}}hooks=CNJQ.valHooks[this.type]||CNJQ.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set" in hooks)||hooks.set(this,val,"value")===undefined){this.value=val}})}});CNJQ.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return !val||val.specified?elem.value:elem.text}},select:{get:function(elem){var value,option,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one"||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;for(;i<max;i++){option=options[i];if((option.selected||i===index)&&(CNJQ.support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!CNJQ.nodeName(option.parentNode,"optgroup"))){value=CNJQ(option).val();if(one){return value}values.push(value)}}return values},set:function(elem,value){var values=CNJQ.makeArray(value);CNJQ(elem).find("option").each(function(){this.selected=CNJQ.inArray(CNJQ(this).val(),values)>=0});if(!values.length){elem.selectedIndex=-1}return values}}},attrFn:{},attr:function(elem,name,value,pass){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return}if(pass&&CNJQ.isFunction(CNJQ.fn[name])){return CNJQ(elem)[name](value)}if(typeof elem.getAttribute==="undefined"){return CNJQ.prop(elem,name,value)}notxml=nType!==1||!CNJQ.isXMLDoc(elem);if(notxml){name=name.toLowerCase();hooks=CNJQ.attrHooks[name]||(rboolean.test(name)?boolHook:nodeHook)}if(value!==undefined){if(value===null){CNJQ.removeAttr(elem,name);return}else{if(hooks&&"set" in hooks&&notxml&&(ret=hooks.set(elem,value,name))!==undefined){return ret}else{elem.setAttribute(name,value+"");return value}}}else{if(hooks&&"get" in hooks&&notxml&&(ret=hooks.get(elem,name))!==null){return ret}else{ret=elem.getAttribute(name);return ret===null?undefined:ret}}},removeAttr:function(elem,value){var propName,attrNames,name,isBool,i=0;if(value&&elem.nodeType===1){attrNames=value.split(core_rspace);for(;i<attrNames.length;i++){name=attrNames[i];if(name){propName=CNJQ.propFix[name]||name;isBool=rboolean.test(name);if(!isBool){CNJQ.attr(elem,name,"")}elem.removeAttribute(getSetAttribute?name:propName);if(isBool&&propName in elem){elem[propName]=false}}}}},attrHooks:{type:{set:function(elem,value){if(rtype.test(elem.nodeName)&&elem.parentNode){CNJQ.error("type property can't be changed")}else{if(!CNJQ.support.radioValue&&value==="radio"&&CNJQ.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val}return value}}}},value:{get:function(elem,name){if(nodeHook&&CNJQ.nodeName(elem,"button")){return nodeHook.get(elem,name)}return name in elem?elem.value:null},set:function(elem,value,name){if(nodeHook&&CNJQ.nodeName(elem,"button")){return nodeHook.set(elem,value,name)}elem.value=value}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return}notxml=nType!==1||!CNJQ.isXMLDoc(elem);if(notxml){name=CNJQ.propFix[name]||name;hooks=CNJQ.propHooks[name]}if(value!==undefined){if(hooks&&"set" in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret}else{return(elem[name]=value)}}else{if(hooks&&"get" in hooks&&(ret=hooks.get(elem,name))!==null){return ret}else{return elem[name]}}},propHooks:{tabIndex:{get:function(elem){var attributeNode=elem.getAttributeNode("tabindex");return attributeNode&&attributeNode.specified?parseInt(attributeNode.value,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined}}}});boolHook={get:function(elem,name){var attrNode,property=CNJQ.prop(elem,name);return property===true||typeof property!=="boolean"&&(attrNode=elem.getAttributeNode(name))&&attrNode.nodeValue!==false?name.toLowerCase():undefined},set:function(elem,value,name){var propName;if(value===false){CNJQ.removeAttr(elem,name)}else{propName=CNJQ.propFix[name]||name;if(propName in elem){elem[propName]=true}elem.setAttribute(name,name.toLowerCase())}return name}};if(!getSetAttribute){fixSpecified={name:true,id:true,coords:true};nodeHook=CNJQ.valHooks.button={get:function(elem,name){var ret;ret=elem.getAttributeNode(name);return ret&&(fixSpecified[name]?ret.value!=="":ret.specified)?ret.value:undefined},set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(!ret){ret=document.createAttribute(name);elem.setAttributeNode(ret)}return(ret.value=value+"")}};CNJQ.each(["width","height"],function(i,name){CNJQ.attrHooks[name]=CNJQ.extend(CNJQ.attrHooks[name],{set:function(elem,value){if(value===""){elem.setAttribute(name,"auto");return value}}})});CNJQ.attrHooks.contenteditable={get:nodeHook.get,set:function(elem,value,name){if(value===""){value="false"}nodeHook.set(elem,value,name)}}}if(!CNJQ.support.hrefNormalized){CNJQ.each(["href","src","width","height"],function(i,name){CNJQ.attrHooks[name]=CNJQ.extend(CNJQ.attrHooks[name],{get:function(elem){var ret=elem.getAttribute(name,2);return ret===null?undefined:ret}})})}if(!CNJQ.support.style){CNJQ.attrHooks.style={get:function(elem){return elem.style.cssText.toLowerCase()||undefined},set:function(elem,value){return(elem.style.cssText=value+"")}}}if(!CNJQ.support.optSelected){CNJQ.propHooks.selected=CNJQ.extend(CNJQ.propHooks.selected,{get:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex}}return null}})}if(!CNJQ.support.enctype){CNJQ.propFix.enctype="encoding"}if(!CNJQ.support.checkOn){CNJQ.each(["radio","checkbox"],function(){CNJQ.valHooks[this]={get:function(elem){return elem.getAttribute("value")===null?"on":elem.value}}})}CNJQ.each(["radio","checkbox"],function(){CNJQ.valHooks[this]=CNJQ.extend(CNJQ.valHooks[this],{set:function(elem,value){if(CNJQ.isArray(value)){return(elem.checked=CNJQ.inArray(CNJQ(elem).val(),value)>=0)}}})});var rformElems=/^(?:textarea|input|select)$/i,rtypenamespace=/^([^\.]*|)(?:\.(.+)|)$/,rhoverHack=/(?:^|\s)hover(\.\S+|)\b/,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,hoverHack=function(events){return CNJQ.event.special.hover?events:events.replace(rhoverHack,"mouseenter$1 mouseleave$1")};CNJQ.event={add:function(elem,types,handler,data,selector){var elemData,eventHandle,events,t,tns,type,namespaces,handleObj,handleObjIn,handlers,special;if(elem.nodeType===3||elem.nodeType===8||!types||!handler||!(elemData=CNJQ._data(elem))){return}if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector}if(!handler.guid){handler.guid=CNJQ.guid++}events=elemData.events;if(!events){elemData.events=events={}}eventHandle=elemData.handle;if(!eventHandle){elemData.handle=eventHandle=function(e){return typeof CNJQ!=="undefined"&&(!e||CNJQ.event.triggered!==e.type)?CNJQ.event.dispatch.apply(eventHandle.elem,arguments):undefined};eventHandle.elem=elem}types=CNJQ.trim(hoverHack(types)).split(" ");for(t=0;t<types.length;t++){tns=rtypenamespace.exec(types[t])||[];type=tns[1];namespaces=(tns[2]||"").split(".").sort();special=CNJQ.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=CNJQ.event.special[type]||{};handleObj=CNJQ.extend({type:type,origType:tns[1],data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&CNJQ.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);handlers=events[type];if(!handlers){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle,false)}else{if(elem.attachEvent){elem.attachEvent("on"+type,eventHandle)}}}}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid}}if(selector){handlers.splice(handlers.delegateCount++,0,handleObj)}else{handlers.push(handleObj)}CNJQ.event.global[type]=true}elem=null},global:{},remove:function(elem,types,handler,selector,mappedTypes){var t,tns,type,origType,namespaces,origCount,j,events,special,eventType,handleObj,elemData=CNJQ.hasData(elem)&&CNJQ._data(elem);if(!elemData||!(events=elemData.events)){return}types=CNJQ.trim(hoverHack(types||"")).split(" ");for(t=0;t<types.length;t++){tns=rtypenamespace.exec(types[t])||[];type=origType=tns[1];namespaces=tns[2];if(!type){for(type in events){CNJQ.event.remove(elem,type+types[t],handler,selector,true)}continue}special=CNJQ.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;eventType=events[type]||[];origCount=eventType.length;namespaces=namespaces?new RegExp("(^|\\.)"+namespaces.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(j=0;j<eventType.length;j++){handleObj=eventType[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!namespaces||namespaces.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){eventType.splice(j--,1);if(handleObj.selector){eventType.delegateCount--}if(special.remove){special.remove.call(elem,handleObj)}}}if(eventType.length===0&&origCount!==eventType.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){CNJQ.removeEvent(elem,type,elemData.handle)}delete events[type]}}if(CNJQ.isEmptyObject(events)){delete elemData.handle;CNJQ.removeData(elem,"events",true)}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(event,data,elem,onlyHandlers){if(elem&&(elem.nodeType===3||elem.nodeType===8)){return}var cache,exclusive,i,cur,old,ontype,special,handle,eventPath,bubbleType,type=event.type||event,namespaces=[];if(rfocusMorph.test(type+CNJQ.event.triggered)){return}if(type.indexOf("!")>=0){type=type.slice(0,-1);exclusive=true}if(type.indexOf(".")>=0){namespaces=type.split(".");type=namespaces.shift();namespaces.sort()}if((!elem||CNJQ.event.customEvent[type])&&!CNJQ.event.global[type]){return}event=typeof event==="object"?event[CNJQ.expando]?event:new CNJQ.Event(type,event):new CNJQ.Event(type);event.type=type;event.isTrigger=true;event.exclusive=exclusive;event.namespace=namespaces.join(".");event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;ontype=type.indexOf(":")<0?"on"+type:"";if(!elem){cache=CNJQ.cache;for(i in cache){if(cache[i].events&&cache[i].events[type]){CNJQ.event.trigger(event,data,cache[i].handle.elem,true)}}return}event.result=undefined;if(!event.target){event.target=elem}data=data!=null?CNJQ.makeArray(data):[];data.unshift(event);special=CNJQ.event.special[type]||{};if(special.trigger&&special.trigger.apply(elem,data)===false){return}eventPath=[[elem,special.bindType||type]];if(!onlyHandlers&&!special.noBubble&&!CNJQ.isWindow(elem)){bubbleType=special.delegateType||type;cur=rfocusMorph.test(bubbleType+type)?elem:elem.parentNode;for(old=elem;cur;cur=cur.parentNode){eventPath.push([cur,bubbleType]);old=cur}if(old===(elem.ownerDocument||document)){eventPath.push([old.defaultView||old.parentWindow||window,bubbleType])}}for(i=0;i<eventPath.length&&!event.isPropagationStopped();i++){cur=eventPath[i][0];event.type=eventPath[i][1];handle=(CNJQ._data(cur,"events")||{})[event.type]&&CNJQ._data(cur,"handle");if(handle){handle.apply(cur,data)}handle=ontype&&cur[ontype];if(handle&&CNJQ.acceptData(cur)&&handle.apply&&handle.apply(cur,data)===false){event.preventDefault()}}event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(elem.ownerDocument,data)===false)&&!(type==="click"&&CNJQ.nodeName(elem,"a"))&&CNJQ.acceptData(elem)){if(ontype&&elem[type]&&((type!=="focus"&&type!=="blur")||event.target.offsetWidth!==0)&&!CNJQ.isWindow(elem)){old=elem[ontype];if(old){elem[ontype]=null}CNJQ.event.triggered=type;elem[type]();CNJQ.event.triggered=undefined;if(old){elem[ontype]=old}}}}return event.result},dispatch:function(event){event=CNJQ.event.fix(event||window.event);var i,j,cur,ret,selMatch,matched,matches,handleObj,sel,related,handlers=((CNJQ._data(this,"events")||{})[event.type]||[]),delegateCount=handlers.delegateCount,args=core_slice.call(arguments),run_all=!event.exclusive&&!event.namespace,special=CNJQ.event.special[event.type]||{},handlerQueue=[];args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return}if(delegateCount&&!(event.button&&event.type==="click")){for(cur=event.target;cur!=this;cur=cur.parentNode||this){if(cur.disabled!==true||event.type!=="click"){selMatch={};matches=[];for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector;if(selMatch[sel]===undefined){selMatch[sel]=handleObj.needsContext?CNJQ(sel,this).index(cur)>=0:CNJQ.find(sel,this,null,[cur]).length}if(selMatch[sel]){matches.push(handleObj)}}if(matches.length){handlerQueue.push({elem:cur,matches:matches})}}}}if(handlers.length>delegateCount){handlerQueue.push({elem:this,matches:handlers.slice(delegateCount)})}for(i=0;i<handlerQueue.length&&!event.isPropagationStopped();i++){matched=handlerQueue[i];event.currentTarget=matched.elem;for(j=0;j<matched.matches.length&&!event.isImmediatePropagationStopped();j++){handleObj=matched.matches[j];if(run_all||(!event.namespace&&!handleObj.namespace)||event.namespace_re&&event.namespace_re.test(handleObj.namespace)){event.data=handleObj.data;event.handleObj=handleObj;ret=((CNJQ.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){event.result=ret;if(ret===false){event.preventDefault();event.stopPropagation()}}}}}if(special.postDispatch){special.postDispatch.call(this,event)}return event.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(event.which==null){event.which=original.charCode!=null?original.charCode:original.keyCode}return event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button,fromElement=original.fromElement;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}if(!event.relatedTarget&&fromElement){event.relatedTarget=fromElement===event.target?original.toElement:fromElement}if(!event.which&&button!==undefined){event.which=(button&1?1:(button&2?3:(button&4?2:0)))}return event}},fix:function(event){if(event[CNJQ.expando]){return event}var i,prop,originalEvent=event,fixHook=CNJQ.event.fixHooks[event.type]||{},copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=CNJQ.Event(originalEvent);for(i=copy.length;i;){prop=copy[--i];event[prop]=originalEvent[prop]}if(!event.target){event.target=originalEvent.srcElement||document}if(event.target.nodeType===3){event.target=event.target.parentNode}event.metaKey=!!event.metaKey;return fixHook.filter?fixHook.filter(event,originalEvent):event},special:{load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(data,namespaces,eventHandle){if(CNJQ.isWindow(this)){this.onbeforeunload=eventHandle}},teardown:function(namespaces,eventHandle){if(this.onbeforeunload===eventHandle){this.onbeforeunload=null}}}},simulate:function(type,elem,event,bubble){var e=CNJQ.extend(new CNJQ.Event(),event,{type:type,isSimulated:true,originalEvent:{}});if(bubble){CNJQ.event.trigger(e,null,elem)}else{CNJQ.event.dispatch.call(elem,e)}if(e.isDefaultPrevented()){event.preventDefault()}}};CNJQ.event.handle=CNJQ.event.dispatch;CNJQ.removeEvent=document.removeEventListener?function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle,false)}}:function(elem,type,handle){var name="on"+type;if(elem.detachEvent){if(typeof elem[name]==="undefined"){elem[name]=null}elem.detachEvent(name,handle)}};CNJQ.Event=function(src,props){if(!(this instanceof CNJQ.Event)){return new CNJQ.Event(src,props)}if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=(src.defaultPrevented||src.returnValue===false||src.getPreventDefault&&src.getPreventDefault())?returnTrue:returnFalse}else{this.type=src}if(props){CNJQ.extend(this,props)}this.timeStamp=src&&src.timeStamp||CNJQ.now();this[CNJQ.expando]=true};function returnFalse(){return false}function returnTrue(){return true}CNJQ.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;if(!e){return}if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;if(!e){return}if(e.stopPropagation){e.stopPropagation()}e.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};CNJQ.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){CNJQ.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj,selector=handleObj.selector;if(!related||(related!==target&&!CNJQ.contains(target,related))){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix}return ret}}});if(!CNJQ.support.submitBubbles){CNJQ.event.special.submit={setup:function(){if(CNJQ.nodeName(this,"form")){return false}CNJQ.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=CNJQ.nodeName(elem,"input")||CNJQ.nodeName(elem,"button")?elem.form:undefined;if(form&&!CNJQ._data(form,"_submit_attached")){CNJQ.event.add(form,"submit._submit",function(event){event._submit_bubble=true});CNJQ._data(form,"_submit_attached",true)}})},postDispatch:function(event){if(event._submit_bubble){delete event._submit_bubble;if(this.parentNode&&!event.isTrigger){CNJQ.event.simulate("submit",this.parentNode,event,true)}}},teardown:function(){if(CNJQ.nodeName(this,"form")){return false}CNJQ.event.remove(this,"._submit")}}}if(!CNJQ.support.changeBubbles){CNJQ.event.special.change={setup:function(){if(rformElems.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){CNJQ.event.add(this,"propertychange._change",function(event){if(event.originalEvent.propertyName==="checked"){this._just_changed=true}});CNJQ.event.add(this,"click._change",function(event){if(this._just_changed&&!event.isTrigger){this._just_changed=false}CNJQ.event.simulate("change",this,event,true)})}return false}CNJQ.event.add(this,"beforeactivate._change",function(e){var elem=e.target;if(rformElems.test(elem.nodeName)&&!CNJQ._data(elem,"_change_attached")){CNJQ.event.add(elem,"change._change",function(event){if(this.parentNode&&!event.isSimulated&&!event.isTrigger){CNJQ.event.simulate("change",this.parentNode,event,true)}});CNJQ._data(elem,"_change_attached",true)}})},handle:function(event){var elem=event.target;if(this!==elem||event.isSimulated||event.isTrigger||(elem.type!=="radio"&&elem.type!=="checkbox")){return event.handleObj.handler.apply(this,arguments)}},teardown:function(){CNJQ.event.remove(this,"._change");return !rformElems.test(this.nodeName)}}}if(!CNJQ.support.focusinBubbles){CNJQ.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0,handler=function(event){CNJQ.event.simulate(fix,event.target,CNJQ.event.fix(event),true)};CNJQ.event.special[fix]={setup:function(){if(attaches++===0){document.addEventListener(orig,handler,true)}},teardown:function(){if(--attaches===0){document.removeEventListener(orig,handler,true)}}}})}CNJQ.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined}for(type in types){this.on(type,selector,data,types[type],one)}return this}if(data==null&&fn==null){fn=selector;data=selector=undefined}else{if(fn==null){if(typeof selector==="string"){fn=data;data=undefined}else{fn=data;data=selector;selector=undefined}}}if(fn===false){fn=returnFalse}else{if(!fn){return this}}if(one===1){origFn=fn;fn=function(event){CNJQ().off(event);return origFn.apply(this,arguments)};fn.guid=origFn.guid||(origFn.guid=CNJQ.guid++)}return this.each(function(){CNJQ.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;CNJQ(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this}if(typeof types==="object"){for(type in types){this.off(type,selector,types[type])}return this}if(selector===false||typeof selector==="function"){fn=selector;selector=undefined}if(fn===false){fn=returnFalse}return this.each(function(){CNJQ.event.remove(this,types,fn,selector)})},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},live:function(types,data,fn){CNJQ(this.context).on(types,this.selector,data,fn);return this},die:function(types,fn){CNJQ(this.context).off(types,this.selector||"**",fn);return this},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn)},trigger:function(type,data){return this.each(function(){CNJQ.event.trigger(type,data,this)})},triggerHandler:function(type,data){if(this[0]){return CNJQ.event.trigger(type,data,this[0],true)}},toggle:function(fn){var args=arguments,guid=fn.guid||CNJQ.guid++,i=0,toggler=function(event){var lastToggle=(CNJQ._data(this,"lastToggle"+fn.guid)||0)%i;CNJQ._data(this,"lastToggle"+fn.guid,lastToggle+1);event.preventDefault();return args[lastToggle].apply(this,arguments)||false};toggler.guid=guid;while(i<args.length){args[i++].guid=guid}return this.click(toggler)},hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}});CNJQ.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){CNJQ.fn[name]=function(data,fn){if(fn==null){fn=data;data=null}return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)};if(rkeyEvent.test(name)){CNJQ.event.fixHooks[name]=CNJQ.event.keyHooks}if(rmouseEvent.test(name)){CNJQ.event.fixHooks[name]=CNJQ.event.mouseHooks}});
/*!
	 * Sizzle CSS Selector Engine
	 * Copyright 2012 CNJQ Foundation and other contributors
	 * Released under the MIT license
	 * http://sizzlejs.com/
	 */
(function(window,undefined){var cachedruns,assertGetIdNotName,Expr,getText,isXML,contains,compile,sortOrder,hasDuplicate,outermostContext,baseHasDuplicate=true,strundefined="undefined",expando=("sizcache"+Math.random()).replace(".",""),Token=String,document=window.document,docElem=document.documentElement,dirruns=0,done=0,pop=[].pop,push=[].push,slice=[].slice,indexOf=[].indexOf||function(elem){var i=0,len=this.length;for(;i<len;i++){if(this[i]===elem){return i}}return -1},markFunction=function(fn,value){fn[expando]=value==null||value;return fn},createCache=function(){var cache={},keys=[];return markFunction(function(key,value){if(keys.push(key)>Expr.cacheLength){delete cache[keys.shift()]}return(cache[key+" "]=value)},cache)},classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),operators="([*^$|!~]?=)",attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:"+operators+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+attributes+")|[^:]|\\\\.)*|.*))\\)|)",pos=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([\\x20\\t\\r\\n\\f>+~])"+whitespace+"*"),rpseudo=new RegExp(pseudos),rquickExpr=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,rnot=/^:not/,rsibling=/[\x20\t\r\n\f]*[+~]/,rendsWithNot=/:not\($/,rheader=/h\d/i,rinputs=/input|select|textarea|button/i,rbackslash=/\\(?!\\)/g,matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),NAME:new RegExp("^\\[name=['\"]?("+characterEncoding+")['\"]?\\]"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),POS:new RegExp(pos,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|"+pos,"i")},assert=function(fn){var div=document.createElement("div");try{return fn(div)}catch(e){return false}finally{div=null}},assertTagNameNoComments=assert(function(div){div.appendChild(document.createComment(""));return !div.getElementsByTagName("*").length}),assertHrefNotNormalized=assert(function(div){div.innerHTML="<a href='#'></a>";return div.firstChild&&typeof div.firstChild.getAttribute!==strundefined&&div.firstChild.getAttribute("href")==="#"}),assertAttributes=assert(function(div){div.innerHTML="<select></select>";var type=typeof div.lastChild.getAttribute("multiple");return type!=="boolean"&&type!=="string"}),assertUsableClassName=assert(function(div){div.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!div.getElementsByClassName||!div.getElementsByClassName("e").length){return false}div.lastChild.className="e";return div.getElementsByClassName("e").length===2}),assertUsableName=assert(function(div){div.id=expando+0;div.innerHTML="<a name='"+expando+"'></a><div name='"+expando+"'></div>";docElem.insertBefore(div,docElem.firstChild);var pass=document.getElementsByName&&document.getElementsByName(expando).length===2+document.getElementsByName(expando+0).length;assertGetIdNotName=!document.getElementById(expando);docElem.removeChild(div);return pass});try{slice.call(docElem.childNodes,0)[0].nodeType}catch(e){slice=function(i){var elem,results=[];for(;(elem=this[i]);i++){results.push(elem)}return results}}function Sizzle(selector,context,results,seed){results=results||[];context=context||document;var match,elem,xml,m,nodeType=context.nodeType;if(!selector||typeof selector!=="string"){return results}if(nodeType!==1&&nodeType!==9){return[]}xml=isXML(context);if(!xml&&!seed){if((match=rquickExpr.exec(selector))){if((m=match[1])){if(nodeType===9){elem=context.getElementById(m);if(elem&&elem.parentNode){if(elem.id===m){results.push(elem);return results}}else{return results}}else{if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results}}}else{if(match[2]){push.apply(results,slice.call(context.getElementsByTagName(selector),0));return results}else{if((m=match[3])&&assertUsableClassName&&context.getElementsByClassName){push.apply(results,slice.call(context.getElementsByClassName(m),0));return results}}}}}return select(selector.replace(rtrim,"$1"),context,results,seed,xml)}Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)};Sizzle.matchesSelector=function(elem,expr){return Sizzle(expr,null,null,[elem]).length>0};function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--){if(seed[(j=matchIndexes[i])]){seed[j]=!(matches[j]=seed[j])}}})})}getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem)}}}else{if(nodeType===3||nodeType===4){return elem.nodeValue}}}else{for(;(node=elem[i]);i++){ret+=getText(node)}}return ret};isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};contains=Sizzle.contains=docElem.contains?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&adown.contains&&adown.contains(bup))}:docElem.compareDocumentPosition?function(a,b){return b&&!!(a.compareDocumentPosition(b)&16)}:function(a,b){while((b=b.parentNode)){if(b===a){return true}}return false};Sizzle.attr=function(elem,name){var val,xml=isXML(elem);if(!xml){name=name.toLowerCase()}if((val=Expr.attrHandle[name])){return val(elem)}if(xml||assertAttributes){return elem.getAttribute(name)}val=elem.getAttributeNode(name);return val?typeof elem[name]==="boolean"?elem[name]?name:null:val.specified?val.value:null:null};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:assertHrefNotNormalized?{}:{href:function(elem){return elem.getAttribute("href",2)},type:function(elem){return elem.getAttribute("type")}},find:{ID:assertGetIdNotName?function(id,context,xml){if(typeof context.getElementById!==strundefined&&!xml){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}}:function(id,context,xml){if(typeof context.getElementById!==strundefined&&!xml){var m=context.getElementById(id);return m?m.id===id||typeof m.getAttributeNode!==strundefined&&m.getAttributeNode("id").value===id?[m]:undefined:[]}},TAG:assertTagNameNoComments?function(tag,context){if(typeof context.getElementsByTagName!==strundefined){return context.getElementsByTagName(tag)}}:function(tag,context){var results=context.getElementsByTagName(tag);if(tag==="*"){var elem,tmp=[],i=0;for(;(elem=results[i]);i++){if(elem.nodeType===1){tmp.push(elem)}}return tmp}return results},NAME:assertUsableName&&function(tag,context){if(typeof context.getElementsByName!==strundefined){return context.getElementsByName(name)}},CLASS:assertUsableClassName&&function(className,context,xml){if(typeof context.getElementsByClassName!==strundefined&&!xml){return context.getElementsByClassName(className)}}},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){match[1]=match[1].replace(rbackslash,"");match[3]=(match[4]||match[5]||"").replace(rbackslash,"");if(match[2]==="~="){match[3]=" "+match[3]+" "}return match.slice(0,4)},CHILD:function(match){match[1]=match[1].toLowerCase();if(match[1]==="nth"){if(!match[2]){Sizzle.error(match[0])}match[3]=+(match[3]?match[4]+(match[5]||1):2*(match[2]==="even"||match[2]==="odd"));match[4]=+((match[6]+match[7])||match[2]==="odd")}else{if(match[2]){Sizzle.error(match[0])}}return match},PSEUDO:function(match){var unquoted,excess;if(matchExpr.CHILD.test(match[0])){return null}if(match[3]){match[2]=match[3]}else{if((unquoted=match[4])){if(rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){unquoted=unquoted.slice(0,excess);match[0]=match[0].slice(0,excess)}match[2]=unquoted}}return match.slice(0,3)}},filter:{ID:assertGetIdNotName?function(id){id=id.replace(rbackslash,"");return function(elem){return elem.getAttribute("id")===id}}:function(id){id=id.replace(rbackslash,"");return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===id}},TAG:function(nodeName){if(nodeName==="*"){return function(){return true}}nodeName=nodeName.replace(rbackslash,"").toLowerCase();return function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[expando][className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(elem.className||(typeof elem.getAttribute!==strundefined&&elem.getAttribute("class"))||"")})},ATTR:function(name,operator,check){return function(elem,context){var result=Sizzle.attr(elem,name);if(result==null){return operator==="!="}if(!operator){return true}result+="";return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)>-1:operator==="$="?check&&result.substr(result.length-check.length)===check:operator==="~="?(" "+result+" ").indexOf(check)>-1:operator==="|="?result===check||result.substr(0,check.length+1)===check+"-":false}},CHILD:function(type,argument,first,last){if(type==="nth"){return function(elem){var node,diff,parent=elem.parentNode;if(first===1&&last===0){return true}if(parent){diff=0;for(node=parent.firstChild;node;node=node.nextSibling){if(node.nodeType===1){diff++;if(elem===node){break}}}}diff-=last;return diff===first||(diff%first===0&&diff/first>=0)}}return function(elem){var node=elem;switch(type){case"only":case"first":while((node=node.previousSibling)){if(node.nodeType===1){return false}}if(type==="first"){return true}node=elem;case"last":while((node=node.nextSibling)){if(node.nodeType===1){return false}}return true}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando]){return fn(argument)}if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf.call(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i])}}):function(elem){return fn(elem,0,args)}}return fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--){if((elem=unmatched[i])){seed[i]=!(matches[i]=elem)}}}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);return !results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),enabled:function(elem){return elem.disabled===false},disabled:function(elem){return elem.disabled===true},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return(nodeName==="input"&&!!elem.checked)||(nodeName==="option"&&!!elem.selected)},selected:function(elem){if(elem.parentNode){elem.parentNode.selectedIndex}return elem.selected===true},parent:function(elem){return !Expr.pseudos.empty(elem)},empty:function(elem){var nodeType;elem=elem.firstChild;while(elem){if(elem.nodeName>"@"||(nodeType=elem.nodeType)===3||nodeType===4){return false}elem=elem.nextSibling}return true},header:function(elem){return rheader.test(elem.nodeName)},text:function(elem){var type,attr;return elem.nodeName.toLowerCase()==="input"&&(type=elem.type)==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()===type)},radio:createInputPseudo("radio"),checkbox:createInputPseudo("checkbox"),file:createInputPseudo("file"),password:createInputPseudo("password"),image:createInputPseudo("image"),submit:createButtonPseudo("submit"),reset:createButtonPseudo("reset"),button:function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button"},input:function(elem){return rinputs.test(elem.nodeName)},focus:function(elem){var doc=elem.ownerDocument;return elem===doc.activeElement&&(!doc.hasFocus||doc.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},active:function(elem){return elem===elem.ownerDocument.activeElement},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;--i>=0;){matchIndexes.push(i)}return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;++i<length;){matchIndexes.push(i)}return matchIndexes})}};function siblingCheck(a,b,ret){if(a===b){return ret}var cur=a.nextSibling;while(cur){if(cur===b){return -1}cur=cur.nextSibling}return 1}sortOrder=docElem.compareDocumentPosition?function(a,b){if(a===b){hasDuplicate=true;return 0}return(!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition:a.compareDocumentPosition(b)&4)?-1:1}:function(a,b){if(a===b){hasDuplicate=true;return 0}else{if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex}}var al,bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(aup===bup){return siblingCheck(a,b)}else{if(!aup){return -1}else{if(!bup){return 1}}}while(cur){ap.unshift(cur);cur=cur.parentNode}cur=bup;while(cur){bp.unshift(cur);cur=cur.parentNode}al=ap.length;bl=bp.length;for(var i=0;i<al&&i<bl;i++){if(ap[i]!==bp[i]){return siblingCheck(ap[i],bp[i])}}return i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1)};[0,0].sort(sortOrder);baseHasDuplicate=!hasDuplicate;Sizzle.uniqueSort=function(results){var elem,duplicates=[],i=1,j=0;hasDuplicate=baseHasDuplicate;results.sort(sortOrder);if(hasDuplicate){for(;(elem=results[i]);i++){if(elem===results[i-1]){j=duplicates.push(i)}}while(j--){results.splice(duplicates[j],1)}}return results};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)};function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[expando][selector+" "];if(cached){return parseOnly?0:cached.slice(0)}soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length)||soFar}groups.push(tokens=[])}matched=false;if((match=rcombinators.exec(soFar))){tokens.push(matched=new Token(match.shift()));soFar=soFar.slice(matched.length);matched.type=match[0].replace(rtrim," ")}for(type in Expr.filter){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){tokens.push(matched=new Token(match.shift()));soFar=soFar.slice(matched.length);matched.type=type;matched.matches=match}}if(!matched){break}}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&combinator.dir==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while((elem=elem[dir])){if(checkNonElements||elem.nodeType===1){return matcher(elem,context,xml)}}}:function(elem,context,xml){if(!xml){var cache,dirkey=dirruns+" "+doneName+" ",cachedkey=dirkey+cachedruns;while((elem=elem[dir])){if(checkNonElements||elem.nodeType===1){if((cache=elem[expando])===cachedkey){return elem.sizset}else{if(typeof cache==="string"&&cache.indexOf(dirkey)===0){if(elem.sizset){return elem}}else{elem[expando]=cachedkey;if(matcher(elem,context,xml)){elem.sizset=true;return elem}elem.sizset=false}}}}}else{while((elem=elem[dir])){if(checkNonElements||elem.nodeType===1){if(matcher(elem,context,xml)){return elem}}}}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--){if(!matchers[i](elem,context,xml)){return false}}return true}:matchers[0]}function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++){if((elem=unmatched[i])){if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped){map.push(i)}}}}return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando]){postFilter=setMatcher(postFilter)}if(postFinder&&!postFinder[expando]){postFinder=setMatcher(postFinder,postSelector)}return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher){matcher(matcherIn,matcherOut,context,xml)}if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--){if((elem=temp[i])){matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem)}}}if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--){if((elem=matcherOut[i])){temp.push((matcherIn[i]=elem))}}postFinder(null,(matcherOut=[]),temp,xml)}i=matcherOut.length;while(i--){if((elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1){seed[temp]=!(results[temp]=elem)}}}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder){postFinder(null,results,matcherOut,xml)}else{push.apply(results,matcherOut)}}})}function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,elem)>-1},implicitRelative,true),matchers=[function(elem,context,xml){return(!leadingRelative&&(xml||context!==outermostContext))||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];for(;i<len;i++){if((matcher=Expr.relative[tokens[i].type])){matchers=[addCombinator(elementMatcher(matchers),matcher)]}else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++){if(Expr.relative[tokens[j].type]){break}}return setMatcher(i>1&&elementMatcher(matchers),i>1&&tokens.slice(0,i-1).join("").replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens((tokens=tokens.slice(j))),j<len&&tokens.join(""))}matchers.push(matcher)}}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,expandContext){var elem,j,matcher,setMatched=[],matchedCount=0,i="0",unmatched=seed&&[],outermost=expandContext!=null,contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",expandContext&&context.parentNode||context),dirrunsUnique=(dirruns+=contextBackup==null?1:Math.E);if(outermost){outermostContext=context!==document&&context;cachedruns=superMatcher.el}for(;(elem=elems[i])!=null;i++){if(byElement&&elem){for(j=0;(matcher=elementMatchers[j]);j++){if(matcher(elem,context,xml)){results.push(elem);break}}if(outermost){dirruns=dirrunsUnique;cachedruns=++superMatcher.el}}if(bySet){if((elem=!matcher&&elem)){matchedCount--}if(seed){unmatched.push(elem)}}}matchedCount+=i;if(bySet&&i!==matchedCount){for(j=0;(matcher=setMatchers[j]);j++){matcher(unmatched,setMatched,context,xml)}if(seed){if(matchedCount>0){while(i--){if(!(unmatched[i]||setMatched[i])){setMatched[i]=pop.call(results)}}}setMatched=condense(setMatched)}push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&(matchedCount+setMatchers.length)>1){Sizzle.uniqueSort(results)}}if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup}return unmatched};superMatcher.el=0;return bySet?markFunction(superMatcher):superMatcher}compile=Sizzle.compile=function(selector,group){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[expando][selector+" "];if(!cached){if(!group){group=tokenize(selector)}i=group.length;while(i--){cached=matcherFromTokens(group[i]);if(cached[expando]){setMatchers.push(cached)}else{elementMatchers.push(cached)}}cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers))}return cached};function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++){Sizzle(selector,contexts[i],results)}return results}function select(selector,context,results,seed,xml){var i,tokens,token,type,find,match=tokenize(selector),j=match.length;if(!seed){if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&context.nodeType===9&&!xml&&Expr.relative[tokens[1].type]){context=Expr.find.ID(token.matches[0].replace(rbackslash,""),context,xml)[0];if(!context){return results}selector=selector.slice(tokens.shift().length)}for(i=matchExpr.POS.test(selector)?-1:tokens.length-1;i>=0;i--){token=tokens[i];if(Expr.relative[(type=token.type)]){break}if((find=Expr.find[type])){if((seed=find(token.matches[0].replace(rbackslash,""),rsibling.test(tokens[0].type)&&context.parentNode||context,xml))){tokens.splice(i,1);selector=seed.length&&tokens.join("");if(!selector){push.apply(results,slice.call(seed,0));return results}break}}}}}compile(selector,match)(seed,context,xml,results,rsibling.test(selector));return results}if(document.querySelectorAll){(function(){var disconnectedMatch,oldSelect=select,rescape=/'|\\/g,rattributeQuotes=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,rbuggyQSA=[":focus"],rbuggyMatches=[":active"],matches=docElem.matchesSelector||docElem.mozMatchesSelector||docElem.webkitMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector;assert(function(div){div.innerHTML="<select><option selected=''></option></select>";if(!div.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)")}if(!div.querySelectorAll(":checked").length){rbuggyQSA.push(":checked")}});assert(function(div){div.innerHTML="<p test=''></p>";if(div.querySelectorAll("[test^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:\"\"|'')")}div.innerHTML="<input type='hidden'/>";if(!div.querySelectorAll(":enabled").length){rbuggyQSA.push(":enabled",":disabled")}});rbuggyQSA=new RegExp(rbuggyQSA.join("|"));select=function(selector,context,results,seed,xml){if(!seed&&!xml&&!rbuggyQSA.test(selector)){var groups,i,old=true,nid=expando,newContext=context,newSelector=context.nodeType===9&&selector;if(context.nodeType===1&&context.nodeName.toLowerCase()!=="object"){groups=tokenize(selector);if((old=context.getAttribute("id"))){nid=old.replace(rescape,"\\$&")}else{context.setAttribute("id",nid)}nid="[id='"+nid+"'] ";i=groups.length;while(i--){groups[i]=nid+groups[i].join("")}newContext=rsibling.test(selector)&&context.parentNode||context;newSelector=groups.join(",")}if(newSelector){try{push.apply(results,slice.call(newContext.querySelectorAll(newSelector),0));return results}catch(qsaError){}finally{if(!old){context.removeAttribute("id")}}}}return oldSelect(selector,context,results,seed,xml)};if(matches){assert(function(div){disconnectedMatch=matches.call(div,"div");try{matches.call(div,"[test!='']:sizzle");rbuggyMatches.push("!=",pseudos)}catch(e){}});rbuggyMatches=new RegExp(rbuggyMatches.join("|"));Sizzle.matchesSelector=function(elem,expr){expr=expr.replace(rattributeQuotes,"='$1']");if(!isXML(elem)&&!rbuggyMatches.test(expr)&&!rbuggyQSA.test(expr)){try{var ret=matches.call(elem,expr);if(ret||disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret}}catch(e){}}return Sizzle(expr,null,null,[elem]).length>0}}})()}Expr.pseudos.nth=Expr.pseudos.eq;function setFilters(){}Expr.filters=setFilters.prototype=Expr.pseudos;Expr.setFilters=new setFilters();Sizzle.attr=CNJQ.attr;CNJQ.find=Sizzle;CNJQ.expr=Sizzle.selectors;CNJQ.expr[":"]=CNJQ.expr.pseudos;CNJQ.unique=Sizzle.uniqueSort;CNJQ.text=Sizzle.getText;CNJQ.isXMLDoc=Sizzle.isXML;CNJQ.contains=Sizzle.contains})(window);var runtil=/Until$/,rparentsprev=/^(?:parents|prev(?:Until|All))/,isSimple=/^.[^:#\[\.,]*$/,rneedsContext=CNJQ.expr.match.needsContext,guaranteedUnique={children:true,contents:true,next:true,prev:true};CNJQ.fn.extend({find:function(selector){var i,l,length,n,r,ret,self=this;if(typeof selector!=="string"){return CNJQ(selector).filter(function(){for(i=0,l=self.length;i<l;i++){if(CNJQ.contains(self[i],this)){return true}}})}ret=this.pushStack("","find",selector);for(i=0,l=this.length;i<l;i++){length=ret.length;CNJQ.find(selector,this[i],ret);if(i>0){for(n=length;n<ret.length;n++){for(r=0;r<length;r++){if(ret[r]===ret[n]){ret.splice(n--,1);break}}}}}return ret},has:function(target){var i,targets=CNJQ(target,this),len=targets.length;return this.filter(function(){for(i=0;i<len;i++){if(CNJQ.contains(this,targets[i])){return true}}})},not:function(selector){return this.pushStack(winnow(this,selector,false),"not",selector)},filter:function(selector){return this.pushStack(winnow(this,selector,true),"filter",selector)},is:function(selector){return !!selector&&(typeof selector==="string"?rneedsContext.test(selector)?CNJQ(selector,this.context).index(this[0])>=0:CNJQ.filter(selector,this).length>0:this.filter(selector).length>0)},closest:function(selectors,context){var cur,i=0,l=this.length,ret=[],pos=rneedsContext.test(selectors)||typeof selectors!=="string"?CNJQ(selectors,context||this.context):0;for(;i<l;i++){cur=this[i];while(cur&&cur.ownerDocument&&cur!==context&&cur.nodeType!==11){if(pos?pos.index(cur)>-1:CNJQ.find.matchesSelector(cur,selectors)){ret.push(cur);break}cur=cur.parentNode}}ret=ret.length>1?CNJQ.unique(ret):ret;return this.pushStack(ret,"closest",selectors)},index:function(elem){if(!elem){return(this[0]&&this[0].parentNode)?this.prevAll().length:-1}if(typeof elem==="string"){return CNJQ.inArray(this[0],CNJQ(elem))}return CNJQ.inArray(elem.CNJQ?elem[0]:elem,this)},add:function(selector,context){var set=typeof selector==="string"?CNJQ(selector,context):CNJQ.makeArray(selector&&selector.nodeType?[selector]:selector),all=CNJQ.merge(this.get(),set);return this.pushStack(isDisconnected(set[0])||isDisconnected(all[0])?all:CNJQ.unique(all))},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))}});CNJQ.fn.andSelf=CNJQ.fn.addBack;function isDisconnected(node){return !node||!node.parentNode||node.parentNode.nodeType===11}function sibling(cur,dir){do{cur=cur[dir]}while(cur&&cur.nodeType!==1);return cur}CNJQ.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function(elem){return CNJQ.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return CNJQ.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return CNJQ.dir(elem,"nextSibling")},prevAll:function(elem){return CNJQ.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return CNJQ.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return CNJQ.dir(elem,"previousSibling",until)},siblings:function(elem){return CNJQ.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return CNJQ.sibling(elem.firstChild)},contents:function(elem){return CNJQ.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:CNJQ.merge([],elem.childNodes)}},function(name,fn){CNJQ.fn[name]=function(until,selector){var ret=CNJQ.map(this,fn,until);if(!runtil.test(name)){selector=until}if(selector&&typeof selector==="string"){ret=CNJQ.filter(selector,ret)}ret=this.length>1&&!guaranteedUnique[name]?CNJQ.unique(ret):ret;if(this.length>1&&rparentsprev.test(name)){ret=ret.reverse()}return this.pushStack(ret,name,core_slice.call(arguments).join(","))}});CNJQ.extend({filter:function(expr,elems,not){if(not){expr=":not("+expr+")"}return elems.length===1?CNJQ.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:CNJQ.find.matches(expr,elems)},dir:function(elem,dir,until){var matched=[],cur=elem[dir];while(cur&&cur.nodeType!==9&&(until===undefined||cur.nodeType!==1||!CNJQ(cur).is(until))){if(cur.nodeType===1){matched.push(cur)}cur=cur[dir]}return matched},sibling:function(n,elem){var r=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){r.push(n)}}return r}});function winnow(elements,qualifier,keep){qualifier=qualifier||0;if(CNJQ.isFunction(qualifier)){return CNJQ.grep(elements,function(elem,i){var retVal=!!qualifier.call(elem,i,elem);return retVal===keep})}else{if(qualifier.nodeType){return CNJQ.grep(elements,function(elem,i){return(elem===qualifier)===keep})}else{if(typeof qualifier==="string"){var filtered=CNJQ.grep(elements,function(elem){return elem.nodeType===1});if(isSimple.test(qualifier)){return CNJQ.filter(qualifier,filtered,!keep)}else{qualifier=CNJQ.filter(qualifier,filtered)}}}}return CNJQ.grep(elements,function(elem,i){return(CNJQ.inArray(elem,qualifier)>=0)===keep})}function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement){while(list.length){safeFrag.createElement(list.pop())}}return safeFrag}var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlineCNJQ=/ CNJQ\d+="(?:null|\d+)"/g,rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rnocache=/<(?:script|object|embed|option|style)/i,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rcheckableType=/^(?:checkbox|radio)$/,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/\/(java|ecma)script/i,rcleanScript=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},safeFragment=createSafeFragment(document),fragmentDiv=safeFragment.appendChild(document.createElement("div"));wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;if(!CNJQ.support.htmlSerialize){wrapMap._default=[1,"X<div>","</div>"]}CNJQ.fn.extend({text:function(value){return CNJQ.access(this,function(value){return value===undefined?CNJQ.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},wrapAll:function(html){if(CNJQ.isFunction(html)){return this.each(function(i){CNJQ(this).wrapAll(html.call(this,i))})}if(this[0]){var wrap=CNJQ(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0])}wrap.map(function(){var elem=this;while(elem.firstChild&&elem.firstChild.nodeType===1){elem=elem.firstChild}return elem}).append(this)}return this},wrapInner:function(html){if(CNJQ.isFunction(html)){return this.each(function(i){CNJQ(this).wrapInner(html.call(this,i))})}return this.each(function(){var self=CNJQ(this),contents=self.contents();if(contents.length){contents.wrapAll(html)}else{self.append(html)}})},wrap:function(html){var isFunction=CNJQ.isFunction(html);return this.each(function(i){CNJQ(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){if(!CNJQ.nodeName(this,"body")){CNJQ(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1||this.nodeType===11){this.appendChild(elem)}})},prepend:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1||this.nodeType===11){this.insertBefore(elem,this.firstChild)}})},before:function(){if(!isDisconnected(this[0])){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this)})}if(arguments.length){var set=CNJQ.clean(arguments);return this.pushStack(CNJQ.merge(set,this),"before",this.selector)}},after:function(){if(!isDisconnected(this[0])){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this.nextSibling)})}if(arguments.length){var set=CNJQ.clean(arguments);return this.pushStack(CNJQ.merge(this,set),"after",this.selector)}},remove:function(selector,keepData){var elem,i=0;for(;(elem=this[i])!=null;i++){if(!selector||CNJQ.filter(selector,[elem]).length){if(!keepData&&elem.nodeType===1){CNJQ.cleanData(elem.getElementsByTagName("*"));CNJQ.cleanData([elem])}if(elem.parentNode){elem.parentNode.removeChild(elem)}}}return this},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1){CNJQ.cleanData(elem.getElementsByTagName("*"))}while(elem.firstChild){elem.removeChild(elem.firstChild)}}return this},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return CNJQ.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return CNJQ.access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined){return elem.nodeType===1?elem.innerHTML.replace(rinlineCNJQ,""):undefined}if(typeof value==="string"&&!rnoInnerhtml.test(value)&&(CNJQ.support.htmlSerialize||!rnoshimcache.test(value))&&(CNJQ.support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){CNJQ.cleanData(elem.getElementsByTagName("*"));elem.innerHTML=value}}elem=0}catch(e){}}if(elem){this.empty().append(value)}},null,value,arguments.length)},replaceWith:function(value){if(!isDisconnected(this[0])){if(CNJQ.isFunction(value)){return this.each(function(i){var self=CNJQ(this),old=self.html();self.replaceWith(value.call(this,i,old))})}if(typeof value!=="string"){value=CNJQ(value).detach()}return this.each(function(){var next=this.nextSibling,parent=this.parentNode;CNJQ(this).remove();if(next){CNJQ(next).before(value)}else{CNJQ(parent).append(value)}})}return this.length?this.pushStack(CNJQ(CNJQ.isFunction(value)?value():value),"replaceWith",value):this},detach:function(selector){return this.remove(selector,true)},domManip:function(args,table,callback){args=[].concat.apply([],args);var results,first,fragment,iNoClone,i=0,value=args[0],scripts=[],l=this.length;if(!CNJQ.support.checkClone&&l>1&&typeof value==="string"&&rchecked.test(value)){return this.each(function(){CNJQ(this).domManip(args,table,callback)})}if(CNJQ.isFunction(value)){return this.each(function(i){var self=CNJQ(this);args[0]=value.call(this,i,table?self.html():undefined);self.domManip(args,table,callback)})}if(this[0]){results=CNJQ.buildFragment(args,this,scripts);fragment=results.fragment;first=fragment.firstChild;if(fragment.childNodes.length===1){fragment=first}if(first){table=table&&CNJQ.nodeName(first,"tr");for(iNoClone=results.cacheable||l-1;i<l;i++){callback.call(table&&CNJQ.nodeName(this[i],"table")?findOrAppend(this[i],"tbody"):this[i],i===iNoClone?fragment:CNJQ.clone(fragment,true,true))}}fragment=first=null;if(scripts.length){CNJQ.each(scripts,function(i,elem){if(elem.src){if(CNJQ.ajax){CNJQ.ajax({url:elem.src,type:"GET",dataType:"script",async:false,global:false,"throws":true})}else{CNJQ.error("no ajax")}}else{CNJQ.globalEval((elem.text||elem.textContent||elem.innerHTML||"").replace(rcleanScript,""))}if(elem.parentNode){elem.parentNode.removeChild(elem)}})}}return this}});function findOrAppend(elem,tag){return elem.getElementsByTagName(tag)[0]||elem.appendChild(elem.ownerDocument.createElement(tag))}function cloneCopyEvent(src,dest){if(dest.nodeType!==1||!CNJQ.hasData(src)){return}var type,i,l,oldData=CNJQ._data(src),curData=CNJQ._data(dest,oldData),events=oldData.events;if(events){delete curData.handle;curData.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){CNJQ.event.add(dest,type,events[type][i])}}}if(curData.data){curData.data=CNJQ.extend({},curData.data)}}function cloneFixAttributes(src,dest){var nodeName;if(dest.nodeType!==1){return}if(dest.clearAttributes){dest.clearAttributes()}if(dest.mergeAttributes){dest.mergeAttributes(src)}nodeName=dest.nodeName.toLowerCase();if(nodeName==="object"){if(dest.parentNode){dest.outerHTML=src.outerHTML}if(CNJQ.support.html5Clone&&(src.innerHTML&&!CNJQ.trim(dest.innerHTML))){dest.innerHTML=src.innerHTML}}else{if(nodeName==="input"&&rcheckableType.test(src.type)){dest.defaultChecked=dest.checked=src.checked;if(dest.value!==src.value){dest.value=src.value}}else{if(nodeName==="option"){dest.selected=src.defaultSelected}else{if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue}else{if(nodeName==="script"&&dest.text!==src.text){dest.text=src.text}}}}}dest.removeAttribute(CNJQ.expando)}CNJQ.buildFragment=function(args,context,scripts){var fragment,cacheable,cachehit,first=args[0];context=context||document;context=!context.nodeType&&context[0]||context;context=context.ownerDocument||context;if(args.length===1&&typeof first==="string"&&first.length<512&&context===document&&first.charAt(0)==="<"&&!rnocache.test(first)&&(CNJQ.support.checkClone||!rchecked.test(first))&&(CNJQ.support.html5Clone||!rnoshimcache.test(first))){cacheable=true;fragment=CNJQ.fragments[first];cachehit=fragment!==undefined}if(!fragment){fragment=context.createDocumentFragment();CNJQ.clean(args,context,fragment,scripts);if(cacheable){CNJQ.fragments[first]=cachehit&&fragment}}return{fragment:fragment,cacheable:cacheable}};CNJQ.fragments={};CNJQ.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){CNJQ.fn[name]=function(selector){var elems,i=0,ret=[],insert=CNJQ(selector),l=insert.length,parent=this.length===1&&this[0].parentNode;if((parent==null||parent&&parent.nodeType===11&&parent.childNodes.length===1)&&l===1){insert[original](this[0]);return this}else{for(;i<l;i++){elems=(i>0?this.clone(true):this).get();CNJQ(insert[i])[original](elems);ret=ret.concat(elems)}return this.pushStack(ret,name,insert.selector)}}});function getAll(elem){if(typeof elem.getElementsByTagName!=="undefined"){return elem.getElementsByTagName("*")}else{if(typeof elem.querySelectorAll!=="undefined"){return elem.querySelectorAll("*")}else{return[]}}}function fixDefaultChecked(elem){if(rcheckableType.test(elem.type)){elem.defaultChecked=elem.checked}}CNJQ.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var srcElements,destElements,i,clone;if(CNJQ.support.html5Clone||CNJQ.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")){clone=elem.cloneNode(true)}else{fragmentDiv.innerHTML=elem.outerHTML;fragmentDiv.removeChild(clone=fragmentDiv.firstChild)}if((!CNJQ.support.noCloneEvent||!CNJQ.support.noCloneChecked)&&(elem.nodeType===1||elem.nodeType===11)&&!CNJQ.isXMLDoc(elem)){cloneFixAttributes(elem,clone);srcElements=getAll(elem);destElements=getAll(clone);for(i=0;srcElements[i];++i){if(destElements[i]){cloneFixAttributes(srcElements[i],destElements[i])}}}if(dataAndEvents){cloneCopyEvent(elem,clone);if(deepDataAndEvents){srcElements=getAll(elem);destElements=getAll(clone);for(i=0;srcElements[i];++i){cloneCopyEvent(srcElements[i],destElements[i])}}}srcElements=destElements=null;return clone},clean:function(elems,context,fragment,scripts){var i,j,elem,tag,wrap,depth,div,hasBody,tbody,len,handleScript,jsTags,safe=context===document&&safeFragment,ret=[];if(!context||typeof context.createDocumentFragment==="undefined"){context=document}for(i=0;(elem=elems[i])!=null;i++){if(typeof elem==="number"){elem+=""}if(!elem){continue}if(typeof elem==="string"){if(!rhtml.test(elem)){elem=context.createTextNode(elem)}else{safe=safe||createSafeFragment(context);div=context.createElement("div");safe.appendChild(div);elem=elem.replace(rxhtmlTag,"<$1></$2>");tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;depth=wrap[0];div.innerHTML=wrap[1]+elem+wrap[2];while(depth--){div=div.lastChild}if(!CNJQ.support.tbody){hasBody=rtbody.test(elem);tbody=tag==="table"&&!hasBody?div.firstChild&&div.firstChild.childNodes:wrap[1]==="<table>"&&!hasBody?div.childNodes:[];for(j=tbody.length-1;j>=0;--j){if(CNJQ.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length){tbody[j].parentNode.removeChild(tbody[j])}}}if(!CNJQ.support.leadingWhitespace&&rleadingWhitespace.test(elem)){div.insertBefore(context.createTextNode(rleadingWhitespace.exec(elem)[0]),div.firstChild)}elem=div.childNodes;div.parentNode.removeChild(div)}}if(elem.nodeType){ret.push(elem)}else{CNJQ.merge(ret,elem)}}if(div){elem=div=safe=null}if(!CNJQ.support.appendChecked){for(i=0;(elem=ret[i])!=null;i++){if(CNJQ.nodeName(elem,"input")){fixDefaultChecked(elem)}else{if(typeof elem.getElementsByTagName!=="undefined"){CNJQ.grep(elem.getElementsByTagName("input"),fixDefaultChecked)}}}}if(fragment){handleScript=function(elem){if(!elem.type||rscriptType.test(elem.type)){return scripts?scripts.push(elem.parentNode?elem.parentNode.removeChild(elem):elem):fragment.appendChild(elem)}};for(i=0;(elem=ret[i])!=null;i++){if(!(CNJQ.nodeName(elem,"script")&&handleScript(elem))){fragment.appendChild(elem);if(typeof elem.getElementsByTagName!=="undefined"){jsTags=CNJQ.grep(CNJQ.merge([],elem.getElementsByTagName("script")),handleScript);ret.splice.apply(ret,[i+1,0].concat(jsTags));i+=jsTags.length}}}}return ret},cleanData:function(elems,acceptData){var data,id,elem,type,i=0,internalKey=CNJQ.expando,cache=CNJQ.cache,deleteExpando=CNJQ.support.deleteExpando,special=CNJQ.event.special;for(;(elem=elems[i])!=null;i++){if(acceptData||CNJQ.acceptData(elem)){id=elem[internalKey];data=id&&cache[id];if(data){if(data.events){for(type in data.events){if(special[type]){CNJQ.event.remove(elem,type)}else{CNJQ.removeEvent(elem,type,data.handle)}}}if(cache[id]){delete cache[id];if(deleteExpando){delete elem[internalKey]}else{if(elem.removeAttribute){elem.removeAttribute(internalKey)}else{elem[internalKey]=null}}CNJQ.deletedIds.push(id)}}}}}});(function(){var matched,browser;CNJQ.uaMatch=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}};matched=CNJQ.uaMatch(navigator.userAgent);browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version}if(browser.chrome){browser.webkit=true}else{if(browser.webkit){browser.safari=true}}CNJQ.browser=browser;CNJQ.sub=function(){function CNJQSub(selector,context){return new CNJQSub.fn.init(selector,context)}CNJQ.extend(true,CNJQSub,this);CNJQSub.superclass=this;CNJQSub.fn=CNJQSub.prototype=this();CNJQSub.fn.constructor=CNJQSub;CNJQSub.sub=this.sub;CNJQSub.fn.init=function init(selector,context){if(context&&context instanceof CNJQ&&!(context instanceof CNJQSub)){context=CNJQSub(context)}return CNJQ.fn.init.call(this,selector,context,rootCNJQSub)};CNJQSub.fn.init.prototype=CNJQSub.fn;var rootCNJQSub=CNJQSub(document);return CNJQSub}})();var curCSS,iframe,iframeDoc,ralpha=/alpha\([^)]*\)/i,ropacity=/opacity=([^)]*)/,rposition=/^(top|right|bottom|left)$/,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rmargin=/^margin/,rnumsplit=new RegExp("^("+core_pnum+")(.*)$","i"),rnumnonpx=new RegExp("^("+core_pnum+")(?!px)[a-z%]+$","i"),rrelNum=new RegExp("^([-+])=("+core_pnum+")","i"),elemdisplay={BODY:"block"},cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400},cssExpand=["Top","Right","Bottom","Left"],cssPrefixes=["Webkit","O","Moz","ms"],eventsToggle=CNJQ.fn.toggle;function vendorPropName(style,name){if(name in style){return name}var capName=name.charAt(0).toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in style){return name}}return origName}function isHidden(elem,el){elem=el||elem;return CNJQ.css(elem,"display")==="none"||!CNJQ.contains(elem.ownerDocument,elem)}function showHide(elements,show){var elem,display,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style){continue}values[index]=CNJQ._data(elem,"olddisplay");if(show){if(!values[index]&&elem.style.display==="none"){elem.style.display=""}if(elem.style.display===""&&isHidden(elem)){values[index]=CNJQ._data(elem,"olddisplay",css_defaultDisplay(elem.nodeName))}}else{display=curCSS(elem,"display");if(!values[index]&&display!=="none"){CNJQ._data(elem,"olddisplay",display)}}}for(index=0;index<length;index++){elem=elements[index];if(!elem.style){continue}if(!show||elem.style.display==="none"||elem.style.display===""){elem.style.display=show?values[index]||"":"none"}}return elements}CNJQ.fn.extend({css:function(name,value){return CNJQ.access(this,function(elem,name,value){return value!==undefined?CNJQ.style(elem,name,value):CNJQ.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,true)},hide:function(){return showHide(this)},toggle:function(state,fn2){var bool=typeof state==="boolean";if(CNJQ.isFunction(state)&&CNJQ.isFunction(fn2)){return eventsToggle.apply(this,arguments)}return this.each(function(){if(bool?state:isHidden(this)){CNJQ(this).show()}else{CNJQ(this).hide()}})}});CNJQ.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":CNJQ.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return}var ret,type,hooks,origName=CNJQ.camelCase(name),style=elem.style;name=CNJQ.cssProps[origName]||(CNJQ.cssProps[origName]=vendorPropName(style,origName));hooks=CNJQ.cssHooks[name]||CNJQ.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rrelNum.exec(value))){value=(ret[1]+1)*ret[2]+parseFloat(CNJQ.css(elem,name));type="number"}if(value==null||type==="number"&&isNaN(value)){return}if(type==="number"&&!CNJQ.cssNumber[origName]){value+="px"}if(!hooks||!("set" in hooks)||(value=hooks.set(elem,value,extra))!==undefined){try{style[name]=value}catch(e){}}}else{if(hooks&&"get" in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret}return style[name]}},css:function(elem,name,numeric,extra){var val,num,hooks,origName=CNJQ.camelCase(name);name=CNJQ.cssProps[origName]||(CNJQ.cssProps[origName]=vendorPropName(elem.style,origName));hooks=CNJQ.cssHooks[name]||CNJQ.cssHooks[origName];if(hooks&&"get" in hooks){val=hooks.get(elem,true,extra)}if(val===undefined){val=curCSS(elem,name)}if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name]}if(numeric||extra!==undefined){num=parseFloat(val);return numeric||CNJQ.isNumeric(num)?num||0:val}return val},swap:function(elem,options,callback){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name]}ret=callback.call(elem);for(name in options){elem.style[name]=old[name]}return ret}});if(window.getComputedStyle){curCSS=function(elem,name){var ret,width,minWidth,maxWidth,computed=window.getComputedStyle(elem,null),style=elem.style;if(computed){ret=computed.getPropertyValue(name)||computed[name];if(ret===""&&!CNJQ.contains(elem.ownerDocument,elem)){ret=CNJQ.style(elem,name)}if(rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth}}return ret}}else{if(document.documentElement.currentStyle){curCSS=function(elem,name){var left,rsLeft,ret=elem.currentStyle&&elem.currentStyle[name],style=elem.style;if(ret==null&&style&&style[name]){ret=style[name]}if(rnumnonpx.test(ret)&&!rposition.test(name)){left=style.left;rsLeft=elem.runtimeStyle&&elem.runtimeStyle.left;if(rsLeft){elem.runtimeStyle.left=elem.currentStyle.left}style.left=name==="fontSize"?"1em":ret;ret=style.pixelLeft+"px";style.left=left;if(rsLeft){elem.runtimeStyle.left=rsLeft}}return ret===""?"auto":ret}}}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox){var i=extra===(isBorderBox?"border":"content")?4:name==="width"?1:0,val=0;for(;i<4;i+=2){if(extra==="margin"){val+=CNJQ.css(elem,extra+cssExpand[i],true)}if(isBorderBox){if(extra==="content"){val-=parseFloat(curCSS(elem,"padding"+cssExpand[i]))||0}if(extra!=="margin"){val-=parseFloat(curCSS(elem,"border"+cssExpand[i]+"Width"))||0}}else{val+=parseFloat(curCSS(elem,"padding"+cssExpand[i]))||0;if(extra!=="padding"){val+=parseFloat(curCSS(elem,"border"+cssExpand[i]+"Width"))||0}}}return val}function getWidthOrHeight(elem,name,extra){var val=name==="width"?elem.offsetWidth:elem.offsetHeight,valueIsBorderBox=true,isBorderBox=CNJQ.support.boxSizing&&CNJQ.css(elem,"boxSizing")==="border-box";if(val<=0||val==null){val=curCSS(elem,name);if(val<0||val==null){val=elem.style[name]}if(rnumnonpx.test(val)){return val}valueIsBorderBox=isBorderBox&&(CNJQ.support.boxSizingReliable||val===elem.style[name]);val=parseFloat(val)||0}return(val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox))+"px"}function css_defaultDisplay(nodeName){if(elemdisplay[nodeName]){return elemdisplay[nodeName]}var elem=CNJQ("<"+nodeName+">").appendTo(document.body),display=elem.css("display");elem.remove();if(display==="none"||display===""){iframe=document.body.appendChild(iframe||CNJQ.extend(document.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!iframeDoc||!iframe.createElement){iframeDoc=(iframe.contentWindow||iframe.contentDocument).document;iframeDoc.write("<!doctype html><html><body>");iframeDoc.close()}elem=iframeDoc.body.appendChild(iframeDoc.createElement(nodeName));display=curCSS(elem,"display");document.body.removeChild(iframe)}elemdisplay[nodeName]=display;return display}CNJQ.each(["height","width"],function(i,name){CNJQ.cssHooks[name]={get:function(elem,computed,extra){if(computed){if(elem.offsetWidth===0&&rdisplayswap.test(curCSS(elem,"display"))){return CNJQ.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)})}else{return getWidthOrHeight(elem,name,extra)}}},set:function(elem,value,extra){return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,CNJQ.support.boxSizing&&CNJQ.css(elem,"boxSizing")==="border-box"):0)}}});if(!CNJQ.support.opacity){CNJQ.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?(0.01*parseFloat(RegExp.$1))+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=CNJQ.isNumeric(value)?"alpha(opacity="+value*100+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1;if(value>=1&&CNJQ.trim(filter.replace(ralpha,""))===""&&style.removeAttribute){style.removeAttribute("filter");if(currentStyle&&!currentStyle.filter){return}}style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity}}}CNJQ(function(){if(!CNJQ.support.reliableMarginRight){CNJQ.cssHooks.marginRight={get:function(elem,computed){return CNJQ.swap(elem,{display:"inline-block"},function(){if(computed){return curCSS(elem,"marginRight")}})}}}if(!CNJQ.support.pixelPosition&&CNJQ.fn.position){CNJQ.each(["top","left"],function(i,prop){CNJQ.cssHooks[prop]={get:function(elem,computed){if(computed){var ret=curCSS(elem,prop);return rnumnonpx.test(ret)?CNJQ(elem).position()[prop]+"px":ret}}}})}});if(CNJQ.expr&&CNJQ.expr.filters){CNJQ.expr.filters.hidden=function(elem){return(elem.offsetWidth===0&&elem.offsetHeight===0)||(!CNJQ.support.reliableHiddenOffsets&&((elem.style&&elem.style.display)||curCSS(elem,"display"))==="none")};CNJQ.expr.filters.visible=function(elem){return !CNJQ.expr.filters.hidden(elem)}}CNJQ.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){CNJQ.cssHooks[prefix+suffix]={expand:function(value){var i,parts=typeof value==="string"?value.split(" "):[value],expanded={};for(i=0;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0]}return expanded}};if(!rmargin.test(prefix)){CNJQ.cssHooks[prefix+suffix].set=setPositiveNumber}});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rinput=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,rselectTextarea=/^(?:select|textarea)/i;CNJQ.fn.extend({serialize:function(){return CNJQ.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?CNJQ.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||rselectTextarea.test(this.nodeName)||rinput.test(this.type))}).map(function(i,elem){var val=CNJQ(this).val();return val==null?null:CNJQ.isArray(val)?CNJQ.map(val,function(val,i){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}});CNJQ.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=CNJQ.isFunction(value)?value():(value==null?"":value);s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined){traditional=CNJQ.ajaxSettings&&CNJQ.ajaxSettings.traditional}if(CNJQ.isArray(a)||(a.CNJQ&&!CNJQ.isPlainObject(a))){CNJQ.each(a,function(){add(this.name,this.value)})}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add)}}return s.join("&").replace(r20,"+")};function buildParams(prefix,obj,traditional,add){var name;if(CNJQ.isArray(obj)){CNJQ.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v)}else{buildParams(prefix+"["+(typeof v==="object"?i:"")+"]",v,traditional,add)}})}else{if(!traditional&&CNJQ.type(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add)}}else{add(prefix,obj)}}}var ajaxLocParts,ajaxLocation,rhash=/#.*$/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,rlocalProtocol=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rquery=/\?/,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,rts=/([?&])_=[^&]*/,rurl=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,_load=CNJQ.fn.load,prefilters={},transports={},allTypes=["*/"]+["*"];try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a");ajaxLocation.href="";ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*"}var dataType,list,placeBefore,dataTypes=dataTypeExpression.toLowerCase().split(core_rspace),i=0,length=dataTypes.length;if(CNJQ.isFunction(func)){for(;i<length;i++){dataType=dataTypes[i];placeBefore=/^\+/.test(dataType);if(placeBefore){dataType=dataType.substr(1)||"*"}list=structure[dataType]=structure[dataType]||[];list[placeBefore?"unshift":"push"](func)}}}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,dataType,inspected){dataType=dataType||options.dataTypes[0];inspected=inspected||{};inspected[dataType]=true;var selection,list=structure[dataType],i=0,length=list?list.length:0,executeOnly=(structure===prefilters);for(;i<length&&(executeOnly||!selection);i++){selection=list[i](options,originalOptions,jqXHR);if(typeof selection==="string"){if(!executeOnly||inspected[selection]){selection=undefined}else{options.dataTypes.unshift(selection);selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,selection,inspected)}}}if((executeOnly||!selection)&&!inspected["*"]){selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,"*",inspected)}return selection}function ajaxExtend(target,src){var key,deep,flatOptions=CNJQ.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:(deep||(deep={})))[key]=src[key]}}if(deep){CNJQ.extend(true,target,deep)}}CNJQ.fn.load=function(url,params,callback){if(typeof url!=="string"&&_load){return _load.apply(this,arguments)}if(!this.length){return this}var selector,type,response,self=this,off=url.indexOf(" ");if(off>=0){selector=url.slice(off,url.length);url=url.slice(0,off)}if(CNJQ.isFunction(params)){callback=params;params=undefined}else{if(params&&typeof params==="object"){type="POST"}}CNJQ.ajax({url:url,type:type,dataType:"html",data:params,complete:function(jqXHR,status){if(callback){self.each(callback,response||[jqXHR.responseText,status,jqXHR])}}}).done(function(responseText){response=arguments;self.html(selector?CNJQ("<div>").append(responseText.replace(rscript,"")).find(selector):responseText)});return this};CNJQ.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(i,o){CNJQ.fn[o]=function(f){return this.on(o,f)}});CNJQ.each(["get","post"],function(i,method){CNJQ[method]=function(url,data,callback,type){if(CNJQ.isFunction(data)){type=type||callback;callback=data;data=undefined}return CNJQ.ajax({type:method,url:url,data:data,success:callback,dataType:type})}});CNJQ.extend({getScript:function(url,callback){return CNJQ.get(url,undefined,callback,"script")},getJSON:function(url,data,callback){return CNJQ.get(url,data,callback,"json")},ajaxSetup:function(target,settings){if(settings){ajaxExtend(target,CNJQ.ajaxSettings)}else{settings=target;target=CNJQ.ajaxSettings}ajaxExtend(target,settings);return target},ajaxSettings:{url:ajaxLocation,isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":allTypes},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":true,"text json":CNJQ.parseJSON,"text xml":CNJQ.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined}options=options||{};var ifModifiedKey,responseHeadersString,responseHeaders,transport,timeoutTimer,parts,fireGlobals,i,s=CNJQ.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=callbackContext!==s&&(callbackContext.nodeType||callbackContext instanceof CNJQ)?CNJQ(callbackContext):CNJQ.event,deferred=CNJQ.Deferred(),completeDeferred=CNJQ.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,setRequestHeader:function(name,value){if(!state){var lname=name.toLowerCase();name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value}return this},getAllResponseHeaders:function(){return state===2?responseHeadersString:null},getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while((match=rheaders.exec(responseHeadersString))){responseHeaders[match[1].toLowerCase()]=match[2]}}match=responseHeaders[key.toLowerCase()]}return match===undefined?null:match},overrideMimeType:function(type){if(!state){s.mimeType=type}return this},abort:function(statusText){statusText=statusText||strAbort;if(transport){transport.abort(statusText)}done(0,statusText);return this}};function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(state===2){return}state=2;if(timeoutTimer){clearTimeout(timeoutTimer)}transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;if(responses){response=ajaxHandleResponses(s,jqXHR,responses)}if(status>=200&&status<300||status===304){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified){CNJQ.lastModified[ifModifiedKey]=modified}modified=jqXHR.getResponseHeader("Etag");if(modified){CNJQ.etag[ifModifiedKey]=modified}}if(status===304){statusText="notmodified";isSuccess=true}else{isSuccess=ajaxConvert(s,response);statusText=isSuccess.state;success=isSuccess.data;error=isSuccess.error;isSuccess=!error}}else{error=statusText;if(!statusText||status){statusText="error";if(status<0){status=0}}}jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR])}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error])}jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger("ajax"+(isSuccess?"Success":"Error"),[jqXHR,s,isSuccess?success:error])}completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!(--CNJQ.active)){CNJQ.event.trigger("ajaxStop")}}}deferred.promise(jqXHR);jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;jqXHR.complete=completeDeferred.add;jqXHR.statusCode=function(map){if(map){var tmp;if(state<2){for(tmp in map){statusCode[tmp]=[statusCode[tmp],map[tmp]]}}else{tmp=map[jqXHR.status];jqXHR.always(tmp)}}return this};s.url=((url||s.url)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");s.dataTypes=CNJQ.trim(s.dataType||"*").toLowerCase().split(core_rspace);if(s.crossDomain==null){parts=rurl.exec(s.url.toLowerCase());s.crossDomain=!!(parts&&(parts[1]!==ajaxLocParts[1]||parts[2]!==ajaxLocParts[2]||(parts[3]||(parts[1]==="http:"?80:443))!=(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?80:443))))}if(s.data&&s.processData&&typeof s.data!=="string"){s.data=CNJQ.param(s.data,s.traditional)}inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2){return jqXHR}fireGlobals=s.global;s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);if(fireGlobals&&CNJQ.active++===0){CNJQ.event.trigger("ajaxStart")}if(!s.hasContent){if(s.data){s.url+=(rquery.test(s.url)?"&":"?")+s.data;delete s.data}ifModifiedKey=s.url;if(s.cache===false){var ts=CNJQ.now(),ret=s.url.replace(rts,"$1_="+ts);s.url=ret+((ret===s.url)?(rquery.test(s.url)?"&":"?")+"_="+ts:"")}}if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType)}if(s.ifModified){ifModifiedKey=ifModifiedKey||s.url;if(CNJQ.lastModified[ifModifiedKey]){jqXHR.setRequestHeader("If-Modified-Since",CNJQ.lastModified[ifModifiedKey])}if(CNJQ.etag[ifModifiedKey]){jqXHR.setRequestHeader("If-None-Match",CNJQ.etag[ifModifiedKey])}}jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i])}if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2)){return jqXHR.abort()}strAbort="abort";for(i in {success:1,error:1,complete:1}){jqXHR[i](s[i])}transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,"No Transport")}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s])}if(s.async&&s.timeout>0){timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout)}try{state=1;transport.send(requestHeaders,done)}catch(e){if(state<2){done(-1,e)}else{throw e}}}return jqXHR},active:0,lastModified:{},etag:{}});function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes,responseFields=s.responseFields;for(type in responseFields){if(type in responses){jqXHR[responseFields[type]]=responses[type]}}while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("content-type")}}if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}}}if(dataTypes[0] in responses){finalDataType=dataTypes[0]}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}if(!firstDataType){firstDataType=type}}finalDataType=finalDataType||firstDataType}if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType)}return responses[finalDataType]}}function ajaxConvert(s,response){var conv,conv2,current,tmp,dataTypes=s.dataTypes.slice(),prev=dataTypes[0],converters={},i=0;if(s.dataFilter){response=s.dataFilter(response,s.dataType)}if(dataTypes[1]){for(conv in s.converters){converters[conv.toLowerCase()]=s.converters[conv]}}for(;(current=dataTypes[++i]);){if(current!=="*"){if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv){for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true){conv=converters[conv2]}else{if(converters[conv2]!==true){current=tmp[0];dataTypes.splice(i--,0,current)}}break}}}}if(conv!==true){if(conv&&s["throws"]){response=conv(response)}else{try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}}}prev=current}}return{state:"success",data:response}}var oldCallbacks=[],rquestion=/\?/,rjsonp=/(=)\?(?=&|$)|\?\?/,nonce=CNJQ.now();CNJQ.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||(CNJQ.expando+"_"+(nonce++));this[callback]=true;return callback}});CNJQ.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,data=s.data,url=s.url,hasCallback=s.jsonp!==false,replaceInUrl=hasCallback&&rjsonp.test(url),replaceInData=hasCallback&&!replaceInUrl&&typeof data==="string"&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(data);if(s.dataTypes[0]==="jsonp"||replaceInUrl||replaceInData){callbackName=s.jsonpCallback=CNJQ.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;overwritten=window[callbackName];if(replaceInUrl){s.url=url.replace(rjsonp,"$1"+callbackName)}else{if(replaceInData){s.data=data.replace(rjsonp,"$1"+callbackName)}else{if(hasCallback){s.url+=(rquestion.test(url)?"&":"?")+s.jsonp+"="+callbackName}}}s.converters["script json"]=function(){if(!responseContainer){CNJQ.error(callbackName+" was not called")}return responseContainer[0]};s.dataTypes[0]="json";window[callbackName]=function(){responseContainer=arguments};jqXHR.always(function(){window[callbackName]=overwritten;if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName)}if(responseContainer&&CNJQ.isFunction(overwritten)){overwritten(responseContainer[0])}responseContainer=overwritten=undefined});return"script"}});CNJQ.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(text){CNJQ.globalEval(text);return text}}});CNJQ.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false}if(s.crossDomain){s.type="GET";s.global=false}});CNJQ.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(_,callback){script=document.createElement("script");script.async="async";if(s.scriptCharset){script.charset=s.scriptCharset}script.src=s.url;script.onload=script.onreadystatechange=function(_,isAbort){if(isAbort||!script.readyState||/loaded|complete/.test(script.readyState)){script.onload=script.onreadystatechange=null;if(head&&script.parentNode){head.removeChild(script)}script=undefined;if(!isAbort){callback(200,"success")}}};head.insertBefore(script,head.firstChild)},abort:function(){if(script){script.onload(0,1)}}}}});var xhrCallbacks,xhrOnUnloadAbort=window.ActiveXObject?function(){for(var key in xhrCallbacks){xhrCallbacks[key](0,1)}}:false,xhrId=0;function createStandardXHR(){try{return new window.XMLHttpRequest()}catch(e){}}function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}CNJQ.ajaxSettings.xhr=window.ActiveXObject?function(){return !this.isLocal&&createStandardXHR()||createActiveXHR()}:createStandardXHR;(function(xhr){CNJQ.extend(CNJQ.support,{ajax:!!xhr,cors:!!xhr&&("withCredentials" in xhr)})})(CNJQ.ajaxSettings.xhr());if(CNJQ.support.ajax){CNJQ.ajaxTransport(function(s){if(!s.crossDomain||CNJQ.support.cors){var callback;return{send:function(headers,complete){var handle,i,xhr=s.xhr();if(s.username){xhr.open(s.type,s.url,s.async,s.username,s.password)}else{xhr.open(s.type,s.url,s.async)}if(s.xhrFields){for(i in s.xhrFields){xhr[i]=s.xhrFields[i]}}if(s.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(s.mimeType)}if(!s.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest"}try{for(i in headers){xhr.setRequestHeader(i,headers[i])}}catch(_){}xhr.send((s.hasContent&&s.data)||null);callback=function(_,isAbort){var status,statusText,responseHeaders,responses,xml;try{if(callback&&(isAbort||xhr.readyState===4)){callback=undefined;if(handle){xhr.onreadystatechange=CNJQ.noop;if(xhrOnUnloadAbort){delete xhrCallbacks[handle]}}if(isAbort){if(xhr.readyState!==4){xhr.abort()}}else{status=xhr.status;responseHeaders=xhr.getAllResponseHeaders();responses={};xml=xhr.responseXML;if(xml&&xml.documentElement){responses.xml=xml}try{responses.text=xhr.responseText}catch(e){}try{statusText=xhr.statusText}catch(e){statusText=""}if(!status&&s.isLocal&&!s.crossDomain){status=responses.text?200:404}else{if(status===1223){status=204}}}}}catch(firefoxAccessException){if(!isAbort){complete(-1,firefoxAccessException)}}if(responses){complete(status,statusText,responses,responseHeaders)}};if(!s.async){callback()}else{if(xhr.readyState===4){setTimeout(callback,0)}else{handle=++xhrId;if(xhrOnUnloadAbort){if(!xhrCallbacks){xhrCallbacks={};CNJQ(window).unload(xhrOnUnloadAbort)}xhrCallbacks[handle]=callback}xhr.onreadystatechange=callback}}},abort:function(){if(callback){callback(0,1)}}}}})}var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([-+])=|)("+core_pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var end,unit,tween=this.createTween(prop,value),parts=rfxnum.exec(value),target=tween.cur(),start=+target||0,scale=1,maxIterations=20;if(parts){end=+parts[2];unit=parts[3]||(CNJQ.cssNumber[prop]?"":"px");if(unit!=="px"&&start){start=CNJQ.css(tween.elem,prop,true)||end||1;do{scale=scale||".5";start=start/scale;CNJQ.style(tween.elem,prop,start+unit)}while(scale!==(scale=tween.cur()/target)&&scale!==1&&--maxIterations)}tween.unit=unit;tween.start=start;tween.end=parts[1]?start+(parts[1]+1)*end:end}return tween}]};function createFxNow(){setTimeout(function(){fxNow=undefined},0);return(fxNow=CNJQ.now())}function createTweens(animation,props){CNJQ.each(props,function(prop,value){var collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;for(;index<length;index++){if(collection[index].call(animation,prop,value)){return}}})}function Animation(elem,properties,options){var result,index=0,tweenerIndex=0,length=animationPrefilters.length,deferred=CNJQ.Deferred().always(function(){delete tick.elem}),tick=function(){var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;for(;index<length;index++){animation.tweens[index].run(percent)}deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length){return remaining}else{deferred.resolveWith(elem,[animation]);return false}},animation=deferred.promise({elem:elem,props:CNJQ.extend({},properties),opts:CNJQ.extend(true,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end,easing){var tween=CNJQ.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;for(;index<length;index++){animation.tweens[index].run(1)}if(gotoEnd){deferred.resolveWith(elem,[animation,gotoEnd])}else{deferred.rejectWith(elem,[animation,gotoEnd])}return this}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=animationPrefilters[index].call(animation,elem,props,animation.opts);if(result){return result}}createTweens(animation,props);if(CNJQ.isFunction(animation.opts.start)){animation.opts.start.call(elem,animation)}CNJQ.fx.timer(CNJQ.extend(tick,{anim:animation,queue:animation.opts.queue,elem:elem}));return animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=CNJQ.camelCase(index);easing=specialEasing[name];value=props[index];if(CNJQ.isArray(value)){easing=value[1];value=props[index]=value[0]}if(index!==name){props[name]=value;delete props[index]}hooks=CNJQ.cssHooks[name];if(hooks&&"expand" in hooks){value=hooks.expand(value);delete props[name];for(index in value){if(!(index in props)){props[index]=value[index];specialEasing[index]=easing}}}else{specialEasing[name]=easing}}}CNJQ.Animation=CNJQ.extend(Animation,{tweener:function(props,callback){if(CNJQ.isFunction(props)){callback=props;props=["*"]}else{props=props.split(" ")}var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];tweeners[prop]=tweeners[prop]||[];tweeners[prop].unshift(callback)}},prefilter:function(callback,prepend){if(prepend){animationPrefilters.unshift(callback)}else{animationPrefilters.push(callback)}}});function defaultPrefilter(elem,props,opts){var index,prop,value,length,dataShow,toggle,tween,hooks,oldfire,anim=this,style=elem.style,orig={},handled=[],hidden=elem.nodeType&&isHidden(elem);if(!opts.queue){hooks=CNJQ._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued){oldfire()}}}hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!CNJQ.queue(elem,"fx").length){hooks.empty.fire()}})})}if(elem.nodeType===1&&("height" in props||"width" in props)){opts.overflow=[style.overflow,style.overflowX,style.overflowY];if(CNJQ.css(elem,"display")==="inline"&&CNJQ.css(elem,"float")==="none"){if(!CNJQ.support.inlineBlockNeedsLayout||css_defaultDisplay(elem.nodeName)==="inline"){style.display="inline-block"}else{style.zoom=1}}}if(opts.overflow){style.overflow="hidden";if(!CNJQ.support.shrinkWrapBlocks){anim.done(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2]})}}for(index in props){value=props[index];if(rfxtypes.exec(value)){delete props[index];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show")){continue}handled.push(index)}}length=handled.length;if(length){dataShow=CNJQ._data(elem,"fxshow")||CNJQ._data(elem,"fxshow",{});if("hidden" in dataShow){hidden=dataShow.hidden}if(toggle){dataShow.hidden=!hidden}if(hidden){CNJQ(elem).show()}else{anim.done(function(){CNJQ(elem).hide()})}anim.done(function(){var prop;CNJQ.removeData(elem,"fxshow",true);for(prop in orig){CNJQ.style(elem,prop,orig[prop])}});for(index=0;index<length;index++){prop=handled[index];tween=anim.createTween(prop,hidden?dataShow[prop]:0);orig[prop]=dataShow[prop]||CNJQ.style(elem,prop);if(!(prop in dataShow)){dataShow[prop]=tween.start;if(hidden){tween.end=tween.start;tween.start=prop==="width"||prop==="height"?1:0}}}}}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}CNJQ.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||"swing";this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(CNJQ.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration){this.pos=eased=CNJQ.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration)}else{this.pos=eased=percent}this.now=(this.end-this.start)*eased+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(hooks&&hooks.set){hooks.set(this)}else{Tween.propHooks._default.set(this)}return this}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem[tween.prop]!=null&&(!tween.elem.style||tween.elem.style[tween.prop]==null)){return tween.elem[tween.prop]}result=CNJQ.css(tween.elem,tween.prop,false,"");return !result||result==="auto"?0:result},set:function(tween){if(CNJQ.fx.step[tween.prop]){CNJQ.fx.step[tween.prop](tween)}else{if(tween.elem.style&&(tween.elem.style[CNJQ.cssProps[tween.prop]]!=null||CNJQ.cssHooks[tween.prop])){CNJQ.style(tween.elem,tween.prop,tween.now+tween.unit)}else{tween.elem[tween.prop]=tween.now}}}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode){tween.elem[tween.prop]=tween.now}}};CNJQ.each(["toggle","show","hide"],function(i,name){var cssFn=CNJQ.fn[name];CNJQ.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"||(!i&&CNJQ.isFunction(speed)&&CNJQ.isFunction(easing))?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback)}});CNJQ.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=CNJQ.isEmptyObject(prop),optall=CNJQ.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,CNJQ.extend({},prop),optall);if(empty){anim.stop(true)}};return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd)};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined}if(clearQueue&&type!==false){this.queue(type||"fx",[])}return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=CNJQ.timers,data=CNJQ._data(this);if(index){if(data[index]&&data[index].stop){stopQueue(data[index])}}else{for(index in data){if(data[index]&&data[index].stop&&rrun.test(index)){stopQueue(data[index])}}}for(index=timers.length;index--;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1)}}if(dequeue||!gotoEnd){CNJQ.dequeue(this,type)}})}});function genFx(type,includeWidth){var which,attrs={height:type},i=0;includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type}if(includeWidth){attrs.opacity=attrs.width=type}return attrs}CNJQ.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){CNJQ.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}});CNJQ.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?CNJQ.extend({},speed):{complete:fn||!fn&&easing||CNJQ.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!CNJQ.isFunction(easing)&&easing};opt.duration=CNJQ.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in CNJQ.fx.speeds?CNJQ.fx.speeds[opt.duration]:CNJQ.fx.speeds._default;if(opt.queue==null||opt.queue===true){opt.queue="fx"}opt.old=opt.complete;opt.complete=function(){if(CNJQ.isFunction(opt.old)){opt.old.call(this)}if(opt.queue){CNJQ.dequeue(this,opt.queue)}};return opt};CNJQ.easing={linear:function(p){return p},swing:function(p){return 0.5-Math.cos(p*Math.PI)/2}};CNJQ.timers=[];CNJQ.fx=Tween.prototype.init;CNJQ.fx.tick=function(){var timer,timers=CNJQ.timers,i=0;fxNow=CNJQ.now();for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i--,1)}}if(!timers.length){CNJQ.fx.stop()}fxNow=undefined};CNJQ.fx.timer=function(timer){if(timer()&&CNJQ.timers.push(timer)&&!timerId){timerId=setInterval(CNJQ.fx.tick,CNJQ.fx.interval)}};CNJQ.fx.interval=13;CNJQ.fx.stop=function(){clearInterval(timerId);timerId=null};CNJQ.fx.speeds={slow:600,fast:200,_default:400};CNJQ.fx.step={};if(CNJQ.expr&&CNJQ.expr.filters){CNJQ.expr.filters.animated=function(elem){return CNJQ.grep(CNJQ.timers,function(fn){return elem===fn.elem}).length}}var rroot=/^(?:body|html)$/i;CNJQ.fn.offset=function(options){if(arguments.length){return options===undefined?this:this.each(function(i){CNJQ.offset.setOffset(this,options,i)})}var docElem,body,win,clientTop,clientLeft,scrollTop,scrollLeft,box={top:0,left:0},elem=this[0],doc=elem&&elem.ownerDocument;if(!doc){return}if((body=doc.body)===elem){return CNJQ.offset.bodyOffset(elem)}docElem=doc.documentElement;if(!CNJQ.contains(docElem,elem)){return box}if(typeof elem.getBoundingClientRect!=="undefined"){box=elem.getBoundingClientRect()}win=getWindow(doc);clientTop=docElem.clientTop||body.clientTop||0;clientLeft=docElem.clientLeft||body.clientLeft||0;scrollTop=win.pageYOffset||docElem.scrollTop;scrollLeft=win.pageXOffset||docElem.scrollLeft;return{top:box.top+scrollTop-clientTop,left:box.left+scrollLeft-clientLeft}};CNJQ.offset={bodyOffset:function(body){var top=body.offsetTop,left=body.offsetLeft;if(CNJQ.support.doesNotIncludeMarginInBodyOffset){top+=parseFloat(CNJQ.css(body,"marginTop"))||0;left+=parseFloat(CNJQ.css(body,"marginLeft"))||0}return{top:top,left:left}},setOffset:function(elem,options,i){var position=CNJQ.css(elem,"position");if(position==="static"){elem.style.position="relative"}var curElem=CNJQ(elem),curOffset=curElem.offset(),curCSSTop=CNJQ.css(elem,"top"),curCSSLeft=CNJQ.css(elem,"left"),calculatePosition=(position==="absolute"||position==="fixed")&&CNJQ.inArray("auto",[curCSSTop,curCSSLeft])>-1,props={},curPosition={},curTop,curLeft;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0}if(CNJQ.isFunction(options)){options=options.call(elem,i,curOffset)}if(options.top!=null){props.top=(options.top-curOffset.top)+curTop}if(options.left!=null){props.left=(options.left-curOffset.left)+curLeft}if("using" in options){options.using.call(elem,props)}else{curElem.css(props)}}};CNJQ.fn.extend({position:function(){if(!this[0]){return}var elem=this[0],offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=rroot.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();offset.top-=parseFloat(CNJQ.css(elem,"marginTop"))||0;offset.left-=parseFloat(CNJQ.css(elem,"marginLeft"))||0;parentOffset.top+=parseFloat(CNJQ.css(offsetParent[0],"borderTopWidth"))||0;parentOffset.left+=parseFloat(CNJQ.css(offsetParent[0],"borderLeftWidth"))||0;return{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left}},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||document.body;while(offsetParent&&(!rroot.test(offsetParent.nodeName)&&CNJQ.css(offsetParent,"position")==="static")){offsetParent=offsetParent.offsetParent}return offsetParent||document.body})}});CNJQ.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);CNJQ.fn[method]=function(val){return CNJQ.access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined){return win?(prop in win)?win[prop]:win.document.documentElement[method]:elem[method]}if(win){win.scrollTo(!top?val:CNJQ(win).scrollLeft(),top?val:CNJQ(win).scrollTop())}else{elem[method]=val}},method,val,arguments.length,null)}});function getWindow(elem){return CNJQ.isWindow(elem)?elem:elem.nodeType===9?elem.defaultView||elem.parentWindow:false}CNJQ.each({Height:"height",Width:"width"},function(name,type){CNJQ.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){CNJQ.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return CNJQ.access(this,function(elem,type,value){var doc;if(CNJQ.isWindow(elem)){return elem.document.documentElement["client"+name]}if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])}return value===undefined?CNJQ.css(elem,type,value,extra):CNJQ.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})});window.CNJQ=CNJQ;if(typeof define==="function"&&define.amd&&define.amd.CNJQ){define("CNJQ",[],function(){return CNJQ})}})(window);(function(window,document,location,setTimeout,decodeURIComponent,encodeURIComponent){var global=this;var channelId=Math.floor(Math.random()*10000);var emptyFn=Function.prototype;var reURI=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/;var reParent=/[\-\w]+\/\.\.\//;var reDoubleSlash=/([^:])\/\//g;var namespace="";var easyXDM={};var _easyXDM=window.easyXDM;var IFRAME_PREFIX="easyXDM_";var HAS_NAME_PROPERTY_BUG;var useHash=false;var flashVersion;var HAS_FLASH_THROTTLED_BUG;function isHostMethod(object,property){var t=typeof object[property];return t=="function"||(!!(t=="object"&&object[property]))||t=="unknown"}function isHostObject(object,property){return !!(typeof(object[property])=="object"&&object[property])}function isArray(o){return Object.prototype.toString.call(o)==="[object Array]"}function hasFlash(){var name="Shockwave Flash",mimeType="application/x-shockwave-flash";if(!undef(navigator.plugins)&&typeof navigator.plugins[name]=="object"){var description=navigator.plugins[name].description;if(description&&!undef(navigator.mimeTypes)&&navigator.mimeTypes[mimeType]&&navigator.mimeTypes[mimeType].enabledPlugin){flashVersion=description.match(/\d+/g)}}if(!flashVersion){var flash;try{flash=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");flashVersion=Array.prototype.slice.call(flash.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1);flash=null}catch(notSupportedException){}}if(!flashVersion){return false}var major=parseInt(flashVersion[0],10),minor=parseInt(flashVersion[1],10);HAS_FLASH_THROTTLED_BUG=major>9&&minor>0;return true}var on,un;if(isHostMethod(window,"addEventListener")){on=function(target,type,listener){target.addEventListener(type,listener,false)};un=function(target,type,listener){target.removeEventListener(type,listener,false)}}else{if(isHostMethod(window,"attachEvent")){on=function(object,sEvent,fpNotify){object.attachEvent("on"+sEvent,fpNotify)};un=function(object,sEvent,fpNotify){object.detachEvent("on"+sEvent,fpNotify)}}else{throw new Error("Browser not supported")}}var domIsReady=false,domReadyQueue=[],readyState;if("readyState" in document){readyState=document.readyState;domIsReady=readyState=="complete"||(~navigator.userAgent.indexOf("AppleWebKit/")&&(readyState=="loaded"||readyState=="interactive"))}else{domIsReady=!!document.body}function dom_onReady(){if(domIsReady){return}domIsReady=true;for(var i=0;i<domReadyQueue.length;i++){domReadyQueue[i]()}domReadyQueue.length=0}if(!domIsReady){if(isHostMethod(window,"addEventListener")){on(document,"DOMContentLoaded",dom_onReady)}else{on(document,"readystatechange",function(){if(document.readyState=="complete"){dom_onReady()}});if(document.documentElement.doScroll&&window===top){var doScrollCheck=function(){if(domIsReady){return}try{document.documentElement.doScroll("left")}catch(e){setTimeout(doScrollCheck,1);return}dom_onReady()};doScrollCheck()}}on(window,"load",dom_onReady)}function whenReady(fn,scope){if(domIsReady){fn.call(scope);return}domReadyQueue.push(function(){fn.call(scope)})}function getParentObject(){var obj=parent;if(namespace!==""){for(var i=0,ii=namespace.split(".");i<ii.length;i++){obj=obj[ii[i]]}}return obj.easyXDM}function noConflict(ns){window.easyXDM=_easyXDM;namespace=ns;if(namespace){IFRAME_PREFIX="easyXDM_"+namespace.replace(".","_")+"_"}return easyXDM}function getDomainName(url){return url.match(reURI)[3]}function getPort(url){return url.match(reURI)[4]||""}function getLocation(url){var m=url.toLowerCase().match(reURI);var proto=m[2],domain=m[3],port=m[4]||"";if((proto=="http:"&&port==":80")||(proto=="https:"&&port==":443")){port=""}return proto+"//"+domain+port}function resolveUrl(url){url=url.replace(reDoubleSlash,"$1/");if(!url.match(/^(http||https):\/\//)){var path=(url.substring(0,1)==="/")?"":location.pathname;if(path.substring(path.length-1)!=="/"){path=path.substring(0,path.lastIndexOf("/")+1)}url=location.protocol+"//"+location.host+path+url}while(reParent.test(url)){url=url.replace(reParent,"")}return url}function appendQueryParameters(url,parameters){var hash="",indexOf=url.indexOf("#");if(indexOf!==-1){hash=url.substring(indexOf);url=url.substring(0,indexOf)}var q=[];for(var key in parameters){if(parameters.hasOwnProperty(key)){q.push(key+"="+encodeURIComponent(parameters[key]))}}return url+(useHash?"#":(url.indexOf("?")==-1?"?":"&"))+q.join("&")+hash}var query=(function(input){input=input.substring(1).split("&");var data={},pair,i=input.length;while(i--){pair=input[i].split("=");data[pair[0]]=decodeURIComponent(pair[1])}return data}(/xdm_e=/.test(location.search)?location.search:location.hash));function undef(v){return typeof v==="undefined"}var getJSON=function(){var cached={};var obj={a:[1,2,3]},json='{"a":[1,2,3]}';if(typeof JSON!="undefined"&&typeof JSON.stringify==="function"&&JSON.stringify(obj).replace((/\s/g),"")===json){return JSON}if(Object.toJSON){if(Object.toJSON(obj).replace((/\s/g),"")===json){cached.stringify=Object.toJSON}}if(typeof String.prototype.evalJSON==="function"){obj=json.evalJSON();if(obj.a&&obj.a.length===3&&obj.a[2]===3){cached.parse=function(str){return str.evalJSON()}}}if(cached.stringify&&cached.parse){getJSON=function(){return cached};return cached}return null};function apply(destination,source,noOverwrite){var member;for(var prop in source){if(source.hasOwnProperty(prop)){if(prop in destination){member=source[prop];if(typeof member==="object"){apply(destination[prop],member,noOverwrite)}else{if(!noOverwrite){destination[prop]=source[prop]}}}else{destination[prop]=source[prop]}}}return destination}function testForNamePropertyBug(){var form=document.body.appendChild(document.createElement("form")),input=form.appendChild(document.createElement("input"));input.name=IFRAME_PREFIX+"TEST"+channelId;HAS_NAME_PROPERTY_BUG=input!==form.elements[input.name];document.body.removeChild(form)}function createFrame(config){if(undef(HAS_NAME_PROPERTY_BUG)){testForNamePropertyBug()}var frame;if(HAS_NAME_PROPERTY_BUG){frame=document.createElement('<iframe name="'+config.props.name+'"/>')}else{frame=document.createElement("IFRAME");frame.name=config.props.name}frame.id=frame.name=frame.title=config.props.name;delete config.props.name;if(typeof config.container=="string"){config.container=document.getElementById(config.container)}if(!config.container){apply(frame.style,{position:"absolute",top:"-2000px",left:"0px"});config.container=document.body}var src=config.props.src;config.props.src="javascript:false";apply(frame,config.props);frame.border=frame.frameBorder=0;frame.allowTransparency=true;config.container.appendChild(frame);if(config.onLoad){on(frame,"load",config.onLoad)}if(config.usePost){var form=config.container.appendChild(document.createElement("form")),input;form.target=frame.name;form.action=src;form.method="POST";if(typeof(config.usePost)==="object"){for(var i in config.usePost){if(config.usePost.hasOwnProperty(i)){if(HAS_NAME_PROPERTY_BUG){input=document.createElement('<input name="'+i+'"/>')}else{input=document.createElement("INPUT");input.name=i}input.value=config.usePost[i];form.appendChild(input)}}}form.submit();form.parentNode.removeChild(form)}else{frame.src=src}config.props.src=src;return frame}function checkAcl(acl,domain){if(typeof acl=="string"){acl=[acl]}var re,i=acl.length;while(i--){re=acl[i];re=new RegExp(re.substr(0,1)=="^"?re:("^"+re.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"));if(re.test(domain)){return true}}return false}function prepareTransportStack(config){var protocol=config.protocol,stackEls;config.isHost=config.isHost||undef(query.xdm_p);useHash=config.hash||false;if(!config.props){config.props={}}if(!config.isHost){config.channel=query.xdm_c.replace(/["'<>\\]/g,"");config.secret=query.xdm_s;config.remote=query.xdm_e.replace(/["'<>\\]/g,"");protocol=query.xdm_p;if(config.acl&&!checkAcl(config.acl,config.remote)){throw new Error("Access denied for "+config.remote)}}else{config.remote=resolveUrl(config.remote);config.channel=config.channel||"default"+channelId++;config.secret=Math.random().toString(16).substring(2);if(undef(protocol)){if(getDomainName(location.href)==getDomainName(config.remote)){protocol="4"}else{if(isHostMethod(window,"postMessage")||isHostMethod(document,"postMessage")){protocol="1"}else{if(config.swf&&isHostMethod(window,"ActiveXObject")&&hasFlash()){protocol="6"}else{if(navigator.product==="Gecko"&&"frameElement" in window&&navigator.userAgent.indexOf("WebKit")==-1){protocol="5"}else{if(config.remoteHelper){protocol="2"}else{protocol="0"}}}}}}}config.protocol=protocol;switch(protocol){case"0":apply(config,{interval:100,delay:2000,useResize:true,useParent:false,usePolling:false},true);if(config.isHost){if(!config.local){var domain=location.protocol+"//"+location.host,images=document.body.getElementsByTagName("img"),image;var i=images.length;while(i--){image=images[i];if(image.src.substring(0,domain.length)===domain){config.local=image.src;break}}if(!config.local){config.local=window}}var parameters={xdm_c:config.channel,xdm_p:0};if(config.local===window){config.usePolling=true;config.useParent=true;config.local=location.protocol+"//"+location.host+location.pathname+location.search;parameters.xdm_e=config.local;parameters.xdm_pa=1}else{parameters.xdm_e=resolveUrl(config.local)}if(config.container){config.useResize=false;parameters.xdm_po=1}config.remote=appendQueryParameters(config.remote,parameters)}else{apply(config,{useParent:!undef(query.xdm_pa),usePolling:!undef(query.xdm_po),useResize:config.useParent?false:config.useResize})}stackEls=[new easyXDM.stack.HashTransport(config),new easyXDM.stack.ReliableBehavior({}),new easyXDM.stack.QueueBehavior({encode:true,maxLength:4000-config.remote.length}),new easyXDM.stack.VerifyBehavior({initiate:config.isHost})];break;case"1":stackEls=[new easyXDM.stack.PostMessageTransport(config)];break;case"2":if(config.isHost){config.remoteHelper=resolveUrl(config.remoteHelper)}stackEls=[new easyXDM.stack.NameTransport(config),new easyXDM.stack.QueueBehavior(),new easyXDM.stack.VerifyBehavior({initiate:config.isHost})];break;case"3":stackEls=[new easyXDM.stack.NixTransport(config)];break;case"4":stackEls=[new easyXDM.stack.SameOriginTransport(config)];break;case"5":stackEls=[new easyXDM.stack.FrameElementTransport(config)];break;case"6":if(!flashVersion){hasFlash()}stackEls=[new easyXDM.stack.FlashTransport(config)];break}stackEls.push(new easyXDM.stack.QueueBehavior({lazy:config.lazy,remove:true}));return stackEls}function chainStack(stackElements){var stackEl,defaults={incoming:function(message,origin){this.up.incoming(message,origin)},outgoing:function(message,recipient){this.down.outgoing(message,recipient)},callback:function(success){this.up.callback(success)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}};for(var i=0,len=stackElements.length;i<len;i++){stackEl=stackElements[i];apply(stackEl,defaults,true);if(i!==0){stackEl.down=stackElements[i-1]}if(i!==len-1){stackEl.up=stackElements[i+1]}}return stackEl}function removeFromStack(element){element.up.down=element.down;element.down.up=element.up;element.up=element.down=null}apply(easyXDM,{version:"2.4.20.7",query:query,stack:{},apply:apply,getJSONObject:getJSON,whenReady:whenReady,noConflict:noConflict});easyXDM.DomHelper={on:on,un:un,requiresJSON:function(path){if(!isHostObject(window,"JSON")){document.write('<script type="text/javascript" src="'+path+'"><\/script>')}}};(function(){var _map={};easyXDM.Fn={set:function(name,fn){_map[name]=fn},get:function(name,del){if(!_map.hasOwnProperty(name)){return}var fn=_map[name];if(del){delete _map[name]}return fn}}}());easyXDM.Socket=function(config){var stack=chainStack(prepareTransportStack(config).concat([{incoming:function(message,origin){config.onMessage(message,origin)},callback:function(success){if(config.onReady){config.onReady(success)}}}])),recipient=getLocation(config.remote);this.origin=getLocation(config.remote);this.destroy=function(){stack.destroy()};this.postMessage=function(message){stack.outgoing(message,recipient)};stack.init()};easyXDM.Rpc=function(config,jsonRpcConfig){if(jsonRpcConfig.local){for(var method in jsonRpcConfig.local){if(jsonRpcConfig.local.hasOwnProperty(method)){var member=jsonRpcConfig.local[method];if(typeof member==="function"){jsonRpcConfig.local[method]={method:member}}}}}var stack=chainStack(prepareTransportStack(config).concat([new easyXDM.stack.RpcBehavior(this,jsonRpcConfig),{callback:function(success){if(config.onReady){config.onReady(success)}}}]));this.origin=getLocation(config.remote);this.destroy=function(){stack.destroy()};stack.init()};easyXDM.stack.SameOriginTransport=function(config){var pub,frame,send,targetOrigin;return(pub={outgoing:function(message,domain,fn){send(message);if(fn){fn()}},destroy:function(){if(frame){frame.parentNode.removeChild(frame);frame=null}},onDOMReady:function(){targetOrigin=getLocation(config.remote);if(config.isHost){apply(config.props,{src:appendQueryParameters(config.remote,{xdm_e:location.protocol+"//"+location.host+location.pathname,xdm_c:config.channel,xdm_p:4}),name:IFRAME_PREFIX+config.channel+"_provider"});frame=createFrame(config);easyXDM.Fn.set(config.channel,function(sendFn){send=sendFn;setTimeout(function(){pub.up.callback(true)},0);return function(msg){pub.up.incoming(msg,targetOrigin)}})}else{send=getParentObject().Fn.get(config.channel,true)(function(msg){pub.up.incoming(msg,targetOrigin)});setTimeout(function(){pub.up.callback(true)},0)}},init:function(){whenReady(pub.onDOMReady,pub)}})};easyXDM.stack.FlashTransport=function(config){var pub,frame,send,targetOrigin,swf,swfContainer;function onMessage(message,origin){setTimeout(function(){pub.up.incoming(message,targetOrigin)},0)}function addSwf(domain){var url=config.swf+"?host="+config.isHost;var id="easyXDM_swf_"+Math.floor(Math.random()*10000);easyXDM.Fn.set("flash_loaded"+domain.replace(/[\-.]/g,"_"),function(){easyXDM.stack.FlashTransport[domain].swf=swf=swfContainer.firstChild;var queue=easyXDM.stack.FlashTransport[domain].queue;for(var i=0;i<queue.length;i++){queue[i]()}queue.length=0});if(config.swfContainer){swfContainer=(typeof config.swfContainer=="string")?document.getElementById(config.swfContainer):config.swfContainer}else{swfContainer=document.createElement("div");apply(swfContainer.style,HAS_FLASH_THROTTLED_BUG&&config.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0});document.body.appendChild(swfContainer)}var flashVars="callback=flash_loaded"+encodeURIComponent(domain.replace(/[\-.]/g,"_"))+"&proto="+global.location.protocol+"&domain="+encodeURIComponent(getDomainName(global.location.href))+"&port="+encodeURIComponent(getPort(global.location.href))+"&ns="+encodeURIComponent(namespace);swfContainer.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+id+"' data='"+url+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+url+"'></param><param name='flashvars' value='"+flashVars+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+flashVars+"' allowScriptAccess='always' wmode='transparent' src='"+url+"' height='1' width='1'></embed></object>"}return(pub={outgoing:function(message,domain,fn){swf.postMessage(config.channel,message.toString());if(fn){fn()}},destroy:function(){try{swf.destroyChannel(config.channel)}catch(e){}swf=null;if(frame){frame.parentNode.removeChild(frame);frame=null}},onDOMReady:function(){targetOrigin=config.remote;easyXDM.Fn.set("flash_"+config.channel+"_init",function(){setTimeout(function(){pub.up.callback(true)})});easyXDM.Fn.set("flash_"+config.channel+"_onMessage",onMessage);config.swf=resolveUrl(config.swf);var swfdomain=getDomainName(config.swf);var fn=function(){easyXDM.stack.FlashTransport[swfdomain].init=true;swf=easyXDM.stack.FlashTransport[swfdomain].swf;swf.createChannel(config.channel,config.secret,getLocation(config.remote),config.isHost);if(config.isHost){if(HAS_FLASH_THROTTLED_BUG&&config.swfNoThrottle){apply(config.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"})}apply(config.props,{src:appendQueryParameters(config.remote,{xdm_e:getLocation(location.href),xdm_c:config.channel,xdm_p:6,xdm_s:config.secret}),name:IFRAME_PREFIX+config.channel+"_provider"});frame=createFrame(config)}};if(easyXDM.stack.FlashTransport[swfdomain]&&easyXDM.stack.FlashTransport[swfdomain].init){fn()}else{if(!easyXDM.stack.FlashTransport[swfdomain]){easyXDM.stack.FlashTransport[swfdomain]={queue:[fn]};addSwf(swfdomain)}else{easyXDM.stack.FlashTransport[swfdomain].queue.push(fn)}}},init:function(){whenReady(pub.onDOMReady,pub)}})};easyXDM.stack.PostMessageTransport=function(config){var pub,frame,callerWindow,targetOrigin;function _getOrigin(event){if(event.origin){return getLocation(event.origin)}if(event.uri){return getLocation(event.uri)}if(event.domain){return location.protocol+"//"+event.domain}throw"Unable to retrieve the origin of the event"}function _window_onMessage(event){if(typeof event.data!=="string"){return}var origin=_getOrigin(event);if(origin==targetOrigin&&event.data.substring(0,config.channel.length+1)==config.channel+" "){pub.up.incoming(event.data.substring(config.channel.length+1),origin)}}function _window_waitForReady(event){if(event.data==config.channel+"-ready"){callerWindow=("postMessage" in frame.contentWindow)?frame.contentWindow:frame.contentWindow.document;un(window,"message",_window_waitForReady);on(window,"message",_window_onMessage);setTimeout(function(){pub.up.callback(true)},0)}}return(pub={outgoing:function(message,domain,fn){callerWindow.postMessage(config.channel+" "+message,domain||targetOrigin);if(fn){fn()}},destroy:function(){un(window,"message",_window_waitForReady);un(window,"message",_window_onMessage);if(frame){callerWindow=null;frame.parentNode.removeChild(frame);frame=null}},onDOMReady:function(){targetOrigin=getLocation(config.remote);if(config.isHost){on(window,"message",_window_waitForReady);apply(config.props,{src:appendQueryParameters(config.remote,{xdm_e:getLocation(location.href),xdm_c:config.channel,xdm_p:1}),name:IFRAME_PREFIX+config.channel+"_provider"});frame=createFrame(config)}else{on(window,"message",_window_onMessage);callerWindow=("postMessage" in window.parent)?window.parent:window.parent.document;callerWindow.postMessage(config.channel+"-ready",targetOrigin);setTimeout(function(){pub.up.callback(true)},0)}},init:function(){whenReady(pub.onDOMReady,pub)}})};easyXDM.stack.FrameElementTransport=function(config){var pub,frame,send,targetOrigin;return(pub={outgoing:function(message,domain,fn){send.call(this,message);if(fn){fn()}},destroy:function(){if(frame){frame.parentNode.removeChild(frame);frame=null}},onDOMReady:function(){targetOrigin=getLocation(config.remote);if(config.isHost){apply(config.props,{src:appendQueryParameters(config.remote,{xdm_e:getLocation(location.href),xdm_c:config.channel,xdm_p:5}),name:IFRAME_PREFIX+config.channel+"_provider"});frame=createFrame(config);frame.fn=function(sendFn){delete frame.fn;send=sendFn;setTimeout(function(){pub.up.callback(true)},0);return function(msg){pub.up.incoming(msg,targetOrigin)}}}else{if(document.referrer&&getLocation(document.referrer)!=query.xdm_e){window.top.location=query.xdm_e}send=window.frameElement.fn(function(msg){pub.up.incoming(msg,targetOrigin)});pub.up.callback(true)}},init:function(){whenReady(pub.onDOMReady,pub)}})};easyXDM.stack.NameTransport=function(config){var pub;var isHost,callerWindow,remoteWindow,readyCount,callback,remoteOrigin,remoteUrl;function _sendMessage(message){var url=config.remoteHelper+(isHost?"#_3":"#_2")+config.channel;callerWindow.contentWindow.sendMessage(message,url)}function _onReady(){if(isHost){if(++readyCount===2||!isHost){pub.up.callback(true)}}else{_sendMessage("ready");pub.up.callback(true)}}function _onMessage(message){pub.up.incoming(message,remoteOrigin)}function _onLoad(){if(callback){setTimeout(function(){callback(true)},0)}}return(pub={outgoing:function(message,domain,fn){callback=fn;_sendMessage(message)},destroy:function(){callerWindow.parentNode.removeChild(callerWindow);callerWindow=null;if(isHost){remoteWindow.parentNode.removeChild(remoteWindow);remoteWindow=null}},onDOMReady:function(){isHost=config.isHost;readyCount=0;remoteOrigin=getLocation(config.remote);config.local=resolveUrl(config.local);if(isHost){easyXDM.Fn.set(config.channel,function(message){if(isHost&&message==="ready"){easyXDM.Fn.set(config.channel,_onMessage);_onReady()}});remoteUrl=appendQueryParameters(config.remote,{xdm_e:config.local,xdm_c:config.channel,xdm_p:2});apply(config.props,{src:remoteUrl+"#"+config.channel,name:IFRAME_PREFIX+config.channel+"_provider"});remoteWindow=createFrame(config)}else{config.remoteHelper=config.remote;easyXDM.Fn.set(config.channel,_onMessage)}var onLoad=function(){var w=callerWindow||this;un(w,"load",onLoad);easyXDM.Fn.set(config.channel+"_load",_onLoad);(function test(){if(typeof w.contentWindow.sendMessage=="function"){_onReady()}else{setTimeout(test,50)}}())};callerWindow=createFrame({props:{src:config.local+"#_4"+config.channel},onLoad:onLoad})},init:function(){whenReady(pub.onDOMReady,pub)}})};easyXDM.stack.HashTransport=function(config){var pub;var me=this,isHost,_timer,pollInterval,_lastMsg,_msgNr,_listenerWindow,_callerWindow;var useParent,_remoteOrigin;function _sendMessage(message){if(!_callerWindow){return}var url=config.remote+"#"+(_msgNr++)+"_"+message;((isHost||!useParent)?_callerWindow.contentWindow:_callerWindow).location=url}function _handleHash(hash){_lastMsg=hash;pub.up.incoming(_lastMsg.substring(_lastMsg.indexOf("_")+1),_remoteOrigin)}function _pollHash(){if(!_listenerWindow){return}var href=_listenerWindow.location.href,hash="",indexOf=href.indexOf("#");if(indexOf!=-1){hash=href.substring(indexOf)}if(hash&&hash!=_lastMsg){_handleHash(hash)}}function _attachListeners(){_timer=setInterval(_pollHash,pollInterval)}return(pub={outgoing:function(message,domain){_sendMessage(message)},destroy:function(){window.clearInterval(_timer);if(isHost||!useParent){_callerWindow.parentNode.removeChild(_callerWindow)}_callerWindow=null},onDOMReady:function(){isHost=config.isHost;pollInterval=config.interval;_lastMsg="#"+config.channel;_msgNr=0;useParent=config.useParent;_remoteOrigin=getLocation(config.remote);if(isHost){apply(config.props,{src:config.remote,name:IFRAME_PREFIX+config.channel+"_provider"});if(useParent){config.onLoad=function(){_listenerWindow=window;_attachListeners();pub.up.callback(true)}}else{var tries=0,max=config.delay/50;(function getRef(){if(++tries>max){throw new Error("Unable to reference listenerwindow")}try{_listenerWindow=_callerWindow.contentWindow.frames[IFRAME_PREFIX+config.channel+"_consumer"]}catch(ex){}if(_listenerWindow){_attachListeners();pub.up.callback(true)}else{setTimeout(getRef,50)}}())}_callerWindow=createFrame(config)}else{_listenerWindow=window;_attachListeners();if(useParent){_callerWindow=parent;pub.up.callback(true)}else{apply(config,{props:{src:config.remote+"#"+config.channel+new Date(),name:IFRAME_PREFIX+config.channel+"_consumer"},onLoad:function(){pub.up.callback(true)}});_callerWindow=createFrame(config)}}},init:function(){whenReady(pub.onDOMReady,pub)}})};easyXDM.stack.ReliableBehavior=function(config){var pub,callback;var idOut=0,idIn=0,currentMessage="";return(pub={incoming:function(message,origin){var indexOf=message.indexOf("_"),ack=message.substring(0,indexOf).split(",");message=message.substring(indexOf+1);if(ack[0]==idOut){currentMessage="";if(callback){callback(true)}}if(message.length>0){pub.down.outgoing(ack[1]+","+idOut+"_"+currentMessage,origin);if(idIn!=ack[1]){idIn=ack[1];pub.up.incoming(message,origin)}}},outgoing:function(message,origin,fn){currentMessage=message;callback=fn;pub.down.outgoing(idIn+","+(++idOut)+"_"+message,origin)}})};easyXDM.stack.QueueBehavior=function(config){var pub,queue=[],waiting=true,incoming="",destroying,maxLength=0,lazy=false,doFragment=false;function dispatch(){if(config.remove&&queue.length===0){removeFromStack(pub);return}if(waiting||queue.length===0||destroying){return}waiting=true;var message=queue.shift();pub.down.outgoing(message.data,message.origin,function(success){waiting=false;if(message.callback){setTimeout(function(){message.callback(success)},0)}dispatch()})}return(pub={init:function(){if(undef(config)){config={}}if(config.maxLength){maxLength=config.maxLength;doFragment=true}if(config.lazy){lazy=true}else{pub.down.init()}},callback:function(success){waiting=false;var up=pub.up;dispatch();up.callback(success)},incoming:function(message,origin){if(doFragment){var indexOf=message.indexOf("_"),seq=parseInt(message.substring(0,indexOf),10);incoming+=message.substring(indexOf+1);if(seq===0){if(config.encode){incoming=decodeURIComponent(incoming)}pub.up.incoming(incoming,origin);incoming=""}}else{pub.up.incoming(message,origin)}},outgoing:function(message,origin,fn){if(config.encode){message=encodeURIComponent(message)}var fragments=[],fragment;if(doFragment){while(message.length!==0){fragment=message.substring(0,maxLength);message=message.substring(fragment.length);fragments.push(fragment)}while((fragment=fragments.shift())){queue.push({data:fragments.length+"_"+fragment,origin:origin,callback:fragments.length===0?fn:null})}}else{queue.push({data:message,origin:origin,callback:fn})}if(lazy){pub.down.init()}else{dispatch()}},destroy:function(){destroying=true;pub.down.destroy()}})};easyXDM.stack.VerifyBehavior=function(config){var pub,mySecret,theirSecret,verified=false;function startVerification(){mySecret=Math.random().toString(16).substring(2);pub.down.outgoing(mySecret)}return(pub={incoming:function(message,origin){var indexOf=message.indexOf("_");if(indexOf===-1){if(message===mySecret){pub.up.callback(true)}else{if(!theirSecret){theirSecret=message;if(!config.initiate){startVerification()}pub.down.outgoing(message)}}}else{if(message.substring(0,indexOf)===theirSecret){pub.up.incoming(message.substring(indexOf+1),origin)}}},outgoing:function(message,origin,fn){pub.down.outgoing(mySecret+"_"+message,origin,fn)},callback:function(success){if(config.initiate){startVerification()}}})};easyXDM.stack.RpcBehavior=function(proxy,config){var pub,serializer=config.serializer||getJSON();var _callbackCounter=0,_callbacks={};function _send(data){data.jsonrpc="2.0";pub.down.outgoing(serializer.stringify(data))}function _createMethod(definition,method){var slice=Array.prototype.slice;return function(){var l=arguments.length,callback,message={method:method};if(l>0&&typeof arguments[l-1]==="function"){if(l>1&&typeof arguments[l-2]==="function"){callback={success:arguments[l-2],error:arguments[l-1]};message.params=slice.call(arguments,0,l-2)}else{callback={success:arguments[l-1]};message.params=slice.call(arguments,0,l-1)}_callbacks[""+(++_callbackCounter)]=callback;message.id=_callbackCounter}else{message.params=slice.call(arguments,0)}if(definition.namedParams&&message.params.length===1){message.params=message.params[0]}_send(message)}}function _executeMethod(method,id,fn,params){if(!fn){if(id){_send({id:id,error:{code:-32601,message:"Procedure not found."}})}return}var success,error;if(id){success=function(result){success=emptyFn;_send({id:id,result:result})};error=function(message,data){error=emptyFn;var msg={id:id,error:{code:-32099,message:message}};if(data){msg.error.data=data}_send(msg)}}else{success=error=emptyFn}if(!isArray(params)){params=[params]}try{var result=fn.method.apply(fn.scope,params.concat([success,error]));if(!undef(result)){success(result)}}catch(ex1){error(ex1.message)}}return(pub={incoming:function(message,origin){var data=serializer.parse(message);if(data.method){if(config.handle){config.handle(data,_send)}else{_executeMethod(data.method,data.id,config.local[data.method],data.params)}}else{var callback=_callbacks[data.id];if(data.error){if(callback.error){callback.error(data.error)}}else{if(callback.success){callback.success(data.result)}}delete _callbacks[data.id]}},init:function(){if(config.remote){for(var method in config.remote){if(config.remote.hasOwnProperty(method)){proxy[method]=_createMethod(config.remote[method],method)}}}pub.down.init()},destroy:function(){for(var method in config.remote){if(config.remote.hasOwnProperty(method)&&proxy.hasOwnProperty(method)){delete proxy[method]}}pub.down.destroy()}})};global.easyXDM=easyXDM})(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent);var cnChatClient=null;function CNPCImpl(){}if(!String.prototype.startsWith){String.prototype.startsWith=function(search,pos){return this.substr(!pos||pos<0?0:+pos,search.length)===search}}CNPCImpl.prototype={options:{},animations:{"#cndepts":{ani:["cn-fadeInUpBig","cn-fadeOutDownBig"]},"#cngpdls":{ani:["cn-fadeInUpBig","cn-fadeOutDownBig"]},"#cnpoke":{ani:["cn-fadeInUpBig","cn-fadeOutRightBig"]},".cn-offers-list":{ani:["cn-fadeInUpBig","cn-fadeOutDownBig"]},"#cncb11_sms_form":{ani:["cn-fadeInUpBig","cn-fadeOutDownBig"],onHide:"clearContactForm"},"#cn_sms_contact_c":{ani:["cn-fadeIn","cn-fadeOut"],onHide:"clearContactForm"}},gaFriendlyNameMapping:{"#cndepts":"Department Selector","#cngpdls":"Group Dealer Selector","#cnpoke":"Poke",".cn-offers-list":"Specials Scroller","#cncb11_sms_form":"Full Bottom Bar SMS Form","#cn_sms_contact_c":"Click to Text Contact Form"},buynow:{cart:{deals:[]}},additionalChatParams:{},contact:{},extListeners:[],offerListContainer:".cn-offers-list",tempvin:"",isBNLaunch:false,init:function(options){var cookiesAllowed=false;try{this.options=options;document.cookie=options.cookiePrefix+"_cnpc_p=1.0; expires="+new Date(new Date().getTime()+2000*30*60000).toGMTString()+"; path=/";if(this.getCookie("_cnpc_p")){cookiesAllowed=true}else{cookiesAllowed=false}}catch(ex){}if(!cookiesAllowed){console.log("%c*** CN buttons are not available - PLEASE ENABLE COOKIES TO SEE THEM.","color: #0000DD; font-size: 1.2em; font-weight: bold;");return}if(options.partnerParams){this.customChatContainerId=options.partnerParams.customChatContainerId;this.departmentId=options.partnerParams.departmentId;this.partnerKey=options.partnerParams.partnerKey;this.additionalChatParams.pt=options.partnerParams.pt;this.contact=options.partnerParams.contact}var me=this;this.options=options;this.settings=options.settings||{};beforeCNPluginLoad();this.visitorId=(this.getCookie("_cn_vid")?this.getCookie("_cn_vid"):(CNPC.visitorId?CNPC.visitorId:""));if(this.options.debugOn){this.logLevel=0}else{this.logLevel=3}me.dealerAccessKeys=options.settings.access_keys;var accessParams=me.getDealerAccessParams();Object.keys(accessParams).forEach(function(key){if(accessParams[key]){me.additionalChatParams[key]=accessParams[key]}});var aParams=me.hashToParams(accessParams);try{if(DDC.dataLayer.user.userPostalCode){this.additionalChatParams.cczip=DDC.dataLayer.user.userPostalCode;this.userZipCode=this.additionalChatParams.cczip}}catch(e){}var params=CarNowPlugin.getParameters();Object.keys(params).forEach(function(key){if(key.startsWith("cn_")&&params[key]){var val=params[key];key=key.substring(3);if(key=="dept"){CNPC.setDepartment(val)}else{CNPC.additionalChatParams[key]=val}}});if(params&&params.cn=="launch"){CNPC.launchImmediate=true}var questionnaireConfig=options.settings.questionnaire||{};try{if(questionnaireConfig.link){if(me.questionnaire==null){var qtnId=null;if(questionnaireConfig.hero&&CNJQ("#cn_questionnaire").length>0){qtnId="cn_qtn_"+new Date().getTime();CNJQ(questionnaireConfig.selector).prepend('<div class="cn-www-qtn-hero"></div>');if(questionnaireConfig.image){CNJQ(".cn-www-qtn-hero").append('<div class="cn-hero-image" style="background-image:url('+questionnaireConfig.image+');"></div>')}CNJQ(".cn-www-qtn-hero").append('<div class="cn-qtn-container" id="'+qtnId+'"></div>')}else{if(questionnaireConfig.append&&CNJQ(questionnaireConfig.selector).length>0){qtnId="cn_qtn_"+new Date().getTime();CNJQ(questionnaireConfig.selector).append('<div id="cn_questionnaire_appended" style="position:absolute;top:0;bottom:0;left:0;right:0;"></div>');questionnaireConfig.selector="#cn_questionnaire_appended";me.noChatMode=true;var qtnId="cn_qtn_"+new Date().getTime();if(CNJQ(questionnaireConfig.selector).attr("id")){qtnId=CNJQ(questionnaireConfig.selector).attr("id")}else{CNJQ(questionnaireConfig.selector).attr("id",qtnId)}CNJQ("#"+qtnId).addClass("cn-questionnaire")}}if(qtnId){me.questionnaire=new easyXDM.Socket({remote:questionnaireConfig.link+"&vstid="+me.visitorId,container:qtnId,props:{style:{width:"100%",height:"100%"}},onMessage:function(message,origin){var json={type:"unknown"};try{json=JSON.parse(message);if(json.type=="qtn_close"){CNPC.questionnaire.destroy();CNPC.questionnaire=null;CNJQ("#"+qtnId).remove()}else{if(json.type=="go_to_url"){location.href=json.url}}}catch(e){this.logError("easyXDM.onMessage",e.message,json,e,true)}}});setTimeout(function(){me.loadWidgets(options,aParams)},200)}else{this.loadWidgets(options,aParams)}}else{this.loadWidgets(options,aParams)}}else{this.loadWidgets(options,aParams)}}catch(e){this.loadWidgets(options,aParams)}if(this.settings.location_service_enabled&&this.settings.location_service_forced){this.getNavigatorLocation()}if(options.settings.gaEnabled&&typeof(window[options.settings.gaFuncName])=="function"){this.gaEnabled=true;if(options.settings.gaSiteId!=null){var gaFuncCall=window[this.options.settings.gaFuncName];var clientId;gaFuncCall(function(tracker){clientId=tracker.get("clientId")});gaFuncCall("create",options.settings.gaSiteId,"auto","cnGATracker");this.gaTracker=true}}else{if(options.settings.gtmEnabled&&typeof(window[options.settings.gaFuncName])=="function"){this.gtmEnabled=true}else{this.log("!!! [CN] Google Analytics is not enabled. No tracking information will be available. Please contact CarNow Support to enabled it!!!",null,3)}}},getWidgetClass:function(selector){return(selector?".":"")+"cn-www-widget"+this.pluginVersion},loadWidgets:function(options,aParams){var me=this;var url=me.options.baseUrl+me.options.orgBaseUrl+"/widgets?id="+me.options.orgId+"&vstid="+this.visitorId+aParams;if(this.userZipCode){url+="&zip="+this.userZipCode}if(CarNowPlugin.getParameters()["__reset"]=="1"){url+="&reset=1";var rUrl=window.location.href.replace("__reset=1","");if(history){history.pushState({cnReset:2},document.title,rUrl)}}CNJQ.ajax({url:url,type:"GET",success:function(data){me.pluginVersion=data.version;me.inSession=data.in_session;me.defaultDepartmentId=data.department.default_dept;me.visitorId=data.visitor_id;me.csrfToken=data.token,me.mobile=data.mobile;me.mobileLite=data.lite;me.group=data.group.org;me.stickyButtons=true;me.paramMappings=data.param_mappings;me.isUnlocked=data.is_unlocked;me.PERQDataKey=data.perq_data_key;me.agents=data.agents;me.mutationObserverEnabled=data.mutation;me.smsNativeAppHref=data.sms_href;me.dynamicDealerDetect=data.dyn_detect;me.cnContainer=data.container;me.setCookie("_cn_vid",data.visitor_id);me.clientConfig=data.client_config;me.isChatRequestLite=data.is_cr_lite;me.customHooks=data.container.hooks;me.no_sms=data.no_sms;me.isGroupDealerWChat=data.group_with_chat_enabled;var reintWithGroupDealer=false;if(!me.srpInventoryView){if(me.group&&data.group.key&&(me.options.orgId!=data.group.id)&&!me.dynamicDealerDetect){if(data.group.org){reintWithGroupDealer=true;var dlOptions=options;dlOptions.orgId=data.group.id;dlOptions.settings=data.group.settings;me.options.cookiePrefix=data.group.id;me.init(dlOptions)}}}if(!reintWithGroupDealer){for(var i=0;i<data.css_urls.length;i++){me.loadCSS(data.css_urls[i])}for(var i=0;i<data.js_urls.length;i++){var onLoadCallback=null;if(data.js_urls[i].indexOf("apple")>=0){onLoadCallback=function(){window.appleBusinessChat.refresh();if(window.appleBusinessChat.isSupported()){CNJQ(".cn-b13-abc-container").show()}}}me.loadJS(data.js_urls[i],onLoadCallback)}me.abc=data.abc;if(!me.inSession||me.stickyButtons||me.group){for(var i=0;i<data.buttons.length;i++){var b=data.buttons[i];if(me.inSession&&b.id!="cncb13"){continue}if(b.inline){CNJQ(b.inline_css).append('<div class="'+CNPC.getWidgetClass()+' cn-wid-cont cn-wid-buttons">'+b.html+"</div>")}else{CNJQ("body").append('<div class="'+CNPC.getWidgetClass()+' cn-wid-cont cn-wid-buttons">'+b.html+"</div>")}var btn=CNJQ("#"+b.id);btn.addClass("cn-animated");btn.addClass(b.show);btn.show();btn.attr("rel","nofollow")}if(window.appleBusinessChat&&window.appleBusinessChat.isSupported()){CNJQ(".cn-b13-abc-container").show()}if(data.abc&&CNJQ(".cn-b13-abc-container").length>0){CNJQ(".cn-b13-abc-container").attr("data-apple-business-id",data.abc.biz_id);if(data.abc.intent){CNJQ(".cn-b13-abc-container").attr("data-apple-business-intent-id",data.abc.intent)}if(data.abc.group){CNJQ(".cn-b13-abc-container").attr("data-apple-business-group-id",data.abc.group)}if(data.abc.cta){CNJQ(".cn-b13-abc-container").attr("data-apple-banner-cta",data.abc.cta)}if(data.abc.context){CNJQ(".cn-b13-abc-container").attr("data-apple-banner-context",data.abc.context)}if(demoAbcContextIntent){CNJQ(".cn-b13-abc-container").attr("data-apple-business-intent-id",demoAbcContextIntent)}if(demoAbcContextGroup){CNJQ(".cn-b13-abc-container").attr("data-apple-business-group-id",demoAbcContextGroup)}if(demoAbcContextBody){CNJQ(".cn-b13-abc-container").attr("data-apple-business-body",demoAbcContextBody)}}}setTimeout(function(){CNJQ(".cn-b13-animated").removeClass("cn-b13-animated")},1000);me.buynowConfig=data.buynow;me.setupBuyNow();me.protectnowConfig=data.protectnow;me.setupProtectNow();me.addContainer();if(data.buynow.cart.html){CNJQ("body").append('<div class="'+CNPC.getWidgetClass()+' cn-wid-cont cn-wid-cart">'+data.buynow.cart.html+"</div>")}if(data.offers.count>0){me.offers={count:data.offers.count};CNJQ("#cnb11_offer_list").html(data.offers.html)}if(!me.inSession&&data.department.html&&!me.isChatRequestLite){CNJQ("body").append('<div class="'+CNPC.getWidgetClass()+' cn-wid-cont cn-wid-departments">'+data.department.html+"</div>")}if(me.launchImmediate){setTimeout(function(){me.launchChatInternal(me.options.settings.access_key,null,{},{})},500)}if(data.buynow.cart.vin){me.buynow.cart={vin:data.buynow.cart.vin,deals:data.buynow.cart.deals};CNJQ(".cn-b13-buynow").removeClass("cn-b13-hide")}if(data.buynow.cart.vin&&!me.stickyButtons&&!me.group){me.showWishlistButton()}else{if(me.inSession&&!me.group&&!me.isEmbedded&&!me.launchImmediate){setTimeout(function(){me.launchChatInternal(me.options.settings.access_key,null,{},{fromInit:true});if(me.mobile){CNJQ(".cn-chat-container").addClass("cn-minimized")}},1000)}}if(data.buynow.cart.wishlist){me.setupBNWishlist(data.buynow.cart.wishlist.html)}if(me.inSession){CNJQ(".cn-b13-container").show()}if(!data.buynow.enabled){CNJQ(".cn-buy-now, .cn-bn-action, [class*='cn-buynow-']").remove()}var pageTitle=document.title;var pageDesc=CNJQ("meta[name='description']").attr;var trackingData=me.extractPageInfo();trackingData.referrer=document.referrer;var oRef=me.getCookie("_cn_oref")?me.getCookie("_cn_oref"):(document.referrer?document.referrer:"");trackingData["orig-ref"]=oRef;if(CNJQ(".cn-buy-now, .cn-bn-action").length>0){trackingData.bn=CNJQ(".cn-buy-now, .cn-bn-action").length}trackingData.stage="INIT";me.track(trackingData);if(oRef!=""){me.setCookie("_cn_oref",oRef)}setTimeout(function(){me.loadVisitorInfo()},1500);CNJQ(".cn-enter-pressed").on("keyup",function(e){if(e.keyCode==13){var m=CNJQ(this).val();CNPC.launch(this,{q:m},{});CNJQ(this).val("")}});CNJQ("#cn-chat-question-form").on("submit",function(e){e.preventDefault();var formFields=CNJQ(this).serializeArray();var formParams={};for(var i=0;i<formFields.length;i++){var field=formFields[i];formParams[field.name]=field.value}CNPC.launch(this,formParams,{});CNJQ(this).trigger("reset")});var chatContainer=document.createElement("div");chatContainer.id="cn_chat_container";chatContainer.style.display="none";document.getElementsByTagName("body")[0].appendChild(chatContainer);if(me.options.settings.chat_icon_align_left){CNJQ("#cn_chat_container").addClass("cn-chat-container--left")}_sendCustomAnalyticEvent({chatProvider:me.settings.server=="production"?"CarNow":"CarNow Dev",events:"chatImpression"});if(data.searchnow.enabled&&CNJQ(".cn-srp-frame").length>0){if(data.searchnow.ui=="v4"){CNJQ(".cn-srp-frame").remove();if(data.searchnow.container&&CNJQ(data.searchnow.container)){var top=CNJQ(data.searchnow.container).offset().top;CNJQ(data.searchnow.container).css("height","calc(100vh - "+top+"px)");CNJQ(data.searchnow.container).append('<div class="cn-srp-frame"></div>')}else{CNJQ("body").append('<div class="cn-srp-frame"></div>');if(data.searchnow.z_index){CNJQ(".cn-srp-frame").css("cssText","z-index:"+data.searchnow.z_index+" !important")}}CNJQ(".cn-srp-frame").css("top",data.searchnow.top+"px");CNJQ(".cn-srp-frame").css("bottom",0);CNJQ(".cn-srp-frame").css("left",0);CNJQ(".cn-srp-frame").css("right",0);if(data.searchnow.hide_elements){CNJQ(data.searchnow.hide_elements).css("cssText","display:none !important")}}else{CNJQ(".cn-srp-frame").after('<div style="display:block;height:2000px;"></div>')}me.srpInventoryView=true;CNJQ(".cn-b13-offers").remove();CNJQ(".cn-b13-offers").remove();CNJQ(".cn-b13-protectnow").remove();CNJQ(".cn-b13-searchnow").remove();CNJQ(".cn-b13-credit").remove();CNPC.loadSearchNow()}if(data.compare.enabled){me.compareConfig=data.compare;CNJQ("<div />",{id:"cn_compare_pane",style:"display:none;",frameBorder:0}).appendTo("body");CNJQ("#cn_compare_pane").addClass("cn-comparison");CNJQ(".cn-compare").each(function(){var vin=CNJQ(this).attr("data-vin");var html='<div class="cn-inner">';html+='<label class="cn-checkbox"><input type="checkbox" name="cn-compare-vin" data-vin="'+vin+'" value="'+vin+'"> Compare</label>';html+='<a class="cn-compare-launch-button">COMPARE SELECTED</a></div>';CNJQ(this).html(html)});CNJQ(".cn-compare .cn-checkbox, .cn-compare .cn-checkbox input").on("click",function(){event.stopPropagation()});CNJQ(".cn-compare .cn-checkbox input").on("change",function(){var cnt=CNJQ(".cn-compare .cn-checkbox input:checked").length;CNJQ(".cn-compare .cn-checkbox input").each(function(){if(CNJQ(this).is(":checked")){if(cnt>1){CNJQ(this).closest(".cn-compare").find(".cn-compare-launch-button").css("display","block")}}else{CNJQ(this).closest(".cn-compare").find(".cn-compare-launch-button").css("display","none");if(cnt==3){CNJQ(this).closest(".cn-compare").hide()}else{CNJQ(this).closest(".cn-compare").show()}}});return false});CNJQ(".cn-compare-launch-button").click(function(){var vins=[];CNJQ(".cn-compare .cn-checkbox input").each(function(){if(CNJQ(this).is(":checked")){vins.push(CNJQ(this).val())}});CNJQ("#cn_compare_pane").show();var url=CNPC.compareConfig.base_url+"&cls=1&v[]="+vins.join("&v[]=");if(me.comparison){CNPC.comparison.destroy();CNPC.comparison=null}me.comparison=new easyXDM.Socket({remote:url,container:"cn_compare_pane",onMessage:function(message,origin){var json={type:"unknown"};try{json=JSON.parse(message);if(json.type=="slide_panel_close"){CNPC.comparison.destroy();CNPC.comparison=null;CNJQ("#cn_compare_pane").hide()}}catch(e){this.logError("easyXDM.onMessage",e.message,json,e,true)}}})})}if(data.poke.enabled&&!me.inSession&&!me.noChatMode&&!me.srpInventoryView){me.checkForPoke(data.poke.interval)}CNJQ(".cn-toggle-show").click(function(){var detailElCss=CNJQ(this).attr("data-el");CNJQ(this).hide();CNJQ(detailElCss).slideDown("fast");return false});try{if(data.tracking_frame){if(me.trackingPixel==null){setTimeout(function(){CNJQ("<div />",{id:"cn_tracking",style:"display:none;",width:0,height:0,frameBorder:0}).appendTo("body");me.trackingPixel=new easyXDM.Socket({remote:data.tracking_frame,container:"cn_tracking",onMessage:function(message,origin){var json={type:"unknown"};try{try{json=JSON.parse(message);if(json.type=="expand_to_full"){}else{if(json.type=="close_bn_widget"){}else{if(json.type=="collapse_to_minimum"){}else{if(json.type=="buynow_init"){}else{if(json.type=="close_window"){}else{if(json.type=="add_container_class"){}else{if(json.type=="remove_container_class"){}else{if(json.type=="close_extension"){}else{if(json.type=="change_width"){}else{if(json.type=="resize_container"){}else{if(json.type=="switch_to_buynow"){}else{if(json.type=="start_bn_deal"){}else{if(json.type=="add_vin_bn_deals"){}else{if(json.type=="new_chat_message"){if(CNJQ(".cn-b13-x-chat").hasClass("cn-b13-hide")){CNJQ(".cn-b13-chat .cn-b13-dot").show()}}else{if(json.type=="data_layer"){_sendCustomAnalyticEvent(json.event_data)}else{if(json.type=="post_top_win_message"){var mDomain=json.message._domain;if(mDomain){delete json.message._domain;window.postMessage(JSON.stringify(json.message),mDomain)}else{window.postMessage(JSON.stringify(json.message))}}}}}}}}}}}}}}}}}}catch(ex){}}catch(e){this.logError("easyXDM.onMessage",e.message,json,e,true)}}})},me.noChatMode?4000:0)}}}catch(e){}CNJQ(".cn-credit-app").on("click",function(){CNPC.launchCreditApp(this)});if(data.apps.credit!=null&&data.apps.credit.enable&&data.apps.credit.landing_urls!=null&&data.apps.credit.landing_urls.length>0&&data.apps.credit.landing_urls.includes(window.location.href)){timespan=5000;if(data.apps.creditapp_al_delay_time!=null&&data.apps.creditapp_al_delay_time!=""){timespan=data.apps.creditapp_al_delay_time*1000}setTimeout(function(){CNPC.launchCreditApp()},timespan)}CNJQ(".cn-trade-app").on("click",function(){var context=CNJQ(this).attr("data-name")||"Open";CNPC.launchTradeApp(context)});me.setupEventListeners();if(!me.noChatMode){me.cycleAgentPhotos()}if(me.isEmbedded){CNJQ(CNPC.getWidgetClass(true)).remove();me.cancelPokeCheck()}me.cookieBannerSelector=data.container.privacy_banner;me.adjustToCookieBanner()}onCNPluginLoad()}})},adjustToCookieBanner:function(){var me=this;if(CNJQ(this.cookieBannerSelector).length>0){if(me.adjustToCookieBannerTimout){clearTimeout(me.adjustToCookieBannerTimout)}me.adjustToCookieBannerTimout=setTimeout(function(){CNJQ(".cn-cookie-banner-offset").addClass("cn-cookie-banner-offset-el");CNJQ(".cn-cookie-banner-bottom").addClass("cn-cookie-banner-bottom-el");if(CNJQ(me.cookieBannerSelector).offset()&&CNJQ(me.cookieBannerSelector).offset().top<0){CNJQ(".cn-cookie-banner-offset").removeClass("cn-cookie-banner-offset");CNJQ(".cn-cookie-banner-bottom").removeClass("cn-cookie-banner-bottom");return}if(CNJQ(me.cookieBannerSelector).is(":visible")){var height=CNJQ(window).height()-CNJQ(me.cookieBannerSelector).offset().top+ +CNJQ(document).scrollTop();if(height<0){height=0}if(height==0){me.cookieBannerHeight=height;CNJQ(".cn-cookie-banner-offset").removeClass("cn-cookie-banner-offset")}else{if(me.cookieBannerHeight==height){return}CNJQ(".cn-cookie-banner-offset-el").addClass("cn-cookie-banner-offset");CNJQ(".cn-cookie-banner-bottom-el").addClass("cn-cookie-banner-bottom");CNJQ("#cn_cookie_banner_st").remove();me.cookieBannerHeight=height;var styleText=".cn-cookie-banner-offset { margin-bottom: "+height+"px !important; }";styleText+=".cn-cookie-banner-bottom { bottom: "+height+"px !important; }";var cnBody=document.getElementsByTagName("body")[0];var cnStyle=document.createElement("style");cnStyle.id="cn_cookie_banner_st";cnStyle.innerText=styleText;cnBody.appendChild(cnStyle,cnBody)}}else{CNJQ(".cn-cookie-banner-offset").removeClass("cn-cookie-banner-offset");CNJQ(".cn-cookie-banner-bottom").removeClass("cn-cookie-banner-bottom")}},1000)}else{CNJQ(".cn-cookie-banner-offset").removeClass("cn-cookie-banner-offset");CNJQ(".cn-cookie-banner-bottom").removeClass("cn-cookie-banner-bottom")}},addContainer:function(){var me=this;if(me.cnContainer.selector&&me.cnContainer.html){CNJQ(me.cnContainer.selector).addClass("cn-button-container");CNJQ(me.cnContainer.selector).each(function(){if(CNJQ(this).attr("data-rendered")!="1"){me.isVDP=me.cnContainer.vdp.detector?eval(me.cnContainer.vdp.detector):false;var vin=CNJQ(this).attr("data-vin");if(me.isVDP&&me.cnContainer.vdp.vin_lookup){vin=eval(me.cnContainer.vdp.vin_lookup)}if(!vin&&me.cnContainer.vin_selector){vin=CNJQ(this).closest(me.cnContainer.vin_selector).attr("data-vin")}var html=me.cnContainer.html;if(vin){vin=CNJQ.trim(vin);html=html.replace(new RegExp("{vin}","g"),vin)}else{html=html.replace(new RegExp("{vin}","g"),"")}CNJQ(this).html(html);CNJQ(this).find("a").each(function(i,el){if(el.getAttribute("href")==null&&el.getAttribute("tabindex")==null){el.setAttribute("role","button");el.setAttribute("tabindex",0)}});if(me.isVDP){CNJQ(this).addClass("cn-on-vdp");CNJQ(".cn-compare").remove()}CNJQ(this).attr("data-rendered",1);if(me.no_sms===true){try{CNJQ(CNJQ(this).find("a[onclick='CarNowPlugin.showSmsContactForm(this,'cncb13_sms_form');return false;']")[0]).parent().remove();CNJQ(CNJQ(this).find("a[onclick='CarNowPlugin.showSmsContactForm(this,'cncb11_sms_form');return false;']")[0]).parent().remove();CNJQ(CNJQ(this).find("a[onclick='CNPC.toggleText(this,'#cncb11_sms_form');return false;']")[0]).parent().remove()}catch(er){}}}})}if(me.customHooks&&me.customHooks.length>0){for(var i=0;i<me.customHooks.length;i++){if(me.customHooks[i].selector){var selector=me.customHooks[i].selector;if(selector){CNJQ(selector).each(function(){var vin=CNJQ(this).attr("data-vin");if(!vin){vin=CNJQ(selector).attr("data-vin")}if(me.isVDP&&me.cnContainer.vdp.vin_lookup){vin=eval(me.cnContainer.vdp.vin_lookup)}var onclickHook=me.customHooks[i].onclick;if(vin){vin=CNJQ.trim(vin);onclickHook=onclickHook.replace(new RegExp("{vin}","g"),vin)}else{onclickHook=onclickHook.replace(new RegExp("{vin}","g"),"")}CNJQ(this).attr("onclick",onclickHook);if(me.customHooks[i].index){CNJQ(this).attr("data-index",me.customHooks[i].index)}if(me.customHooks[i].name){CNJQ(this).attr("data-label",me.customHooks[i].label)}})}}}}if(this.isVDP&&me.cnContainer.selector){CNJQ(me.cnContainer.selector).attr("data-page-type","vdp")}else{CNJQ(me.cnContainer.selector).attr("data-page-type","srp")}if(!this.isVDP){CNJQ(".cn-only-vdp").remove()}else{CNJQ(".cn-only-srp").remove()}},loadSearchNow:function(){var me=this;var frameId="cn_srp_frame";CNJQ(".cn-srp-frame").attr("id",frameId);if(me.srpWindow){me.srpWindow.destroy()}var inventoryUri="/inventory";var params=CarNowPlugin.getParameters();if(params.condition==1||params.condition=="1"){inventoryUri+="/new"}else{if(params.condition==2||params.condition=="2"){inventoryUri+="/pre-owned"}}var url=me.options.bnUrl+inventoryUri+"?vstid="+me.visitorId+"&framed=1&key="+me.options.settings.access_key;if(this.userZipCode){url+="&zip="+this.userZipCode}me.srpWindow=new easyXDM.Socket({remote:url,container:frameId,onMessage:function(message,origin){var json={type:"unknown"};try{json=JSON.parse(message);if(json.type=="hide_all_widgets"){CNJQ(CNPC.getWidgetClass(true)).addClass("cn-widget-hide")}else{if(json.type=="show_all_widgets"){CNJQ(".cn-widget-hide").removeClass("cn-widget-hide")}else{if(json.type=="launch_chat"){CNPC.toggleChat()}else{if(json.type=="switch_to_buynow"){CNPC.launchBuyNow(null,null,json.vin,null,null,null,null,json.deal,json.params)}else{if(json.type=="add_vin_bn_deals"){var vin=json.vin;if(vin!==undefined){CNPC.buynow.cart.vin=vin;if(CNPC.buynow.cart.deals.indexOf(vin)<0){CNPC.buynow.cart.deals.push(vin)}}setTimeout(function(){CNPC.loadVisitorInfo({bn:true})},4000);CNPC.hidePrompts();CNPC.cancelPokeCheck()}}}}}}catch(e){me.logError("easyXDM.onMessage",e.message,json,e,true)}}})},setupBuyNow:function(){if(!this.buynowConfig.enabled){return}if(this.buynowConfig.inline_widget){this.loadBuyNowInline()}else{CNJQ(".cn-bn-wig-inline").remove()}var me=this;var widgetCheckParams={bn_check:"1"};me.addContainer();var vinsOnPage=null;if(!CNPC.lastBNVinSet){vinsOnPage=[];CNJQ("[class^=cn-buynow],[class^=cn-buy-now]").each(function(){vinsOnPage.push(CNJQ(this).attr("data-vin"))});if(CNPC.lastBNVinSet==vinsOnPage){return}}CNPC.lastBNVinSet=vinsOnPage;CNJQ("[class^=cn-buynow],[class^=cn-buy-now]").parent().hide();var newBuyNowVins=[];for(var i=0;i<me.buynowConfig.buttons.length;i++){var b=me.buynowConfig.buttons[i];CNJQ(b.selector).each(function(){if(CNJQ(this).attr("data-rendered")!="1"){CNJQ(this).append(b.html);CNJQ(this).attr("data-index",b.btn);CNJQ(this).attr("data-name",b.label);CNJQ(this).show();CNJQ(this).attr("data-rendered",1);CNJQ(this).attr("aria-label",b.label);CNJQ(this).attr("role","button");CNJQ(this).attr("tabindex",0);newBuyNowVins.push(CNJQ(this).attr("data-vin"))}})}for(var i=0;i<me.buynowConfig.buttons_advanced.length;i++){me.buynowAdvancedPayments=true;var b=me.buynowConfig.buttons_advanced[i];var selector="."+b.selector;CNJQ(selector).each(function(){if(CNJQ(this).attr("data-rendered")!="1"){CNJQ(this).append(b.html);CNJQ(this).attr("data-index",b.btn);CNJQ(this).attr("data-name",b.label);if(b.pay_type){CNJQ(this).attr("data-bnpt",b.pay_type)}if(CNJQ(this).find(".cn-bn-payments").length>0){CNJQ(this).addClass("cn-buynow-pw")}else{CNJQ(this).addClass("cn-bn-action")}if(CNJQ(this).hasClass("cn-buynow-b1")){CNJQ(this).addClass("cn-buynow-pw")}if(b.calculator){CNJQ(this).find(".cn-bn-action").attr("data-vin",CNJQ(this).attr("data-vin"))}else{if(b.payment){CNJQ(this).addClass("cn-bn-action")}else{CNJQ(this).addClass("cn-bn-action")}}CNJQ(this).find(".cn-bn-payments").addClass("cn-not-rendered");CNJQ(this).attr("data-rendered",1);CNJQ(this).addClass("cn-www-bn");CNJQ(this).show();newBuyNowVins.push(CNJQ(this).attr("data-vin"))}})}CNJQ(".cn-buy-now, .cn-buynow-b1").attr("aria-label",function(){return me.settings.bn_opens_new_window+CNJQ(this).text().trim()});CNJQ(".cn-bn-payments.cn-not-rendered").hide();CNJQ(".cn-buy-now, .cn-bn-action").unbind("click");CNJQ(".cn-buy-now, .cn-bn-action").on("click",function(e){e.preventDefault();var vin=CNJQ(this).attr("data-vin");me.ctxGroupDealerId=CNJQ(this).attr("data-bn-did");var openDeal=CNJQ(this).attr("data-launch-deal");me.launchBN(this,vin,openDeal=="1");return false});CNJQ(".cn-bn-param-down, .cn-bn-param-tradein, .cn-bn-param-payoff").unbind("keydown");CNJQ(".cn-bn-param-down, .cn-bn-param-tradein, .cn-bn-param-payoff").on("keydown",function(){me.refreshBNPaymentsDebounced()});CNJQ(".cn-bn-param-apr-term, .cn-bn-param-lease-term, .cn-bn-param-lease-miles, .cn-bn-param-credit").unbind("change");CNJQ(".cn-bn-param-apr-term, .cn-bn-param-lease-term, .cn-bn-param-lease-miles, .cn-bn-param-credit").on("change",function(){me.refreshBNPayments()});CNJQ("[data-pay-type]").unbind("click");CNJQ("[data-pay-type]").on("click",function(){var type=CNJQ(this).attr("data-pay-type");CNJQ(".cn-bn-el-type").hide();CNJQ(".cn-bn-el-type-"+type).show();CNJQ("[data-pay-type]").removeClass("active");CNJQ(this).addClass("active");CNJQ(this).closest(".cn-buynow-pw").find(".cn-bn-action").attr("data-bnpt",type);return false});if(CNJQ("[data-vin]").length!==0){widgetCheckParams.vins=newBuyNowVins;if(newBuyNowVins.length>0){CNJQ.ajax({url:me.options.baseUrl+me.options.orgBaseUrl+"/widget_check?id="+me.options.orgId+"&vstid="+me.visitorId,type:"POST",data:widgetCheckParams,success:function(checkData){if(checkData.buynow&&checkData.buynow.remove){for(var x=0;x<checkData.buynow.remove.length;x++){CNJQ(".cn-bn-action[data-vin="+checkData.buynow.remove[x]+"], .cn-buy-now[data-vin="+checkData.buynow.remove[x]+"], .cn-compare[data-vin="+checkData.buynow.remove[x]+"]").remove()}}CNJQ("[class^=cn-buynow],[class^=cn-buy-now]").parent().show();CNPC.refreshBNPayments(true)}})}else{CNJQ("[class^=cn-buynow],[class^=cn-buy-now]").parent().show()}}},setupProtectNow:function(){CNJQ(".cn-protect-now").each(function(){CNPC.launchProtectNow(this)})},getAllVinsFromPage:function(){var vins=[];CNJQ("[data-vin]").each(function(){var vin=CNJQ(this).attr("data-vin").match(/[A-Za-z0-9]{17}/);if(vin&&vins.indexOf(vin[0])<0){vins.push(vin[0])}});return vins},cycleAgentPhotos:function(){if(CNPC.agents){try{if(CNPC.agentIndex===undefined){CNPC.agentIndex=1}var agentPhotoEl=CNJQ("[id='cn-chat-agent-photo']");var nameEl=CNJQ("[id='cn-chat-agent-name']");if(agentPhotoEl.length>0){var index=CNPC.agentIndex;var img=CNPC.agents[index][1];var name=CNPC.agents[index][0];CNJQ(agentPhotoEl).each(function(index,curObj){CNJQ(curObj).attr("src",img)});CNJQ(nameEl).each(function(index,curObj){CNJQ(curObj).html(name)});CNPC.agentIndex=CNPC.agentIndex+1;if(CNPC.agentIndex>=CNPC.agents.length){CNPC.agentIndex=0}setTimeout(function(){CNPC.cycleAgentPhotos()},4000)}}catch(e){}}},getDealerAccessParams:function(singleValue){var me=this;var accessParams={};for(var ii=0;ii<me.dealerAccessKeys.length;ii++){var def=me.dealerAccessKeys[ii];for(var jj=0;jj<def.expr.length;jj++){var expr=def.expr[jj];if(def.type==1){var v=CNJQ("meta[name='"+expr+"']").attr("content");if(v){accessParams.gdid=v;if(singleValue){return v}}}else{if(def.type==2){var v=CNJQ("meta[name='"+expr+"']").attr("content");if(v){accessParams.vin=v;if(singleValue){return v}}}else{if(def.type==3&&CNJQ(expr).length==1&&CNJQ(expr).html()){accessParams.vin=CNJQ(expr).html().trim().match(/[A-Za-z0-9]{17}/);if(singleValue){return accessParams.vin}}else{if(def.type==3&&CNJQ(expr).length>1&&CNJQ(expr).html()){var vins=[];CNJQ(expr).each(function(){var v=CNJQ(this).html().trim().match(/[A-Za-z0-9]{17}/);if(vins.indexOf(v)<0){vins.push(v)}});if(vins.length==1){accessParams.vin=vins[0]}if(singleValue){return accessParams.vin}}else{if(def.type==4){var v=CNJQ(expr).html();if(v){accessParams.gdid=v.trim();if(singleValue){return v}}}else{if(def.type==5){try{var v=eval(expr);if(v){accessParams.gdid=v.trim();if(singleValue){return v}}}catch(e){}}}}}}}}}if(singleValue){return null}else{return accessParams}},extractPageInfo:function(){var data={title:document.title};this.isVDP=this.cnContainer.vdp&&this.cnContainer.vdp.detector?eval(this.cnContainer.vdp.detector):false;if(this.isVDP&&this.cnContainer.vdp&&this.cnContainer.vdp.vin_lookup){vin=eval(this.cnContainer.vdp.vin_lookup);if(vin){data.vdp_vin=vin.match(/[A-Za-z0-9]{17}/)}}var vins=[];try{vins.push.apply(vins,document.title.match(/[A-Za-z0-9]{17}/));var metas=document.getElementsByTagName("meta");if(metas){for(var i=0;i<metas.length;i++){var name=metas[i].getAttribute("name");if(name=="description"){data.desc=metas[i].getAttribute("content")}if(name=="description"||name=="keywords"){var content=metas[i].getAttribute("content");if(content){if(name=="keywords"){content=content.split(",").join(" ")}if(content.match(/[A-Za-z0-9]{17}/)){vins.push(content.match(/[A-Za-z0-9]{17}/))}}}}}}catch(e){this.log(e)}if(this.settings.inv_map_vin_selector){var vinSelectedDetected=false;for(var i=0;i<this.settings.inv_map_vin_selector.length;i++){var elements=document.querySelectorAll(this.settings.inv_map_vin_selector[i]);if(elements){for(var j=0;j<elements.length;j++){var el=elements[j];if(this.settings.inv_map_vin_attr.length>0){for(var k=0;k<this.settings.inv_map_vin_attr.length;k++){var at=el.getAttribute(this.settings.inv_map_vin_attr[k]);var textToSearch=at?at:el.innerHTML;var vin=textToSearch.match(/[A-Za-z0-9]{17}/);if(vin){vins=[vin];vinSelectedDetected=true;break}}}else{var vin=el.innerHTML.match(/[A-Za-z0-9]{17}/);if(vin){vins=[vin];vinSelectedDetected=true}}}}if(vinSelectedDetected){break}}}if(CNJQ("[data-vin]").length>0){vins=this.getAllVinsFromPage()}data.vins=vins;return data},loadVisitorInfo:function(options){var p=this.hashToParams(options);var me=this;var queryParams="";if(options&&options.bn){queryParams+="&bn=1"}CNJQ.ajax({url:me.options.baseUrl+me.options.orgBaseUrl+"/visitor_info?vstid="+this.visitorId+p+"&g="+(me.group?1:0)+queryParams,type:"GET",success:function(data){me.groupDealerKey=null;if(data.department_id){me.setDepartment(data.department_id)}me.buynow.cart=data.buynow.cart;if(me.buynow.cart&&!me.buynow.cart.deals){me.buynow.cart.deals=[]}if(me.tempvin&&me.buynow.cart.deals.indexOf(me.tempvin)<0){me.buynow.cart.deals.push(me.tempvin)}if(data.buynow.cart.vin){me.showWishlistButton()}if(data.inventory){me.groupDealerKey=data.inventory.access_key}if(data.buynow.cart.wishlist){me.setupBNWishlist(data.buynow.cart.wishlist.html)}if(data.session){me.session=data.session;if(data.session.params){Object.keys(data.session.params).forEach(function(key){if(data.session.params[key]){me.additionalChatParams[key]=data.session.params[key]}})}}if(data.deals){CNJQ("body").append('<div class="'+CNPC.getWidgetClass()+' cn-wid-cont cn-wid-deals">'+data.deals.html+"</div>");me.offerListContainer=".cn-advd-container";CNJQ(me.offerListContainer).hide();if(data.deals.count>0){CNJQ(".cn-b13-offers").show()}if(data.deals.count>0&&data.deals.show){CNJQ(me.offerListContainer).show();me.toggleOffers();me.cancelPokeCheck()}}}})},showAllDeals:function(){CNJQ(".cn-advd-container").addClass("cn-advd-full");CNJQ(".cn-advd-container .cn-advd-box").removeClass("cn-advd-hidden")},hideAllDeals:function(){CNJQ(".cn-advd-container").removeClass("cn-advd-full");CNJQ(".cn-advd-container .cn-advd-more").addClass("cn-advd-hidden");this.toggleOffers()},setupBNWishlist:function(html){CNJQ(".cn-wl-container").html(html);CNJQ(".cn-bn-wishlist-item").unbind("click");CNJQ(".cn-bn-wishlist-item").on("click",function(){var vin=CNJQ(this).attr("data-vin");CNPC.launchBN(null,vin);return false})},setDepartment:function(departmentId){this.departmentId=departmentId;return false},selectDepartment:function(departmentId){this.setDepartment(departmentId);this.launch(this.buttonClicked,this.deptAdditionalParams||{});return false},toggleButtons:function(){var bnHidden=CNJQ(".cn-b13-buynow").hasClass("cn-b13-hide");CNJQ(".cn-b13-btn").removeClass("cn-b13-disabled");CNJQ(".cn-b13-btn").removeClass("cn-b13-hide");CNJQ(".cn-b13-x").addClass("cn-b13-hide");if(bnHidden){CNJQ(".cn-b13-buynow").addClass("cn-b13-hide")}},toggleChat:function(btn,params,options){CNJQ(".cn-b13-container").show();if(!options){options={skipDataLayerTrigger:true}}else{options.skipDataLayerTrigger=true}var dataLayer={chatType:"chat",chatProvider:this.settings.server=="production"?"CarNow":"CarNow Dev",chatProfitCenter:(this.session&&this.session.dept_cat)?(["sales","service","parts"].indexOf(this.session.dept_cat)>-1?this.session.dept_cat:"other"):"other"};if(CNJQ(".cn-b13-x-chat").hasClass("cn-b13-hide")){CNJQ(".cn-b13-chat").addClass("cn-b13-hide");CNJQ(".cn-b13-btn").addClass("cn-b13-disabled");CNJQ(".cn-b13-x-chat").removeClass("cn-b13-disabled");CNJQ(".cn-b13-x-chat").removeClass("cn-b13-hide");this.hidePrompts();this.toggleMode="chat";if(this.interSocket&&this.inSession&&!this.isEmbedded){this.interSocket.postMessage(JSON.stringify({event:{type:"maximize_chat_panel",action:this.toggleMode}}))}else{if(this.interSocket){this.interSocket.destroy()}this.launchChatInternal(this.options.settings.access_key,btn,params,options)}dataLayer.events="chatClick";_sendCustomAnalyticEvent(dataLayer);this.triggerActivityPixel(this.settings.visiq_url)}else{CNJQ(".cn-b13-btn").removeClass("cn-b13-disabled");CNJQ(".cn-b13-chat").removeClass("cn-b13-hide");CNJQ(".cn-b13-x-chat").addClass("cn-b13-hide");this.hidePrompts();if(this.interSocket){this.interSocket.postMessage(JSON.stringify({event:{type:"minimize_chat_panel",action:this.toggleMode}}))}if(!this.inSession){dataLayer.chatProfitCenter="other";dataLayer.events="chatClosed";_sendCustomAnalyticEvent(dataLayer)}}},toggleText:function(btn,formId,params){if(CNPC.no_sms===true){return false}if(window.appleBusinessChat&&window.appleBusinessChat.isSupported()){var abcOn=CNJQ(".cn-b13-text").attr("data-abc-available")=="1";abcOn=abcOn||(params&&(params["biz-group-id"]||params["biz-intent-id"]));if(abcOn){var url=this.abc.url;if(params){Object.keys(params).forEach(function(key){if(params[key]){var value=CNPC.cleanupParamsValue(params[key]);url+="&"+encodeURIComponent(key)+"="+value}})}window.open(url);return false}}if(this.smsNativeAppHref){window.location.href=this.smsNativeAppHref;return false}var me=this;this.toggleMode="sms";CNJQ(".cn-b13-container").show();if(CNJQ(".cn-b13-x-text").hasClass("cn-b13-hide")){if(this.interSocket&&this.inSession){this.toggleChat();if(!this.session||!this.session.lead){setTimeout(function(){me.interSocket.postMessage(JSON.stringify({event:{type:"show_sms_form"}}))},750)}return}CNJQ(".cn-b13-text").addClass("cn-b13-hide");CNJQ(".cn-b13-btn").addClass("cn-b13-disabled");CNJQ(".cn-b13-x-text").removeClass("cn-b13-disabled");CNJQ(".cn-b13-x-text").removeClass("cn-b13-hide");this.hidePrompts();if(this.isChatRequestLite){if(this.interSocket){this.interSocket.destroy()}this.launchChatInternal(this.options.settings.access_key,btn,{sms_form:1});if(this.inSession){setTimeout(function(){me.interSocket.postMessage(JSON.stringify({event:{type:"show_sms_form"}}))},750)}}else{if(!formId){formId="#cncb11_sms_form"}if(formId){formId="#cncb11_sms_form"}this.showPrompt(btn,formId)}}else{CNJQ(".cn-b13-btn").removeClass("cn-b13-disabled");CNJQ(".cn-b13-text").removeClass("cn-b13-hide");CNJQ(".cn-b13-x-text").addClass("cn-b13-hide");this.hidePrompts();if(this.interSocket){this.interSocket.postMessage(JSON.stringify({event:{type:"minimize_chat_panel"}}))}}},toggleCall:function(btn,formId,phoneNo){if(CNPC.mobile&&phoneNo){window.open("tel:"+phoneNo);return}var me=this;this.toggleMode="call";CNJQ(".cn-b13-container").show();if(CNJQ(".cn-b13-x-call").hasClass("cn-b13-hide")){if(this.interSocket&&this.inSession){this.toggleChat();if(!this.session||!this.session.lead){setTimeout(function(){me.interSocket.postMessage(JSON.stringify({event:{type:"show_sms_form"}}))},750)}return}CNJQ(".cn-b13-btn").addClass("cn-b13-disabled");CNJQ(".cn-b13-x-call").removeClass("cn-b13-disabled");this.hidePrompts();if(this.isChatRequestLite){if(this.interSocket){this.interSocket.destroy()}this.launchChatInternal(this.options.settings.access_key,btn,{sms_form:1});if(this.inSession){setTimeout(function(){me.interSocket.postMessage(JSON.stringify({event:{type:"show_sms_form"}}))},750)}}else{if(!formId){formId="#cncb11_sms_form"}if(formId){formId="#cncb11_sms_form"}this.showPrompt(btn,formId,phoneNo)}}else{CNJQ(".cn-b13-btn").removeClass("cn-b13-disabled");CNJQ(".cn-b13-call").removeClass("cn-b13-hide");CNJQ(".cn-b13-x-call").addClass("cn-b13-hide");this.hidePrompts();if(this.interSocket){this.interSocket.postMessage(JSON.stringify({event:{type:"minimize_chat_panel"}}))}}},toggleOffers:function(btn,formId){var me=this;if(me.srpInventoryView){return}CNJQ(".cn-b13-container").show();this.hidePrompts();CNJQ(".cn-advd-box").removeClass("cn-advd-contact");CNJQ(".cn-advd-container").removeClass("cn-advd-contact-open");if(CNJQ(".cn-b13-offers").hasClass("cn-b13-offers-visible")){CNJQ(".cn-b13-offers").removeClass("cn-b13-offers-visible");CNJQ(this.offerListContainer+" .cn-advd-box").addClass("cn-advd-hidden")}else{CNJQ(".cn-b13-offers").addClass("cn-b13-offers-visible");CNPC.showPrompt(this,this.offerListContainer,{inlinePrompt:true});CNJQ(this.offerListContainer+" .cn-advd-box:first-child").removeClass("cn-advd-hidden")}},launchProtectNow:function(btn,framed){var url=this.options.baseUrl+"/dealers/protectnow?key="+this.options.settings.access_key+"&vstid="+this.visitorId;if(this.protectnowConfig.framed){url+="&framed=1";this.openChatInFrame(url,{containerClass:"cn-protect-container",fullHeight:true})}else{this.protectNowWindow=window.open(url,"_protect_now");this.protectNowWindow.focus()}this.inSession=true},launchSearchNow:function(btn,newWindow){var url=CNJQ(btn).attr("href");if(CNJQ(btn).attr("condition")){if(url.indexOf("?")>=0){url+="&condition="+CNJQ(btn).attr("condition")}else{url+="?condition="+CNJQ(btn).attr("condition")}}if(CNJQ(btn).attr("behavior")&&CNJQ(btn).attr("behavior")==0){this.searchNowWindow=window.open(url,"_self")}else{this.searchNowWindow=window.open(url,"_search_now")}this.searchNowWindow.focus()},launchCreditApp:function(btn,extLink){if(extLink){window.open(extLink,"_blank");return}if(!(typeof btn=="string")){context=CNJQ(btn).attr("title");if(!context){context=CNJQ(btn).attr("data-name")||"Open"}}if(CNJQ("#cn_credit_app").length>0){}else{CNJQ("body").append('<div id="cn_credit_app_wid" class="'+CNPC.getWidgetClass()+' cn-wid-cont cn-wid-credit-app"><div class="cn-lb-backdrop"></div><div id="cn_credit_app" class="cn-lb-panel cn-credit-app-container"></div></div>');CNJQ("#cn_credit_app").show();var url=this.options.baseUrl+"/creditapp?key="+this.options.settings.access_key+"&vstid="+this.visitorId;if(this.isVDP){var vins=this.extractPageInfo().vins;url+="&vin="+vins[0]}CNPC.creditAppWindow=new easyXDM.Socket({remote:url,container:"cn_credit_app",onMessage:function(message,origin){var json={type:"unknown"};try{json=JSON.parse(message);if(json.type=="close_widget"){CNJQ("#cn_credit_app_wid").hide();setTimeout(function(){CNPC.creditAppWindow.destroy();CNPC.creditAppWindow=null;CNJQ("#cn_credit_app_wid").remove()},2000)}else{if(json.type=="switch_to_buynow"){if(CNPC.interSocket){CNPC.interSocket.destroy();CNPC.interSocket=null}CNPC.creditAppWindow.destroy();CNPC.creditAppWindow=null;CNJQ("#cn_credit_app_wid").remove();CNPC.launchBuyNow(null,null,json.vin,null,null,null,null,false,json.params)}}}catch(e){this.logError("easyXDM.onMessage",e.message,json,e,true)}}});CNPC.cancelPokeCheck()}CNPC.sendGAData(context,"CarNow Credit App")},launchTradeApp:function(context,extLink){if(extLink){window.open(extLink,"_blank");return}if(!(typeof context=="string")){context=CNJQ(context).attr("title")}if(CNJQ("#cn_trade_app").length>0){}else{CNJQ("body").append('<div id="cn_trade_app_wid" class="'+CNPC.getWidgetClass()+' cn-wid-cont cn-wid-trade-app"><div class="cn-lb-backdrop"></div><div id="cn_trade_app" class="cn-lb-panel cn-trade-app-container"></div></div>');CNJQ("#cn_trade_app").show();var url=this.options.baseUrl+"/tradeapp?key="+this.options.settings.access_key+"&vstid="+this.visitorId;CNPC.tradeAppWindow=new easyXDM.Socket({remote:url,container:"cn_trade_app",onMessage:function(message,origin){var json={type:"unknown"};try{json=JSON.parse(message);if(json.type=="close_widget"){CNJQ("#cn_trade_app_wid").hide();setTimeout(function(){CNPC.tradeAppWindow.destroy();CNPC.tradeAppWindow=null;CNJQ("#cn_trade_app_wid").remove()},2000)}}catch(e){this.logError("easyXDM.onMessage",e.message,json,e,true)}}});CNPC.cancelPokeCheck()}CNPC.sendGAData(context,"CarNow Trade App")},launch:function(btn,params,options){if(this.isChatRequestLite&&!this.isEmbedded){this.toggleChat(btn,params,options);if(params.re_engage&&params.tree){this.interSocket.postMessage(JSON.stringify({event:{type:"re_engage_ai",params:params}}))}}else{if(!options){options={}}if(!options.fromInit){options.max=true}this.launchChatInternal(this.options.settings.access_key,btn,params,options)}return false},launchChatInternal:function(key,btn,params,options){var me=this;if(params==undefined||params==null){params={}}if(options==undefined||options==null){options={}}if(this.gaTracker){var gaParams=["cnGATracker.send","event","CarNow Chat Activity"]}else{var gaParams=["send","event","CarNow Chat Activity"]}gaParams.push("click");if(btn!=null){gaParams.push(this.getGANameFromElement(btn))}else{gaParams.push("Chat Button")}var btnDeptId=CNJQ(btn).attr("data-dept");if(btnDeptId){params.dept=btnDeptId}var splitKeys=key.split("|");if(this.group&&(splitKeys.length<2||splitKeys[1]=="")&&this.groupDealerKey){if(splitKeys.length==1){key="|"+key}key=this.groupDealerKey+key;splitKeys=key.split("|")}if(this.group&&splitKeys.length==1){var dealerAccessKey=null;if(this.dynamicDealerDetect){dealerAccessKey=this.getDealerAccessParams(true);if(dealerAccessKey){this.groupDealerKey=dealerAccessKey}}if(this.groupDealerKey){key=this.groupDealerKey+"|"+key;params.groupDealer=true}else{if(splitKeys.length<2||splitKeys[1]==""){params.group_site="1"}}}var deptSelector=(!options.noDeptSelector)?this.options.settings.dept_selector:false;if(!this.isChatRequestLite&&!this.group&&!this.departmentId&&!this.inSession&&params.dept==null&&!(me.buynow.cart&&me.buynow.cart.deals&&me.buynow.cart.deals.length>0)){if(deptSelector){this.buttonClicked=btn;this.deptAdditionalParams=params;this.showPrompt(btn,"#cndepts");return}else{this.departmentId=this.defaultDepartmentId}}else{if(!deptSelector&&!this.departmentId){this.departmentId=this.defaultDepartmentId}}if(this.additionalChatParams.cclat==null&&this.settings.location_service_enabled){this.getNavigatorLocation(function(){var llUrl=me.options.baseUrl+"/users/set_lat_lng?lat="+me.latitude+"&lng="+me.longitude+"&vstid="+me.visitorId;CNJQ.ajax({url:llUrl,type:"GET",success:function(data){}});if(me.interSocket){me.interSocket.postMessage(JSON.stringify({event:{type:"geo_loc_provided",lat:me.latitude,lng:me.longitude}}))}})}var chatParams=this.getChatParams(btn,params);var url_ext=this.isChatRequestLite?"/chat/customer_window?key=":"/dealers/chat_request?key=";var url=this.options.baseUrl+url_ext+encodeURIComponent(key)+chatParams;if(this.stickyButtons){url+="&sticky=1"}var showAllSessionButtons=true;if(this.inSession&&!this.group&&!this.isEmbedded&&(!this.stickyButtons||options.fromInit)&&!options.max){url+="&min=1";showAllSessionButtons=false}if(params._noconv){url+="&min=1";showAllSessionButtons=false}var jsSelector=this.settings.jsSelector;if(jsSelector.indexOf("window")>-1){jsSelector=jsSelector.split(".")[1]}if(jsSelector){var jsSelectorValue=window[jsSelector];if(jsSelectorValue){url+="&cnvjs="+jsSelectorValue}}if(this.mobileLite){if(!this.chatLiteIsSetup){this.setupChatLite(url)}this.openChatLite()}else{this.openChatInFrame(url,{context:"chat"})}if(!me.stickyButtons&&!me.group){this.removeAllWidgets()}else{if(this.group){CNJQ(".cn-chat-container").addClass("cn-group-site")}if(this.mobile){CNJQ(".cn-chat-container").addClass("cn-mobile")}else{if(this.stickyButtons){CNJQ(".cn-chat-container").addClass("cn-sticky")}}}if(!this.isChatRequestLite){this.inSession=true}if(showAllSessionButtons){this.showSessionButtons()}if(!options.skipDataLayerTrigger&&!options.fromInit){this.triggerDataLayerEvent("chatClick")}return false},showSessionButtons:function(){if(this.isEmbedded){return}CNJQ(".cn-b13-container").show();CNJQ(".cn-b13-chat").addClass("cn-b13-hide");CNJQ(".cn-b13-text").removeClass("cn-b13-hide");CNJQ(".cn-b13-offers").removeClass("cn-b13-hide");CNJQ(".cn-b13-x-text").addClass("cn-b13-hide");CNJQ(".cn-b13-x-offers").addClass("cn-b13-hide");CNJQ(".cn-b13-btn").addClass("cn-b13-disabled");CNJQ(".cn-b13-x-chat").removeClass("cn-b13-disabled");CNJQ(".cn-b13-x-chat").removeClass("cn-b13-hide");CNJQ(".cn-depc").closest(CNPC.getWidgetClass(true)).remove()},launchBuyNow:function(btn,flow,vin,price,msrp,includesAprRebates,includesLeaseRebates,directDeal,paramString){this.launchBN(btn,vin,directDeal,paramString);return false},launchBN:function(btn,vin,deal,paramString){var me=this;if(!me.buynowConfig.no_deal_flow&&(this.buynow.cart.deals.indexOf(vin)>-1||deal||(vin&&me.buynowConfig.no_widget))){var url=me.options.bnUrl+"/buynow/"+vin+"?vstid="+me.visitorId+me.getBnParams(btn)+"&did="+me.options.orgId+"&v="+me.buynowConfig.deal_ui_version;if(paramString){url+=paramString}if(me.isGroupDealerWChat){url+="&parent_id="+me.options.orgId}if(me.buynowConfig.same_window){url+="&self=1";me.openChatInFrame(url,{containerClass:"cn-bn-slide",fullHeight:true,bnDeal:true,width:me.buynowConfig.expand_width,context:"bn_deal"});me.hideWishlist()}else{if(me.settings.sdEnabled){try{url=sd.getLinkerUrl(url)}catch(err){this.log(1,err.name,err.message)}}setTimeout(function(){me.bnDealWindow=window.open(url,"_bn_"+vin);if(me.bnDealWindow){isBNLaunch=true;me.bnDealWindow.focus();me.hideWishlist()}else{me.showWishlist()}},500)}}else{if(vin){var onlyWidget=CNJQ(btn)&&CNJQ(btn).attr("data-only-widget")=="1";me.hideWishlist();setTimeout(function(){me.showWishlistButton()},2000);var url=me.options.bnUrl+"/payments/"+vin+"?did="+me.options.orgId+"&vstid="+me.visitorId+me.getBnParams(btn);if(onlyWidget){url+="&ow=1"}if(me.isGroupDealerWChat){url+="&parent_id="+me.options.orgId}me.openChatInFrame(url,{containerClass:"cn-bn-slide",fullHeight:true,width:me.buynowConfig.widget_width,context:"bn_widget"});me.buynow.cart.vin=vin;if(me.buynowConfig.no_deal_flow){me.inSession=true}}else{me.showWishlist()}}setTimeout(function(){me.loadVisitorInfo({bn:true})},2000);me.removeAllWidgets();me.cancelPokeCheck();me.triggerActivityPixel(this.settings.visiq_url);var dataLayer={chatType:"chat",chatProvider:this.settings.server=="production"?"CarNow":"CarNow Dev"};dataLayer.events="buynowClick";_sendCustomAnalyticEvent(dataLayer);return false},loadBuyNowInline:function(){var me=this;if(CNJQ(".cn-bn-wig-inline").length==0||this.bnInlineWidget){return}var containerId="_cn_bn_inline";var url=me.options.bnUrl+"/app/bn/inline?vin="+CNJQ(".cn-bn-wig-inline").attr("data-vin")+"&vstid="+me.visitorId+"&did="+me.options.orgId;CNJQ(".cn-bn-wig-inline").attr("id",containerId);this.bnInlineWidget=new easyXDM.Socket({remote:url,container:containerId,props:{style:{width:"100%",height:"100%"}},onMessage:function(message,origin){var json={type:"unknown"};try{json=JSON.parse(message);if(json.type=="resize"){if(json.height>200){CNJQ(".cn-bn-wig-inline").css("height",json.height+"px")}}else{if(json.type=="launch"){CNPC.launchWidget(json.url)}}}catch(e){this.logError("easyXDM.onMessage",e.message,json,e,true)}}})},launchWidget:function(url){var containerId="cn_full_page_widget";if(CNJQ(".cn-full-page-widget").length==0){CNJQ("body").append('<div id="'+containerId+'" class="cn-full-page-widget" style="position:fixed;top:0;bottom:0;left:0;right:0;"></div>')}var me=this;var url=me.options.bnUrl+url;this.widgetFrame=new easyXDM.Socket({remote:url,container:containerId,props:{style:{width:"100%",height:"100%"}},onMessage:function(message,origin){var json={type:"unknown"};try{json=JSON.parse(message);if(json.type=="syncEvent"){if(CNPC.bnInlineWidget){CNPC.bnInlineWidget.postMessage(message)}}else{if(json.type=="close_widget"){CNPC.widgetFrame.destroy();CNPC.widgetFrame=null;CNJQ("#cn_full_page_widget").remove()}else{if(json.type=="contact_saved"){if(CNPC.bnInlineWidget){CNPC.bnInlineWidget.postMessage(message)}}}}}catch(e){this.logError("easyXDM.onMessage",e.message,json,e,true)}}})},getBnParams:function(btn){if(btn==null||btn==undefined){return""}if(CNJQ(btn).parents(".cn-buynow-calc1:first").length>0){var parentDom=CNJQ(btn).parents(".cn-buynow-calc1:first");var downPayment=CNJQ(parentDom).find(".cn-bn-param-down:first").val();var leaseTerm=CNJQ(parentDom).find(".cn-bn-param-lease-term:first").val();var leaseMiles=CNJQ(parentDom).find(".cn-bn-param-lease-miles:first").val();var aprTerm=CNJQ(parentDom).find("cn-bn-param-apr-term:first").val();var payType=CNJQ(parentDom).find(".cn-bn-calc1--tab.active").attr("data-pay-type");var tradeIn=CNJQ(parentDom).find(".cn-bn-param-tradein:first").val();var creditTier=CNJQ(parentDom).find(".cn-bn-param-credit:first").val();if(downPayment){CNJQ(btn).attr("data-bndp",downPayment)}if(leaseTerm){CNJQ(btn).attr("data-bnlt",leaseTerm)}if(leaseMiles){CNJQ(btn).attr("data-bnlm",leaseMiles)}if(aprTerm){CNJQ(btn).attr("data-bnat",aprTerm)}if(payType){CNJQ(btn).attr("data-bnpt",payType)}if(creditTier){CNJQ(btn).attr("data-bnct",creditTier)}}var p="";var attrs=["bnpt","bnlt","bnlm","bnat","bndp","bnct"];for(var i=0;i<attrs.length;i++){if(CNJQ(btn).attr("data-"+attrs[i])){p+="&"+attrs[i]+"="+CNPC.cleanupParamsValue(CNJQ(btn).attr("data-"+attrs[i]))}}p+=this.getChatParams(btn);return p},getChatParams:function(btn,params){if(params==undefined){params={}}var me=this;var chatParams="";var btnIdx=CNJQ(btn).attr("data-index");if(btnIdx=="11"){params.question=CNJQ("#cn-poke-ans").val()}if(window.localStorage[this.PERQDataKey]){var PERQData=JSON.parse(window.localStorage[this.PERQDataKey]);params.ccn=params.ccn||PERQData.FirstName+" "+PERQData.LastName;params.cce=params.cce||PERQData.Email;params.ccp=params.ccp||PERQData.Phone;params.ccmp=params.ccmp||PERQData.Phone}if(this.additionalChatParams.dept&&!params.dept){params.dept=this.additionalChatParams.dept}else{if(this.departmentId&&!params.dept){params.dept=this.departmentId}}if(this.question&&!params.question){params.question=this.question}if(CNPC.srpInventoryView){params.context_page="search_now"}if(btn&&CNJQ(btn).attr("data-input-fld")){params.q=CNJQ(CNJQ(btn).attr("data-input-fld")).val()}if(btn&&CNJQ(btn).attr("data-poke-id")){params.poke=CNJQ(CNJQ(btn).attr("data-poke-id")).val()}if(params){Object.keys(params).forEach(function(key){if(params[key]){var value=CNPC.cleanupParamsValue(params[key]);chatParams+="&"+encodeURIComponent(key)+"="+value}})}if(CNPC.contact){Object.keys(CNPC.contact).forEach(function(key){if(CNPC.contact[key]){var value=CNPC.cleanupParamsValue(CNPC.contact[key]);chatParams+="&"+encodeURIComponent(key)+"="+value}})}if(CNPC.additionalChatParams){Object.keys(CNPC.additionalChatParams).forEach(function(key){if(CNPC.additionalChatParams[key]){var value=CNPC.cleanupParamsValue(CNPC.additionalChatParams[key]);chatParams+="&"+encodeURIComponent(key)+"="+value}})}if(me.paramMappings){for(var i=0;i<me.paramMappings.length;i++){var val=null;var pDef=me.paramMappings[i];if(pDef.css){val=CNJQ(pDef.css).text()}if(pDef.js){val=eval(pDef.js)}if(val){chatParams+="&"+pDef.key+"="+CNPC.cleanupParamsValue(val)}}}chatParams+="&src="+CNPC.cleanupParamsValue(window.location.href);var clickIdx=btnIdx;chatParams+="&click="+(clickIdx?clickIdx:0);chatParams+="&vstid="+this.visitorId;chatParams+="&__cnvisid="+this.visitorId;if(me.isEmbedded){chatParams+="&embedded=1"}return chatParams},cleanupParamsValue:function(val){var v=encodeURIComponent(val);return v.replace("'","%27")},openLinkInMode:function(linkInfo){var url=linkInfo.link;if(linkInfo.mode==1){window.open(url,"_blank")}else{if(linkInfo.mode==2){window.open(url,"CarNowChatLink","height=600, width=500,left=30,top=30,menubar=no,location=no,scrollbars=no,status=no,toolbar=no")}else{if(linkInfo.mode==3){window.location.href=url}}}},setupChatLite:function(url){var me=this;url+="&frame=1&view=lite";CNJQ.ajax({url:url,headers:{"CN-Vst-ID":this.visitorId},dataType:"jsonp",success:function(data){try{me.chatLiteIsSetup=true;me.chatAccessToken=data.token;logSvcCfg=typeof data.config=="string"?JSON.parse(data.config):data.config;me.initChatLite(me.options.baseUrl,me.chatAccessToken,{config:logSvcCfg,extLogSvc:data.ext_log_svc,isOpen:!me.initialInSession})}catch(ex){CNPC.logError("setupChatLite","failed",{http_data:data},ex)}}});CNJQ(".cn-live-bubble").addClass("cnc-lite-container")},initChatLite:function(baseUrl,chatAccessToken,options){var me=this;try{cnChatClient=new CNChatLite(baseUrl,chatAccessToken,options)}catch(e){var errDesc=e.message?e.message:e.description;if(errDesc.indexOf("CNChatLite")>-1){setTimeout(function(){me.initChatLite(baseUrl,chatAccessToken,options)},2000)}}},openChatLite:function(url){CNJQ("body").on("touchmove",function(){return cnChatClient.isMessageNotEdit});if(cnChatClient&&!this.isGroup){cnChatClient.openWindow()}else{if(cnChatClient&&this.isGroup&&this.lastButtonClicked.dataset.did==cnChatClient.chatSession.customer.org_id){cnChatClient.openWindow()}else{CNJQ(".cn-chat-container").removeClass("cn-minimized");CNJQ(".cn-chat-container").show()}}},removeAllWidgets:function(){if(!this.stickyButtons){CNJQ(CNPC.getWidgetClass(true)).each(function(){if(!CNJQ(this).hasClass("cn-do-not-remove")&&CNJQ(this).find(".cn-do-not-remove").length==0){CNJQ(this).remove()}})}},showWishlistButton:function(){if(!this.stickyButtons){CNJQ("#cncbbncart").show();this.removeAllWidgets()}else{CNJQ(".cn-b13-buynow").removeClass("cn-b13-hide")}},showWishlist:function(){this.hidePrompts();CNJQ(".cn-b13-buynow").addClass("cn-b13-hide");CNJQ(".cn-b13-btn").addClass("cn-b13-disabled");CNJQ(".cn-b13-x-buynow").removeClass("cn-b13-disabled");CNJQ(".cn-b13-x-buynow").removeClass("cn-b13-hide");CNJQ(".cn-wl-container").show()},hideWishlist:function(){CNJQ(".cn-b13-btn").removeClass("cn-b13-disabled");CNJQ(".cn-b13-buynow").removeClass("cn-b13-hide");CNJQ(".cn-b13-x-buynow").addClass("cn-b13-hide");CNJQ(".cn-wl-container").hide();CNJQ(".cn-wl-container").hide()},checkForPoke:function(afterInterval){if(window.localStorage&&window.localStorage.getItem(CNPC.options.orgId+"_pk_disable")=="1"){return}var me=this;this.pokeCheckTimer=setTimeout(function(){var pokeUrl=me.options.baseUrl+me.options.orgBaseUrl+"/poke_check?o="+me.options.orgId+"&uvid="+me.visitorId+"&__cnvisid="+me.visitorId;CNJQ.ajax({url:pokeUrl,type:"GET",success:function(data){try{if(data.pkid&&!me.inSession){CNJQ("body").append('<div id="cn_poke_wig" class="'+CNPC.getWidgetClass()+' cn-wid-cont cn-wid-poke"></div>');CNJQ("#cn_poke_wig").html(data.html);me.showPrompt(null,"#cnpoke");CNJQ(".cn-b13-btn").removeClass("cn-b13-disabled");if(!CNJQ(".cn-b13-buynow").hasClass("cn-b13-hide")){CNJQ(".cn-b13-btn").removeClass("cn-b13-hide")}else{CNJQ(".cn-b13-chat").removeClass("cn-b13-hide");CNJQ(".cn-b13-text").removeClass("cn-b13-hide");CNJQ(".cn-b13-offers").removeClass("cn-b13-hide")}CNJQ(".cn-b13-x").addClass("cn-b13-hide")}}catch(ex){CNPC.logError("poke_check","failed",{http_data:data},ex)}}})},afterInterval*1000)},cancelPokeCheck:function(){if(this.pokeCheckTimer){clearTimeout(this.pokeCheckTimer);this.pokeCheckTimer=null}},closePokeDialog:function(){CNPC.closeWidget("#cnpoke");var permClose=CNJQ("#cnpoke").attr("data-perm-close");if(permClose=="1"){if(window.localStorage){window.localStorage.setItem(CNPC.options.orgId+"_pk_disable","1")}}},showPrompt:function(el,selector,options){if(selector.indexOf("sms")>=0){this.cancelPokeCheck();if(this.isChatRequestLite&&selector.indexOf("sms")>=0){this.toggleText();return false}}if(!(options&&options.inlinePrompt)){this.hidePrompts()}if(CNJQ(el).hasClass("cn-sms-app")&&this.smsNativeAppHref){window.location.href=this.smsNativeAppHref;return}CNJQ(selector+" .cn-widget-prompt").show();this.fitInWindow(selector);if(options&&options.centered){CNPC.centerToWindow(selector);CNJQ(selector).find("img").on("load",function(){CNPC.centerToWindow(selector)})}if(this.animations[selector]){CNJQ(selector).addClass(this.animations[selector].ani[0]);CNJQ(selector).addClass("cn-animated")}CNJQ(selector).show()},fitInWindow:function(selector){var height=CNJQ(selector).height();var winHeight=CNJQ(window).height();if(height+54>winHeight){CNJQ(selector).css("height",(winHeight-64)+"px");CNJQ(selector).css("overflow-y","auto");CNJQ(selector+" .cn-restrictions").css("height","47px")}},centerToWindow:function(selector){CNJQ(selector).addClass("cn-wig-centered")},showSmsForm:function(){if(this.interSocket){this.interSocket.postMessage(JSON.stringify({event:{type:"show_sms_form"}}))}},hidePrompts:function(){CNJQ(".cn-widget-prompt").hide();CNJQ(".cn-b13-btn").removeClass("cn-b13-disabled");CNJQ(".cn-b13-chat").removeClass("cn-b13-hide");CNJQ(".cn-b13-x-chat").addClass("cn-b13-hide")},closeWidget:function(selector){CNJQ(selector).hide()},setProp:function(key,value){this.setCookie(key,value)},getProp:function(name){return this.getCookie(name)},setCookie:function(name,value){if(value){name=this.options.cookiePrefix+name;var sameSite=window.location.protocol=="https:";document.cookie=name+"="+value+"; expires="+new Date(new Date().getTime()+2000*30*60000).toGMTString()+"; path=/;"+(sameSite?"SameSite:None;Secure;":"")}},getCookie:function(name){if(this.ctxGroupDealerId){name=this.ctxGroupDealerId+name}else{name=this.options.cookiePrefix+name}var nameEQ=name+"=",ca=document.cookie.split(";"),i,c;for(i=0;i<ca.length;i++){c=ca[i];while(c.charAt(0)==" "){c=c.substring(1,c.length);2480}if(c.indexOf(nameEQ)==0){return c.substring(nameEQ.length,c.length)}}return null},loadCSS:function(url,media){var cssMedia=media||"screen";var cnHead=document.getElementsByTagName("head")[0];var cnCss=document.createElement("link");cnCss.href=url;cnCss.type="text/css";cnCss.rel="stylesheet";cnCss.media="only x";cnHead.appendChild(cnCss,cnHead);setTimeout(function(){cnCss.media=cssMedia})},loadJS:function(url,onLoadCallback){CarNowPlugin.loadJS(url,onLoadCallback)},hashToParams:function(params){if(!params){return""}var s="";Object.keys(params).forEach(function(key){var value=params[key];s+="&"+encodeURIComponent(key)+"="+(value==null?"":encodeURIComponent(value))});return s},openChatInFrame:function(url,options){this.cancelPokeCheck();this.hidePrompts();if(options==undefined){options={}}var containerId=this.customChatContainerId||"cn_chat_container";var jqContainerId="#"+containerId;CNJQ(jqContainerId).removeClass("cn-bn-slide");CNJQ(jqContainerId).addClass("cn-chat-container");if(options.containerClass&&options.containerClass.indexOf("cn-bn-slide")>=0){CNJQ(jqContainerId).addClass("cn-cookie-banner-bottom")}else{CNJQ(jqContainerId).addClass("cn-cookie-banner-offset")}CNJQ(jqContainerId).removeClass("cn-bn-slide-out");CNJQ(jqContainerId).removeClass("cn-minimized");if(this.isEmbedded){CNJQ(jqContainerId).addClass("cn-embedded")}CNJQ(jqContainerId).show();if(url.indexOf("&min=1")>0){CNJQ(jqContainerId).addClass("cn-minimized");CNJQ(jqContainerId).addClass("cn-bn-minimized")}else{if(!options.fullPage&&!this.isEmbedded){var windowHeight=CNJQ(window).height()-10;if(CNPC.isChatRequestLite){if(!CNJQ(".cn-b13-container").hasClass("cn-b13-vertical")){var bH=CNJQ(".cn-b13-container").height();windowHeight-=bH}}else{if(CNPC.stickyButtons){windowHeight-=84}else{if(CNPC.group){windowHeight-=44}}}if(CNJQ(jqContainerId).height()>windowHeight&&!options.fullHeight&&!CNPC.mobile){if(this.cookieBannerHeight>0){windowHeight-=this.cookieBannerHeight}if(CNPC.stickyButtons){windowHeight-=84}setTimeout(function(){CNJQ(jqContainerId).css("height",windowHeight+"px")},50)}else{CNJQ(jqContainerId).addClass("cn-cookie-banner-bottom")}}if(options.width){CNJQ(jqContainerId).css("width",options.width+"px");CNJQ(jqContainerId).css("maxWidth","100%")}}if(CNPC.srpInventoryView){CNJQ(jqContainerId).addClass("cn-sn-page")}if(options.fullHeight){CNJQ(jqContainerId).removeClass("cn-sticky")}if(options.containerClass){CNJQ(jqContainerId).addClass(options.containerClass);if(CNPC.options.settings.chat_icon_align_left&&options.containerClass.indexOf("cn-bn-slide")<0){CNJQ(jqContainerId).addClass("cn-chat-container--left")}else{if(options.containerClass.indexOf("cn-bn-slide")>=0){CNJQ(jqContainerId).removeClass("cn-chat-container--left")}}}else{if(CNPC.options.settings.chat_icon_align_left){CNJQ(jqContainerId).addClass("cn-chat-container--left")}}if(this.interSocket!=null){this.interSocket.destroy();if(!options.bnDeal){CNJQ(jqContainerId).css("width","")}CNJQ(jqContainerId).css("height","");CNJQ(jqContainerId).removeClass("cn-minimized");CNJQ(jqContainerId).removeClass("cn-bn-minimized")}CNPC.initChatFrame(url);var iframeContext={default1:"Dialog window",chat:"Chat window",bn_widget:"Calculate your payment",bn_deal:"Configure your deal"};if(CNJQ(jqContainerId)){CNJQ(jqContainerId).attr({role:"dialog",tabindex:0});var chatContainer=CNJQ(jqContainerId);var iframe=CNJQ("iframe",chatContainer);var iframeLabel=(options.context)?iframeContext[options.context]:iframeContext.default1;iframe.attr("aria-label",iframeLabel);CNJQ(jqContainerId).show()}},initChatFrame:function(url){var containerId=CNPC.customChatContainerId||"cn_chat_container";this.interSocket=new easyXDM.Socket({remote:url,container:containerId,props:{allow:"camera *; microphone *;",title:"Chat",name:"Chat"},onMessage:function(message,origin){var containerId=CNPC.customChatContainerId||"cn_chat_container";var jqContainerId="#"+containerId;try{json=JSON.parse(message);if(json.type=="expand_to_full"){CNJQ(jqContainerId).stop(true);CNJQ(jqContainerId).css("width","");CNJQ(jqContainerId).css("height","");CNJQ(jqContainerId).removeClass("cn-minimized");CNJQ(jqContainerId).removeClass("cn-bn-minimized");var windowHeight=CNJQ(window).height()-10;if(CNPC.stickyButtons){windowHeight-=84}else{if(CNPC.group){windowHeight-=44}}if(CNJQ(jqContainerId).height()>windowHeight&&!CNPC.mobile){CNJQ(jqContainerId).css("height",windowHeight+"px")}CNJQ(".cn-b13-chat").addClass("cn-b13-hide");CNJQ(".cn-b13-btn").addClass("cn-b13-disabled");CNJQ(".cn-b13-x-chat").removeClass("cn-b13-disabled");CNJQ(".cn-b13-x-chat").removeClass("cn-b13-hide");CNJQ(".cn-b13-chat .cn-b13-dot").hide()}else{if(json.type=="collapse_to_minimum"){if(CNPC.group&&!CNPC.sticky){CNJQ(jqContainerId).css("width","");CNJQ(jqContainerId).css("height","");CNJQ(jqContainerId).hide();CNPC.interSocket.destroy();CNPC.interSocket=null}else{setTimeout(function(){CNJQ(jqContainerId).css("height","");CNJQ(jqContainerId).css("width","");CNJQ(jqContainerId).addClass("cn-minimized");CNJQ(jqContainerId).addClass("cn-bn-minimized")},100)}CNJQ(".cn-b13-btn").removeClass("cn-b13-disabled");CNJQ(".cn-b13-chat").removeClass("cn-b13-hide");CNJQ(".cn-b13-x-chat").addClass("cn-b13-hide");CNJQ(".cn-b13-chat .cn-b13-dot").hide();CNJQ(jqContainerId).attr("tabindex",-1)}else{if(json.type=="launch_chat"){CNPC.toggleChat()}else{if(json.type=="change_width"){if(!CNJQ(jqContainerId).hasClass("cn-full-page")&&!CNPC.mobile){var parentWindowWidth=CNJQ(window).width();if(json.width>parentWindowWidth){json.width=parentWindowWidth}CNJQ(jqContainerId).animate({width:json.width},500)}}else{if(json.type=="close_extension"&&!CNPC.mobile){if(!CNJQ(jqContainerId).hasClass("cn-full-page")){CNJQ(jqContainerId).animate({width:500},500)}}else{if(json.type=="resize_container"){if(CNJQ(jqContainerId).hasClass("cn-minimized")){CNJQ(jqContainerId).animate({width:json.width,height:json.height},500)}}else{if(json.type=="change_bn_car"){CNPC.interSocket.destroy();CNPC.interSocket=null;var url=CNPC.options.bnUrl+json.url+"?vstid="+CNPC.visitorId;CNPC.launchBN(null,json.vin)}else{if(json.type=="switch_to_buynow"){CNJQ(jqContainerId).css("width","");CNJQ(jqContainerId).css("height","");CNJQ(jqContainerId).hide();CNPC.interSocket.destroy();CNPC.interSocket=null;CNPC.launchBuyNow(null,null,json.vin,null,null,null,null,false,json.params)}else{if(json.type=="start_bn_deal"){var bnUrl=CNPC.options.bnUrl+json.url;CNPC.openChatInFrame(bnUrl,{containerClass:"cn-bn-slide",fullHeight:true});CNJQ(jqContainerId).removeClass("cn-chat-container--left");setTimeout(function(){CNPC.loadVisitorInfo({bn:true})},4000)}else{if(json.type=="bn_mini_loaded"){CNPC.loadVisitorInfo({bn:true})}else{if(json.type=="add_vin_bn_deals"){var vin=json.vin;if(vin!==undefined){CNPC.buynow.cart.vin=vin;CNPC.tempvin=vin;if(CNPC.buynow.cart.deals.indexOf(vin)<0){CNPC.buynow.cart.deals.push(vin)}}}else{if(json.type=="close_bn_widget"){CNJQ(jqContainerId).addClass("cn-bn-slide-out");CNJQ(jqContainerId).attr("tabindex",-1);CNJQ(jqContainerId).removeClass("cn-bn-deal");CNJQ(jqContainerId).css("width","");setTimeout(function(){CNPC.interSocket.destroy();CNPC.interSocket=null;if(CNPC.buynowConfig.no_deal_flow){CNPC.launchChatInternal(CNPC.options.settings.access_key,null,{},{fromInit:true});if(CNPC.mobile){CNJQ(".cn-chat-container").addClass("cn-minimized")}}},1000)}else{if(json.type=="close_protectnow"){CNJQ(jqContainerId).css("width","");CNJQ(jqContainerId).removeClass("cn-protect-container");CNPC.interSocket.destroy();CNPC.interSocket=null;CNPC.launchChatInternal(CNPC.options.settings.access_key,null,{},{fromInit:true});if(CNPC.mobile){CNJQ(".cn-chat-container").addClass("cn-minimized")}}else{if(json.type=="session_init"){if(CNPC.trackingPixel){CNPC.trackingPixel.postMessage(JSON.stringify({type:"connect"}))}}else{if(json.type=="sync_apps"){CNPC.inSession=true;if(CNPC.srpWindow){CNPC.loadSearchNow()}}else{if(json.type=="sync_apps"){if(CNPC.srpWindow){CNPC.loadSearchNow()}}else{if(json.type=="hide_all_widgets"){CNJQ(CNPC.getWidgetClass(true)).addClass("cn-widget-hide")}else{if(json.type=="show_all_widgets"){CNJQ(".cn-widget-hide").removeClass("cn-widget-hide")}else{if(json.type=="data_layer"){_sendCustomAnalyticEvent(json.event_data)}else{if(json.type=="post_top_win_message"){var mDomain=json.message._domain;if(mDomain){delete json.message._domain;window.postMessage(JSON.stringify(json.message),mDomain)}else{window.postMessage(JSON.stringify(json.message))}}else{if(json.type=="ext_listener_event"){CNPC.addListenerEvent(json.message)}else{if(json.type=="update_insession_status"){CNPC.inSession=json.inSession}}}}}}}}}}}}}}}}}}}}}}}catch(e){}}})},refreshBNPaymentsDebounced:function(){var me=this;if(this.refreshBNPaymentsDebouncedTimeout){clearTimeout(this.refreshBNPaymentsDebouncedTimeout)}this.refreshBNPaymentsDebouncedTimeout=setTimeout(function(){CNPC.refreshBNPayments()},1000)},refreshBNPayments:function(initializing){var me=this;var vins=[];if(me.buynowPaymentData==null){me.buynowPaymentData={}}CNJQ(".cn-buynow-pw").each(function(){var vin=CNJQ(this).attr("data-vin");if(vin&&vins.indexOf(vin)<0){if(me.buynowPaymentData[vin]==null){vins.push(vin)}}});if(vins.length>0){var params={moneyDown:CNJQ(".cn-bn-param-down").val()||0,tradeInValue:CNJQ(".cn-bn-param-tradein").val()||0,tradeInPayoff:CNJQ(".cn-bn-param-payoff").val()||0,tier:CNJQ(".cn-bn-param-credit").val()};var payType=CNJQ(".active[data-pay-type]").attr("data-pay-type");if(payType){params.payType=payType}var filters={leaseTerm:CNJQ(".cn-bn-param-lease-term").val(),leaseMiles:CNJQ(".cn-bn-param-lease-miles").val(),aprTerm:CNJQ(".cn-bn-param-apr-term").val(),tier:CNJQ(".cn-bn-param-credit").val()};if(initializing){params={};filters={}}var batchSize=10;var vinBuckets=[];for(var i=0;i<vins.length;i+=batchSize){vinBuckets.push(vins.slice(i,i+batchSize))}for(var i=0;i<vinBuckets.length;i++){var vinList=vinBuckets[i];var queryParams={vstid:this.visitorId,vins:vinList,key:me.options.settings.access_key,filters:filters,calc_params:params,meta:me.metaLoaded,unlocked:(me.isUnlocked?"y":"n")};CNJQ.ajax({url:me.buynowConfig.payments_domain+"/app/bn/payments",data:queryParams,type:"POST",headers:{"X-CSRF-Token":me.csrfToken},success:function(data){me.setPaymentData(data.payments,data.calc_params,data.meta,data.filters,data.disclaimers)}})}}else{me.setPaymentData([])}},setPaymentData:function(payments,calc_params,meta,filters,disclaimers){var me=this;var currentPaymentData=[];for(var k in me.buynowPaymentData){currentPaymentData.push(me.buynowPaymentData[k])}var leaseTermSelected=null;var leaseMilesSelected=null;var aprTermSelected=null;for(var i=0;i<payments.length;i++){currentPaymentData.push(payments[i])}for(var i=0;i<currentPaymentData.length;i++){var payment=currentPaymentData[i];me.buynowPaymentData[payment.vin]=payment;var leasesAvailable=false;var aprAvailable=false;CNJQ(".cn-buynow-pw[data-vin='"+payment.vin+"']").each(function(){var noLease=false;var noApr=false;var el=CNJQ(this);el.attr("tabindex",0);el.attr("aria-label",el.attr("data-name"));el.attr("role","button");if(payment.lease&&payment.lease.monthly_payment>0){el.find(".cn-pay-amt-lease").text(payment.lease_f);el.attr("data-bndp",payment.lease.down_payment);el.attr("data-bnlt",payment.lease.offer.term);el.attr("data-bnlm",payment.lease.offer.miles);el.find(".cn-pay-amt-lease").closest(".cn-bn-payments").find(".cn-bn-lease-cell").show();el.find(".cn-pay-amt-lease").closest(".cn-bn-lease-cell").show();el.show();leasesAvailable=true;if(payments.length==1){leaseTermSelected=payment.lease.offer.term;leaseMilesSelected=payment.lease.offer.miles}}else{noLease=true;el.find(".cn-pay-amt-lease").closest(".cn-bn-payments").find(".cn-bn-lease-cell").hide();el.find(".cn-pay-amt-lease").closest(".cn-bn-lease-cell").hide();if(el.find(".cn-pay-amt-apr").length==0){el.hide()}}if(payment.apr&&payment.apr.monthly_payment>0){el.find(".cn-pay-amt-apr").text(payment.apr_f);el.attr("data-bndp",payment.apr.down_payment);el.attr("data-bnat",payment.apr.offer.term);el.find(".cn-pay-amt-apr").closest(".cn-bn-payments").find(".cn-bn-apr-cell").show();el.find(".cn-pay-amt-apr").closest(".cn-bn-apr-cell").show();el.show();aprAvailable=true;if(payments.length==1){aprTermSelected=payment.apr.offer.term}}else{noApr=true;el.find(".cn-pay-amt-apr").closest(".cn-bn-payments").find(".cn-bn-apr-cell").hide();el.find(".cn-pay-amt-apr").closest(".cn-bn-apr-cell").hide();if(el.find(".cn-pay-amt-lease").length==0){el.hide()}}if(el.hasClass("cn-buynow-b2")){el.attr("aria-label",function(){var paymentsLabel="";if(leasesAvailable){paymentsLabel+=el.find(".cn-bn-lease-cell").eq(0).text()+" "+el.find(".cn-bn-lease-cell").slice(2).text()+" "}if(aprAvailable){paymentsLabel+=el.find(".cn-bn-apr-cell").eq(1).text()+" "+el.find(".cn-bn-apr-cell").slice(3).text()+" "}return me.settings.bn_opens_new_window+paymentsLabel.trim()+". "+el.find("[class$=--text]").text()})}else{el.attr("aria-label",me.settings.bn_opens_new_window+el.text())}el.find(".cn-bn-payments").slideDown();if(noLease||noApr){el.find(".cn-bn-lease-cell.cn-bn-apr-cell .cn-btn-bn2--middle").hide()}if(noLease&&el.find(".cn-pay-amt-apr").length==0&&!el.hasClass("cn-buynow-b1")){el.hide()}if(noApr&&el.find(".cn-pay-amt-lease").length==0&&!el.hasClass("cn-buynow-b1")){el.hide()}if(leasesAvailable||aprAvailable){var disclaimer="";if(disclaimers){if(leasesAvailable){disclaimer+=disclaimers.lease+" "}if(aprAvailable){disclaimer+=disclaimers.apr+" "}disclaimer+=disclaimers.general}if(leasesAvailable){var leaseDownPayment=payment.lease.down_payment?""+payment.lease.down_payment:"0";disclaimer=disclaimer.replace(/{lease_down_payment}/g,leaseDownPayment);disclaimer=disclaimer.replace(/{lease_term}/g,payment.lease.offer.term);disclaimer=disclaimer.replace(/{lease_miles}/g,payment.lease.offer.miles);disclaimer=disclaimer.replace(/{lease_sum_of_total_payments}/g,Math.round(payment.lease.total_payment));disclaimer=disclaimer.replace(/{deposit_amount}/g,payment.lease.deposit_amount);disclaimer=disclaimer.replace(/{cap_cost_reduction}/g,Math.round(payment.lease.net_cap_cost_reduction));disclaimer=disclaimer.replace(/{net_cap_cost}/g,Math.round(payment.lease.net_cap_cost));disclaimer=disclaimer.replace(/{lease_mile_rate}/g,payment.lease.mile_rate);disclaimer=disclaimer.replace(/{lease_disposition}/g,Math.round(payment.lease.disposition));disclaimer=disclaimer.replace(/{lease_expires}/g,payment.lease.expires)}if(aprAvailable){var financeDownPayment=payment.apr.down_payment?""+payment.apr.down_payment:"0";disclaimer=disclaimer.replace(/{apr_down_payment}/g,financeDownPayment);var aprRate=payment.apr.offer.rate?""+payment.apr.offer.rate:"0.0";disclaimer=disclaimer.replace(/{apr_rate}/g,aprRate);disclaimer=disclaimer.replace(/{apr_term}/g,payment.apr.offer.term);disclaimer=disclaimer.replace(/{apr_sum_of_total_payments}/g,Math.round(payment.apr.total_payment));disclaimer=disclaimer.replace(/{deposit_amount}/g,payment.apr.deposit_amount)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var d=new Date();var today_date=[months[d.getMonth()],d.getDate(),d.getFullYear()].join(", ");disclaimer=disclaimer.replace(/{today_date}/g,today_date);disclaimer=disclaimer.replace(/{vehicle_display_price}/g,payment.vehicle_prices.display);disclaimer=disclaimer.replace(/{vehicle_msrp}/g,payment.vehicle_prices.msrp);disclaimer=disclaimer.replace(/{vehicle_lease_price}/g,payment.prices.lease);disclaimer=disclaimer.replace(/{vehicle_apr_price}/g,payment.prices.apr);disclaimer=disclaimer.replace(/{vehicle_cash_price}/g,payment.prices.cash);disclaimer=disclaimer.replace(/{vehicle_price}/g,payment.vehicle_prices.price);disclaimer=disclaimer.replace(/{vehicle_internet_price}/g,payment.vehicle_prices.internet);disclaimer=disclaimer.replace(/{vehicle_bn_price}/g,payment.vehicle_prices.bn);disclaimer=disclaimer.replace(/{vehicle_misc_price1}/g,payment.vehicle_prices.misc_1);disclaimer=disclaimer.replace(/{vehicle_misc_price2}/g,payment.vehicle_prices.misc_2);disclaimer=disclaimer.replace(/{vehicle_misc_price3}/g,payment.vehicle_prices.misc_3);disclaimer=disclaimer.replace(/{vehicle_unlocked_price}/g,payment.vehicle_prices.unlocked);disclaimer=disclaimer.replace(/{vehicle_locked_price}/g,payment.vehicle_prices.locked);CNJQ(this).attr("title",disclaimer)}})}CNJQ(".cn-bn-payments").removeClass("cn-not-rendered");CNJQ(".cn-bn-el-type").hide();if(calc_params){var payTypeSelected=calc_params.payType||100;if(payTypeSelected==100&&!leasesAvailable){payTypeSelected=200}else{if(payTypeSelected==200&&!aprAvailable){payTypeSelected=100}}CNJQ(".cn-bn-action").attr("data-bnpt",payTypeSelected);CNJQ(".cn-bn-el-type-"+payTypeSelected).show();CNJQ("[data-pay-type]").removeClass("active");CNJQ("[data-pay-type='"+payTypeSelected+"']").addClass("active");if(meta&&!me.metaLoaded){me.metaLoaded=true;CNJQ(".cn-bn-param-lease-term").html("");CNJQ(".cn-bn-param-lease-term").append('<option value=""></option>');for(var i=0;i<meta.lease_terms.length;i++){var opt=meta.lease_terms[i];CNJQ(".cn-bn-param-lease-term").append('<option value="'+opt.value+'">'+opt.label+"</option>")}CNJQ(".cn-bn-param-lease-miles").html("");CNJQ(".cn-bn-param-lease-miles").append('<option value=""></option>');for(var i=0;i<meta.lease_miles.length;i++){var opt=meta.lease_miles[i];CNJQ(".cn-bn-param-lease-miles").append('<option value="'+opt.value+'">'+opt.label+"</option>")}CNJQ(".cn-bn-param-apr-term").html("");CNJQ(".cn-bn-param-apr-term").append('<option value=""></option>');for(var i=0;i<meta.apr_terms.length;i++){var opt=meta.apr_terms[i];CNJQ(".cn-bn-param-apr-term").append('<option value="'+opt.value+'">'+opt.label+"</option>")}CNJQ(".cn-bn-param-credit").html("");CNJQ(".cn-bn-param-credit").append('<option value=""></option>');for(var i=0;i<meta.credit_tiers.length;i++){var opt=meta.credit_tiers[i];CNJQ(".cn-bn-param-credit").append('<option value="'+opt.id+'">'+opt.description+"</option>")}CNJQ(".cn-bn-param-credit").val(calc_params.tier);CNJQ(".cn-bn-param-down").val(calc_params.moneyDown);CNJQ(".cn-bn-param-tradein").val(calc_params.tradeInValue);CNJQ(".cn-bn-param-payoff").val(calc_params.tradeInPayoff);if(filters){CNJQ(".cn-bn-param-lease-term").val(filters.leaseTerm);CNJQ(".cn-bn-param-lease-miles").val(filters.leaseMiles);CNJQ(".cn-bn-param-apr-term").val(filters.aprTerm)}if(leaseTermSelected){CNJQ(".cn-bn-param-lease-term").val(leaseTermSelected)}if(leaseMilesSelected){CNJQ(".cn-bn-param-lease-miles").val(leaseMilesSelected)}if(aprTermSelected){CNJQ(".cn-bn-param-apr-term").val(aprTermSelected)}}}},showContactForm:function(selector,data,hideElements){if(data){this.contact=data}else{this.contact={}}this.cancelPokeCheck();this.showPrompt(null,selector,{inlinePrompt:true});if(hideElements){for(var i=0;i<hideElements.length;i++){CNJQ(hideElements[i]).hide()}}},closeContactForm:function(selector,showElements){this.closeWidget(selector,true);if(showElements){for(var i=0;i<showElements.length;i++){CNJQ(showElements[i]).show()}}},showOfferContactForm:function(element){CNJQ(element).closest(".cn-advd-box").addClass("cn-advd-contact");CNJQ(element).closest(".cn-advd-container").addClass("cn-advd-contact-open");CNJQ(element).closest(".cn-advd-container").addClass("cn-advd-contact-open");CNJQ(".cn-advd-container").removeClass("cn-advd-full");CNJQ(".cn-advd-container .cn-advd-box").addClass("cn-advd-hidden");CNJQ(".cn-advd-container .cn-advd-box").addClass("cn-advd-more");CNJQ(element).closest(".cn-advd-box").removeClass("cn-advd-hidden");CNJQ(element).closest(".cn-advd-box").removeClass("cn-advd-more");CNJQ(element).closest(".cn-advd-container").find(".cn-advd-contents-body").animate({scrollTop:300000},100)},submitContactForm:function(btn,formId,options,params){var errors=[];var me=this;var name=CNJQ(formId+"_name").val();var mobile=CNJQ(formId+"_mobile").val();var phone=CNJQ(formId+"_phone").val();var email=CNJQ(formId+"_email").val();if(!name&&options.required.indexOf("name")>-1){errors.push({attr:"name",message:"Please provide a name"})}if(!mobile&&options.required.indexOf("mobile")>-1){errors.push({attr:"mobile",message:"Please provide a mobile phone"})}if(mobile&&!CNPC.validPhone(mobile)){errors.push({attr:"mobile",message:"Invalid phone number"})}if(!phone&&options.required.indexOf("phone")>-1){errors.push({attr:"phone",message:"Please provide a phone number"})}if(phone&&!CNPC.validPhone(phone)){errors.push({attr:"phone",message:"Invalid phone number"})}if(!email&&options.required.indexOf("email")>-1){errors.push({attr:"email",message:"Please provide an email"})}if(email&&!CNPC.validEmail(email)){errors.push({attr:"email",message:"Invalid email address"})}for(var i=0;i<options.required.length;i++){var field=options.required[i];var lblId=formId+"_"+field+"_lbl";CNJQ(lblId).hide();CNJQ(formId+"_"+field).css("cssText","")}for(var i=0;i<errors.length;i++){var err=errors[i];var lblId=formId+"_"+err.attr+"_lbl";CNJQ(lblId).text(err.message);CNJQ(lblId).css("color","#BB0000");CNJQ(lblId).show();CNJQ(formId+"_"+err.attr).css("cssText","border-color:#BB0000 !important")}if(errors.length==0){if(!this.contact){this.contact={}}if(options.params){Object.keys(options.params).forEach(function(key){var value=options.params[key];me.contact[key]=value})}this.contact.ttc=CNJQ(formId+"_ttc").val();this.contact.ccn=name;this.contact.ccp=phone;this.contact.ccmp=mobile;this.contact.cce=email;this.contact.q=CNJQ(formId+"_message").val();this.toggleOffers();this.contact.dept=me.departmentId||CNJQ(formId+"_dept").val()||me.defaultDepartmentId;this.launch(btn,params,{noDeptSelector:true})}else{this.log("Contact Form Errors",errors)}return false},validEmail:function(email){var re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(email)},validPhone:function(phone){var re=/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;return re.test(phone)},setContactAttribute:function(key,value){this.cancelPokeCheck();this.contact[key]=value},getNavigatorLocation:function(callback){var me=this;navigator.geolocation.getCurrentPosition(function(position){me.latitude=position.coords.latitude;me.longitude=position.coords.longitude;me.contact.cclat=me.latitude;me.contact.cclng=me.longitude;if(callback){callback()}},function(){})},nextOffer:function(prefix){if(this.currentOfferIndex){this.currentOfferIndex=this.currentOfferIndex+1}else{this.currentOfferIndex=1}if(this.currentOfferIndex<this.offers.count){CNJQ(prefix+(this.currentOfferIndex-1)).hide();CNJQ(prefix+this.currentOfferIndex).show();CNJQ(prefix+(this.currentOfferIndex-1)+"_claimit").hide();CNJQ(prefix+this.currentOfferIndex+"_claimit").show()}else{this.currentOfferIndex=this.currentOfferIndex-1}},previousOffer:function(prefix){if(this.currentOfferIndex==null){this.currentOfferIndex=0}this.currentOfferIndex=this.currentOfferIndex-1;if(this.currentOfferIndex<0){this.currentOfferIndex=0}else{CNJQ(prefix+(this.currentOfferIndex+1)).hide();CNJQ(prefix+this.currentOfferIndex).show();CNJQ(prefix+(this.currentOfferIndex+1)+"_claimit").hide();CNJQ(prefix+this.currentOfferIndex+"_claimit").show()}},sendGAData:function(name,category){try{if(this.gaTracker){var gaParams=["cnGATracker.send","event"]}else{var gaParams=["send","event"]}if(category){gaParams.push(category)}else{gaParams.push("CarNow Chat Activity")}if(name.indexOf(this.gaFriendlyNameMapping["#cngpdls"])>=0){gaParams.pop("CarNow Chat Activity");gaParams.push("CPE-Chat-Menu-Click");name=name.replace(this.gaFriendlyNameMapping["#cngpdls"],this.orgName)}gaParams.push("click");gaParams.push(name);this.sendGA(gaParams)}catch(e){this.logError("sendGAData","failed",{ga_params:gaParams},e)}},sendGA:function(parameters){if(this.gaEnabled){this.log("GA ["+parameters+"]");window[this.options.settings.gaFuncName].apply(this,Array.prototype.slice.call(parameters,0))}if(this.gtmEnabled){this.log("GTM ["+parameters+"]");var gtmFunction=window[this.options.settings.gaFuncName];gtmFunction({event:"CarNow Chat Activity",eventCategory:"CarNowActivity",eventAction:parameters[3],eventLabel:parameters[4]||"submit"})}},getGANameFromElement:function(el){var n=CNJQ(el).attr("data-name");if(n){return n}else{return CNJQ(n).text()}},track:function(params){var url=this.options.baseUrl+this.options.orgBaseUrl+"/track_visitor";var trackParams={vstid:encodeURIComponent(this.visitorId),url:encodeURIComponent(document.URL)};Object.keys(params).forEach(function(key){if(params[key]){trackParams[key]=encodeURIComponent(params[key])}});CNJQ.ajax({url:url,type:"POST",data:trackParams,success:function(checkData){CNJQ(".cn-buy-now[data-vin]").show();if(checkData.buynow&&checkData.buynow.remove){for(var x=0;x<checkData.buynow.remove.length;x++){CNJQ(".cn-bn-action[data-vin="+checkData.buynow.remove[x]+"], .cn-buy-now[data-vin="+checkData.buynow.remove[x]+"], .cn-compare[data-vin="+checkData.buynow.remove[x]+"]").remove()}}CNPC.refreshBNPayments(true)}})},log:function(message,object,level){if((level!=null&&level>=this.logLevel)||(level==null&&this.logLevel==0)){if(level&&level==5){console.log("%c"+message,"color: #DD0000; font-size: 1.2em; font-weight: bold;")}else{if(level&&level==4){console.log("%c"+message,"color: #0000DD; font-size: 1.2em; font-weight: bold;")}else{if(level&&level==3){console.log("%c"+message,"color: #AAA; font-size: 1em;")}else{console.log("CN: "+message)}}}if(object){console.log(object)}}},setupEventListeners:function(){var me=this;try{if(me.mutationObserverEnabled){setTimeout(function(){MutationObserver=window.MutationObserver||window.WebKitMutationObserver;if(MutationObserver){var observer=new MutationObserver(function(mutations,observer){for(var i=0;i<mutations.length;i++){var mutation=mutations[i];if(mutation.type==="childList"){if(CNPC.mutableReloadTimeout){clearTimeout(CNPC.mutableReloadTimeout)}CNPC.mutableReloadTimeout=setTimeout(function(){CNPC.setupBuyNow();CNPC.adjustToCookieBanner();CNPC.mutableReloadTimeout=null},500)}}});observer.observe(document,{subtree:true,childList:true});if(CNJQ(me.cookieBannerSelector).length>0){var bannerObserver=new MutationObserver(function(mutations,observer){me.adjustToCookieBanner()});bannerObserver.observe(document.querySelector(me.cookieBannerSelector),{subtree:true,attributes:true,childList:true})}}else{console.log("CN: Feature not available: MutationObserver")}},2000)}}catch(ex){this.logError("init","Init failed",settings,ex)}window.addEventListener("focus",function(){if(CNPC.bnDealWindow&&CNPC.mobile&&!isBNLaunch){CNPC.bnDealWindow.close();CNPC.bnDealWindow=null}isBNLaunch=false})},addListenerEvent:function(data){for(var i=0;i<CarNowPlugin.extListeners.length;i++){CarNowPlugin.extListeners[i](data)}},sendCloseEvent:function(eventType){},triggerActivityPixel:function(url){if(url){var visiq_tag=document.createElement("img");visiq_tag.src=url;visiq_tag.width=1;visiq_tag.height=1;visiq_tag.style.cssText="display:none;";document.body.appendChild(visiq_tag)}},triggerDataLayerEvent:function(eventType){if(!eventType){eventType="chatClick"}var dataLayer={chatType:"chat",chatProvider:this.settings.server=="production"?"CarNow":"CarNow Dev",chatProfitCenter:(this.session&&this.session.dept_cat)?(["sales","service","parts"].indexOf(this.session.dept_cat)>-1?this.session.dept_cat:"other"):"other",events:eventType};_sendCustomAnalyticEvent(dataLayer)}};CarNowPlugin.launch=function(el){CNPC.launch(el)};CarNowPlugin.launchChatWithParams=function(el,idx,additionalParams){CNJQ(el).attr("data-index",idx);var params=additionalParams||{};CNPC.launch(el,params,{});return false};CarNowPlugin.launchChat=function(el,idx,aId,forceLaunch,deptUsrSel,additionalParams){CNJQ(el).attr("data-index",idx);var params=additionalParams||{};params.ag=aId;CNPC.launch(el,params,{});return false};CarNowPlugin.launchChatWithKey=function(ctxEl,key,idx,aId,deptId,forceLaunch,deptUsrSel,additionalParams){CNJQ(ctxEl).attr("data-index",idx);var params=additionalParams||{};params.dept=deptId;CNPC.launchChatInternal(key,ctxEl,params,{});return false};CarNowPlugin.showSmsContactForm=function(btn,formId,btnContainer){CNJQ(btn).addClass("cn-sms-app");CNPC.showPrompt(btn,"#cncb11_sms_form");return false};CarNowPlugin.setDepartmentId=function(id){CNPC.departmentId=id;return false};var CarNowClient={setDepartmentId:function(id){CNPC.departmentId=id},setPokeId:function(id){}};window.addEventListener("beforeunload",function(event){if(CNPC.visitorId){CNPC.setCookie("_cn_vid",CNPC.visitorId)}});var CNPC=new CNPCImpl();if(!CarNowPlugin.dontInit){CNPC.init(CarNowPlugin.initParams)};
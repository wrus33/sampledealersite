!function(e){var n=e(".navigation-default"),t="mega-menu-ajax-",o={ajaxLoadingContainer:"navigation-ajax-container",ajaxLoadComplete:"ajax-load-complete",ddcIcon:"ddc-icon",ddcIconSize:"ddc-icon-size-xlarge",ddcIconGear:"ddc-icon-specs-gear1",hide:"hide",loading:"loading",open:"open"},a={ddcContent:".ddc-content",ddcMegaMenuNav:".ddc-mega-menu-nav.nav",ajaxLoadComplete:".ajax-load-complete",loading:".loading"},i={ajaxComplete:"ddc-mega-menu-nav-ajax-load-complete"},d={linkIsDdc404:/404.html$/},r=function(n){e(document).trigger("modulesRefresh",{modules:{lazyImage:DDC.modules.lazyImage}}),n.siblings(".dropdown-menu").find('div.ajax-navigation-element:not([data-fragment-url=""])').not(a.ajaxLoadComplete).each(function(){var n=e(this),t=650,r=(new Date).getTime(),u=n.data("fragment-url"),g=n.data("fragment-id"),m=DDC.i18n.getLabel("LOADING");d.linkIsDdc404.test(u)||(!l(g)&&c(g)?(n.html(u).removeClass(o.hide).html(s(g)),h(1,1),n.css("visibility","visible").addClass(o.ajaxLoadComplete),e(document).trigger("modulesRefresh"),h(2,500),$thisLoad.find(a.ddcContent).first().trigger(i.ajaxComplete)):(n.not(a.ajaxLoadComplete).before('<span class="'+o.ajaxLoadingContainer+" "+o.loading+'"><i class="'+o.ddcIcon+" "+o.ddcIconGear+" "+o.ddcIconSize+'"></i> '+m+"</span>"),n.html("").removeClass(o.hide).load(u,function(){h(1,1);var n=e(this),o=(new Date).getTime()-r;t=o>t?0:t-o,n.delay(t).queue(function(){e(this).css("visibility","visible").siblings(a.loading).remove(),e(document).trigger("modulesRefresh")}),n.find(a.ddcContent).first().trigger(i.ajaxComplete),h(3,500)}).addClass(o.ajaxLoadComplete)))})},s=function(e){return localStorage.getItem(t+e)},l=function(){return!0},c=function(){return!1},u=function(n){e(".dropdown.dropdown").each(function(){var t=e(this);if(t.hasClass(o.open)||n){var a=t.find(".dropdown-menu > li");a.css({minHeight:"",height:""});var i=t.find(".dropdown-menu").height();a.css({minHeight:i,height:"auto"})}})},h=function(e,n){function t(){return i>=e?void o():(u(!1),void i++)}function o(){clearInterval(a)}var a=setInterval(function(){t()},n),i=0},g=function(){var t=n.find("[data-dropdown-display-type]").attr("data-dropdown-display-type"),o="click";t&&t.length>0&&"closeButton"!==t?o=t:"closeButton"===t&&m(),"hover"==o&&(n.find(a.ddcMegaMenuNav).find("li.dropdown").hover(function(){jQuery(this).has(".dropdown-menu").length>0&&(jQuery(this).siblings().removeClass("open"),jQuery(this).addClass("open").trigger("show.bs.dropdown"))},function(){jQuery(this).has(".dropdown-menu").length>0&&jQuery(this).removeClass("open").trigger("hidden.bs.dropdown")}),n.find(a.ddcMegaMenuNav).find("li.dropdown ul.dropdown-menu").hover(function(){},function(){jQuery(this).parent("li").removeClass("open").trigger("hidden.bs.dropdown")})),n.find(".dropdown").on({"show.bs.dropdown":function(){var n=e(this).find(".nav-with-children");n.length>0&&(r(n),e(document).trigger("trackEvent",[{widgetName:"mega-menu",eventName:"click",data:n.text().trim()}])),"closeButton"===t&&e(this).find(".close-button").on("click",function(){e(this).parents("li").removeClass("open").trigger("hidden.bs.dropdown")})},click:function(n){"tab"===e(n.target).attr("role")?e(this).data("closable",!1):e(this).data("closable",!0)},"hide.bs.dropdown":function(){var n=e(this).data("closable");return e(this).data("closable",!0),n}}),n.find(".dropdown-menu").on(o,function(n){var t,o,a=e(n.target),i=a.parents("[data-widget-name]"),d=i.data("widget-name"),r=null;a.is(".media img")&&"inventory-featured-default"===d&&"ontouchstart"in document.documentElement?(n.preventDefault(),n.stopPropagation(),i.find(".hover-state").removeClass("hover-state"),e(this).closest(".hproduct > div").addClass("hover-state")):a.is("a")||a.parent("a").length>0||a.parent().hasClass("inventory-count-link")?(t="model-selector-default"===d?a.parents(".hproduct").find("a").text():a.text(),o=e.trim(d+"|"+t.replace(/\s/g," ")),("inventory-featured-default"===d||"model-selector-default"===d)&&(r=parseInt(i.find(".hproduct").length,10)),e(document).trigger("trackEvent",[{widgetName:"mega-menu",eventName:"click",data:o,value:r}])):"submit"!==e(n.target).attr("type")&&"ws-free-text-search"!==d&&n.stopPropagation()})},m=function(){var n=e("body"),t=n.find(".navbar.navbar-default"),o=n.find(".page-header"),a=null,i=!1,d=!window.DDC.siteProperties.templateHeaderDisableSticky;n.find(".responsive-centered-nav.noShrink").length>0?(a=o.find(".navbar-nav li.dropdown"),i=!0):a=t.find(".navbar-nav li.dropdown");var r,s=n.find(".ddc-footer"),l=o.find(".content-alert-banner"),c=l.find("> *:not(script)").length>0,u=o.outerHeight()+t.outerHeight(),h=s.outerHeight(),g=l.outerHeight();o.addClass("nav-with-close-button"),positionTheFooter=function(e){var n=window.innerHeight,t=e.getBoundingClientRect().height,o=u+t,a=o;o+h>n?c&&(a-=g):a=n-h,s.css({position:"absolute",top:a+5,bottom:0,left:0,right:0})},resizeCallback=function(e){for(var n=0;n<e.length;n++)positionTheFooter(e[n].target)},"undefined"!=typeof window.ResizeObserver&&(r=new ResizeObserver(resizeCallback)),a.on("show.bs.dropdown",function(){n.addClass("nav-with-close-button");var a=e(this).find(".dropdown-menu")[0];d&&(o.removeClass("sticky-header-nav"),i||(t.removeClass("sticky-header-nav"),t.css("position","static"))),positionTheFooter(a),r?r.observe(a):s.css("display","none"),c&&o.height(u-g)}),a.on("hidden.bs.dropdown",function(){n.removeClass("nav-with-close-button"),d&&(o.addClass("sticky-header-nav"),i||(t.addClass("sticky-header-nav"),t.css("position","fixed"))),s.css("position","static"),r?r.unobserve(e(this).find(".dropdown-menu")[0]):s.css("display","block"),c&&o.height(u)})};e(document).ready(function(){g(),u(!0)})}(jQuery);
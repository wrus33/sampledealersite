"use strict";!function(e,a,t){var n=function(e){var a=[],n=function(e){return a.indexOf(e)>-1};this.callFunc=function(i,r){if(!n(r)){var d=(new Date).getTime(),o=i.eventData?i.eventData:i;e(o),t&&t.addPageAction("dataLayerEventListener",{event:i.event,duration:(new Date).getTime()-d,widgetName:i.widgetName||"",action:i.action||""}),a.push(r)}}},i=function(){var e={},t=void 0,i=void 0,r=function(a){var t=window.dataLayer.indexOf(a),n=e[a.event];if(n&&n.length)for(var i=0;i<n.length;i++)n[i].callFunc(a,t)},d=function(e){return"undefined"!=typeof i?i:(i=!1,"undefined"==typeof e?(a.log("error","DDC DataLayer Event System - window.dataLayer is undefined, event listening disabled"),i):"undefined"==typeof DataLayerHelper?(a.log("error","DDC DataLayer Event System - DataLayerHelper is undefined, event listening disabled"),i):i=!0)},o=function(e){if(d(window.dataLayer))for(var a=0;a<window.dataLayer.length;a++){var t=window.dataLayer[a];"undefined"!=typeof t.event&&t.event===e&&r(t)}},s=function(e){return new DataLayerHelper(e,function(e,a){r(a)},!0)};this.initialize=function(e){"undefined"==typeof t&&d(e)&&(t=s(e),a.log("info","DDC DataLayer Event System - Initialized"))},this.listen=function(t,i){e[t]||(e[t]=[]),"function"==typeof i&&(e[t].push(new n(i)),o(t),a.log("info","DDC DataLayer Event System - Listener added for "+t+"."))},"undefined"!=typeof __karma__&&(this.reset=function(a){e={},i=void 0,t=a?void 0:s(window.dataLayer)})};a.classes.namespace("dataLayer.events",a),a.dataLayer.events.listener=new i,e(function(){var t=e(document),n=e("body"),i={},r=[];a.dataLayer.client.browser=navigator.appCodeName,a.dataLayer.client.browserVersion=navigator.appVersion,a.dataLayer.client.browserUser=navigator.userAgent,a.dataLayer.client.browserPlatform=navigator.platform,a.dataLayer.client.pixelResolution=screen.pixelDepth,a.dataLayer.client.screenWidth=screen.width,a.dataLayer.client.screenHeight=screen.height;var d=new Date,o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s=d.getUTCDate(),l=d.getUTCFullYear(),c=d.getUTCMonth()+1;if(9>=c&&(c="0"+c),9>=s&&(s="0"+s),Date.prototype.getHoursTwoDigits=function(){var e=this.getHours();return 10>e?"0"+e.toString():e.toString()},Date.prototype.getMinutesTwoDigits=function(){var e=this.getMinutes();return 10>e?"0"+e.toString():e.toString()},Date.prototype.getSecondsTwoDigits=function(){var e=this.getSeconds();return 10>e?"0"+e.toString():e.toString()},a.dataLayer.date.currentTime=d,a.dataLayer.date.date=l+"-"+c+"-"+s,a.dataLayer.date.dayOfWeek=o[d.getDay()],a.dataLayer.date.time=d.getHoursTwoDigits()+":"+d.getMinutesTwoDigits()+":"+d.getSecondsTwoDigits(),a.dataLayer.date.timeZoneOffSet=d.getTimezoneOffset(),a.dataLayer.page.attributes.specialsCountPerCategory=e(".ddc-content.special").length,a.dataLayer.site.features.promotions.enabled){var m=n.find("[data-promo-id]"),v=function(){var t=["accountId="+a.siteSettings.accountId];return m.each(function(){t.push("promotionId="+e(this).data("promoId"))}),_.uniq(t).join("&")},p=function(e){for(var a in e)if(e.hasOwnProperty(a)){var t=e[a];for(var n in t)!t.hasOwnProperty(n)||""!==t[n]&&null!==t[n]||(t[n]=void 0)}return e},f=a.addUrlParams(a.getWindowOrigin()+"/apis/promotions",v());m.length>0&&(a.classes.namespace("dataLayer.page.attributes.promotions",a),e.get(f,function(e){a.dataLayer.page.attributes.promotions=p(e)}))}var u=function(e){var a=e.parents(".ui-dialog").find(".ui-dialog-title").text()||e.parents("[data-widget-id]").find("h1, .widget-heading").first().text()||e.prev().text()||e.parents(".nav-fragment").prev().text()||"";return a.trim()},g=function(e,t){return a.dataLayer.vehicles?a.dataLayer.vehicles.find(function(a){return a[e]===t})||{}:{}},y=function(a,t,n){var i=a.find("input[name='"+t+"']");if(!i.length){var r=e("<input>",{type:"hidden",name:t,value:n});return r.appendTo(a),e(r[0])}return n&&!i.val()&&i.val(n),i},h=function(e){var t=a.dataLayer.page.pageInfo.pageWidgets;for(var n in t)if(t.hasOwnProperty(n)&&e.test(t[n]))return!0;return!1},L=function(e){for(var a in e)if(e.hasOwnProperty(a)&&void 0!==e[a])return!0;return!1},k=function(e){var t=a.dataLayer.myCars.viewedVehicles.concat(a.dataLayer.myCars.savedVehicles).concat(a.dataLayer.myCars.priceChangeVehicles);for(var n in t){if(!t.hasOwnProperty(n))return{};var i=t[n];if(i.attributes.vin===e||i.itemUUID===e)return i.attributes}},D=function(e){var a=void 0;return e.hasOwnProperty("newOrUsed")?a="true"===e.certified?"certified":e.newOrUsed:e.hasOwnProperty("condition")&&(a=e.certified?3:e.condition),a},T=function(e,t){var n="ddc.link."+t,i=a.dataLayer.page.pageInfo.isVlp,r=h(/ws-inv-listing/),d=a.dataLayer.page.pageInfo.isVdp,o="MYCARS_FAVORITES"===a.dataLayer.page.pageInfo.pageName,s=void 0,l={};if(e.parents(".mycars-list-row").length>0){var c=e.parents(".mycars-vehicle").data("vin");s=k(c)}else if(e.parents(".mycars-mobile-list").length>0){var m=e.parents(".mycars-vehicle").data("vin");s=g("vin",m)}else if(r||!i&&!o)if(r){var v=e.parents("[data-uuid]").data("uuid");s=g("uuid",v),l.isSRP=r}else s=d?a.dataLayer.vehicles[0]:{make:"",model:"",trim:"",vin:"",year:""};else{var p=e.parents(".hproduct").data("vin");s=g("vin",p)}l.vin=s.vin,l.make=s.make,l.model=s.model,l.trim=s.trim,l.year=s.year||s.modelYear,l.inventoryType=D(s)||"",l.element=e[0],a.pushToGtmDataLayer({event:n,eventData:l})},C=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" | ",t="";return function n(i){for(var r=0;r<i.childNodes.length;r++){var d=i.childNodes[r],o=3===d.nodeType,s="string"==typeof d.nodeValue,l=s&&""===d.nodeValue.trim(),c=s&&1===d.nodeValue.length&&-1!==d.nodeValue.indexOf("\n"),m=d.parentNode!==e&&("string"==typeof d.parentNode.className&&d.parentNode.className.indexOf("hide")>-1||"hidden"===getComputedStyle(d.parentNode).getPropertyValue("visibility")||"none"===getComputedStyle(d.parentNode).getPropertyValue("display"));!o||l||c||m?n(d):t+=d.nodeValue.trim()+a}}(e),t.slice(0,-a.length)},I=function(a){var t=C(a),n=e(a),i=n.attr("href");if(""!==t)t=t.trim();else if(n.find("img").length>0){var r=n.find("img"),d=r.attr("alt"),o=r.attr("title"),s=r.attr("src");"string"==typeof d&&d.length>0?t=d:"string"==typeof o&&o.length>0?t=o:"string"==typeof s&&s.length>0&&(t=s),t=t.trim()}else"string"==typeof i&&i.length>0&&(t=i.trim());return t},S=function(e){return e.trim().replace(/ /g,"_").replace(/\*/,"").replace(/:/,"").toLowerCase()},b=function(e){var a={},t=e;if(!(e instanceof Element)){if(!(e instanceof jQuery))return a;t=e[0]}for(var n=t.attributes,i=0;i<n.length;i++)a[n[i].name]=n[i].value;return a},w=function(a){return e(a).parents(".form-group").find("label").text()||e(a).attr("name")},x=function(a){var t={};return a.each(function(){var a=e(this),n=a.next(".errors"),i=S(w(this)),r=a.hasClass("invalid");r&&(n.size()>0?t[i]=n.text():this.validationMessage&&(t[i]=this.validationMessage))}),t},N=function(e){var a={};return e.each(function(){var e=S(w(this));a[e]=this.validationMessage}),a},E=function(e,a){var t=e+"-"+a;return i[t]?!0:(i[t]=!0,!1)},O=function(e){var a=document.createElement("a");return a.href=e,!!a.pathname.match(/^((?!null).)*$/)},P=function(a){return e(a).closest("[data-widget-name]").attr("data-widget-name")},F=function(e){var a,t,n,i=0;if(0===e.length)return i;for(a=0,n=e.length;n>a;a++)t=e.charCodeAt(a),i=(i<<5)-i+t,i|=0;return Math.abs(i)},A=function(){var e=new Date;return e.toISOString().replace(/.\d+Z$/g,"")};a.dataLayer.events.form=a.dataLayer.events.form||{},a.dataLayer.events.form.confirmation=function(t){var n=a.dataLayer.confirmation,i=e(n.element),r=i.closest("form"),d=r.find('[name="custom.form.id"]'),o=r.find('[name="dl.element"]'),s=r.find('[name="dl.formElapsedTime"]'),l=r.find('[name="formEventId"]'),c=r.find('[name="_custom=SUBMISSION_TIMESTAMP=-1=submissionTimestamp"]'),m=r.find('[name="dl.widgetName"]'),v=r.find('[name="dl.pageName"]').length>0?r.find('[name="dl.pageName"]').val():a.getUrlParams().pageAlias,p=r.find('[name="dl.params"]'),f=r.find('[name="dl.contact.preferredContact"]'),u=r.find('[name="dl.formTrackingId"]'),g=r.find('input[data-id="dl.contact.address.postalCode"]'),y="ddc.form.confirmation",h="true"===r.find('[name="dl.isModal"]').val(),L="true"===r.find('[name="dl.validate"]').val(),k={event:y,eventData:{currentTime:(new Date).getTime(),customFormId:"",elapsedTime:"",element:"",eventCategory:t||"",formEventId:"",submissionTimestamp:"",formTitle:"",isModal:!1,params:"",preferredContact:"",pageName:v||"",trackingId:"",validate:!1,vehicle:n.vehicle||a.dataLayer.vehicles[0]||"",zip:""}};if(k.eventData.trackingId=u.length>0?u.val():"string"==typeof n.trackingId?n.trackingId:r.data("form-tracking-id"),a.siteSettings.pageAlias.indexOf("FINANCE_CONFIRM")>-1&&(k.eventData.trackingId="FINANCE"),m.length>0?k.eventData.formTitle=m.val():"string"==typeof n.formTitle&&(k.eventData.formTitle=n.formTitle),d.length>0?k.eventData.customFormId=d.val():"string"==typeof n.customFormId&&(k.eventData.customFormId=n.customFormId),f.length>0?k.eventData.preferredContact=f.val():"string"==typeof n.preferredContact&&(k.eventData.preferredContact=n.preferredContact),o.length>0?k.eventData.element=o.val():"string"==typeof n.element&&(k.eventData.element=n.element),s.length>0?k.eventData.elapsedTime=parseInt(s.val()):"string"==typeof n.elapsedTime&&(k.eventData.elapsedTime=parseInt(n.elapsedTime)),L?k.eventData.validate=!0:"string"==typeof n.validate&&(k.eventData.validate="true"===n.validate),h?k.eventData.isModal=!0:"string"==typeof n.isModal&&(k.eventData.isModal="true"===n.isModal),g.length>0?k.eventData.zip=g.val():"string"==typeof n.zip&&(k.eventData.zip=n.zip),p.length>0?k.eventData.params=p.val():"string"==typeof a.dataLayer.page.pageInfo.params&&(k.eventData.params=a.dataLayer.page.pageInfo.params),l.length>0?k.eventData.formEventId=l.val():"string"==typeof n.formEventId&&(k.eventData.formEventId=n.formEventId),localStorage.getItem("ddc_data_layer-initiatingClickText")&&(k.eventData.initiatingClickText=localStorage.getItem("ddc_data_layer-initiatingClickText"),localStorage.removeItem("ddc_data_layer-initiatingClickText")),c.length>0?k.eventData.submissionTimestamp=c.val():"string"==typeof n.submissionTimestamp&&(k.eventData.submissionTimestamp=n.submissionTimestamp),-1===a.dataLayer.page.pageInfo.pageName.indexOf("CONFIRM")){Object.keys(n).forEach(function(e){"undefined"!=typeof n[e]&&null!==n[e]||"undefined"==typeof k.eventData[e]||null===k.eventData[e]||(n[e]=k.eventData[e])});var D=r.find("input[name='dl.uuid']").val(),T=D&&a.dataLayer.vehicles.find(function(e){return e.uuid===D});T&&(k.eventData.vehicle=T,n.vehicle=T,n.uuid=D)}a.pushToGtmDataLayer(k)},a.dataLayer.events.form.initiation=function(t){var n=e(this).closest("form"),r=n.find('input[name="formEventId"]').val()||"",d=n.data("form-tracking-id"),o=r||d,s="ddc.form.initiation";if("typedSearch"===n.data("form-tracking-type"))return void(i[o]||(i[o]={formInitiationTime:(new Date).getTime()}));if(!E(t.timeStamp,s)){var l=u(n),c=n.data("modal");if(!i[o]){i[o]={formInitiationTime:(new Date).getTime()};var m={event:s,eventData:{element:n[0],formEventId:r,formTitle:l,isModal:c===!0,trackingId:d}};localStorage.getItem("ddc_data_layer-initiatingClickText")&&(m.eventData.initiatingClickText=localStorage.getItem("ddc_data_layer-initiatingClickText")),a.pushToGtmDataLayer(m)}}},a.dataLayer.events.form.submission=function(t){var n=e(this),r=n.closest("form"),d=r.data("form-tracking-type"),o="typedSearch"===d?"ddc.form.typedSearch":"ddc.form.submission",s=h(/ws-inv-listing/);if(!E(t.timeStamp,o)){var l=r.data("validator"),c=r.find('input[name="formEventId"]').val()||"",m=r.data("form-tracking-id"),v=c||m,p=A(),f=r.find("input[name='custom.form.id']").val(),g=r.find("input[name='search']").val(),L=r.find("input[data-id='contact.address.postalCode']"),k=r.find("select[data-id='contact.preferredContact']"),D=(new Date).getTime(),T=i[v]&&i[v].formInitiationTime?D-i[v].formInitiationTime:0,C=u(r),I=r.attr("action")?r.attr("action").split("?")[1]:"",S=r.data("modal"),b={currentTime:D,customFormId:f,elapsedTime:T,element:this,formTitle:C,isModal:S===!0,trackingId:m,formEventId:c,isSRP:s,submissionTimestamp:p};localStorage.getItem("ddc_data_layer-initiatingClickText")&&(b.initiatingClickText=localStorage.getItem("ddc_data_layer-initiatingClickText")),a.dataLayer.hasOwnProperty("confirmation")&&(a.dataLayer.confirmation.element=this),y(r,"dl.custom.form.id").val(f),y(r,"dl.element").val(this.tagName+" "+this.innerText),y(r,"dl.formElapsedTime").val(T),y(r,"dl.formTrackingId").val(m),y(r,"dl.isModal").val(S),y(r,"dl.params").val(I),y(r,"dl.widgetName",C),y(r,"dl.pageName").val(a.dataLayer.page.pageInfo.pageName);var w=a.dataLayer.page.pageInfo.isVdp&&a.dataLayer.vehicles[0].uuid;w&&y(r,"dl.uuid").val(w),"typedSearch"===d?b.typedSearchContent=g:l?(b.zip=L.val()||"",b.preferredContact=k.val()||"",b.validate=l.checkValidity(),y(r,"dl.contact.address.postalCode").val(b.zip),y(r,"dl.contact.preferredContact").val(b.preferredContact),y(r,"dl.validate").val(b.validate),y(r,"_custom=SUBMISSION_TIMESTAMP=-1=submissionTimestamp").val(p),b.invalidFields=x(l.getInputs())):void 0===l&&(b.validate=r[0].checkValidity(),y(r,"dl.validate").val(b.validate),b.invalidFields=N(r.find(":invalid")),y(r,"_custom=SUBMISSION_TIMESTAMP=-1=submissionTimestamp").val(p)),a.pushToGtmDataLayer({event:o,eventData:b})}},a.dataLayer.events.form.ajaxFormConfirm=function(t,n){var i=e(n).closest("form"),r="ddc.form.ajaxFormConfirm";if(!E(t.timeStamp,r)){var d=i.find('select[data-id="contact.preferredContact"]'),o=i.find('input[data-id="contact.address.postalCode"]'),s=i.data("form-tracking-id"),l=u(i),c=i.attr("action").split("?")[0]||"";a.pushToGtmDataLayer({event:r,eventData:{confirmPath:c,element:n,formTitle:l,preferredContact:d.length>0?d.val():"",trackingId:s,zip:0!==o.length?o.val():""}})}},a.dataLayer.events.form.change=function(t){var n=t.target,i=t.timeStamp,r=t.target,d=r.name,o=r.type,s=e(n).closest("form"),l=s.hasClass("facetbrowse-ajax-form"),c=s.hasClass("inventory-search-lead-form"),m="SELECT"===n.tagName,v="ddc.form.change";if(l?v="ddc.form.facetBrowseChange":c&&(v="ddc.form.inventorySearchLeadChange"),!E(i,v)&&m){var p="undefined"!=typeof HTMLOptionsCollection&&n.options instanceof HTMLOptionsCollection&&n.options[n.selectedIndex],f=p&&p.text,u=n.options.length>0&&n.options[0].text,g=p&&p.value,y={element:n,formEventId:s.find('input[name="formEventId"]').val()||"",firstOptionText:u||"",label:d||f||"",linkType:o,selectedValue:g||"",widgetName:P(n)},h=s.find("select:visible");e.each(h,function(){var a=e(this),t=a.val();if(t){var n=a.attr("name");y[n]=t}}),y.event=v,a.pushToGtmDataLayer({event:v,eventData:y})}},a.dataLayer.events.form.slideChange=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.handle,r=void 0===i?t.target:i,d=n.values,o=e(r).closest(".ui-slider").siblings("input").attr("name"),s="ddc.form.slideChange";a.pushToGtmDataLayer({event:s,eventData:{element:r,widgetName:P(r),label:o,values:d,event:s}})},a.dataLayer.events.form.onPage=function(t){var n=e(t).closest("form");if(n.is(":visible")){var i=n.data("form-tracking-id"),r="ddc.form.onPage";if("true"!==n.attr(r)){n.attr(r,"true");var d=n.find('input[name="formEventId"]').val()||"",o=n.find('input[name="dl.uuid"]').val()||"",s=o?g("uuid",o):{},l={event:r,eventData:{element:t,formEventId:d,formTitle:u(n),vehicle:s,trackingId:i,isLead:n.find('input[name="_action"]').length>0,isModal:n.data("modal")||!1}};localStorage.getItem("ddc_data_layer-initiatingClickText")&&(l.eventData.initiatingClickText=localStorage.getItem("ddc_data_layer-initiatingClickText")),a.pushToGtmDataLayer(l)}}},a.dataLayer.events.form.paymentCalcInit=function(){var t=e(this).closest("[data-widget-id]").data("widget-id");i[t]||(i[t]=!0,a.pushToGtmDataLayer({event:"ddc.form.paymentCalcInit",eventData:{}}))},a.dataLayer.events.slideshow=a.dataLayer.events.slideshow||{},a.dataLayer.events.slideshow.click=function(t){var n=e(this),i="ddc.slideshow.click";E(t.timeStamp,i)||a.pushToGtmDataLayer({event:i,eventData:{type:n.data("slide-type"),position:n.data("slide-position"),name:n.data("slide-label"),element:this}})},a.dataLayer.events.maps=function(){var e="ddc.maps";a.pushToGtmDataLayer({event:e,eventData:{}})},a.dataLayer.events.link=a.dataLayer.events.link||{},e(document).on("dialogclose",function(){localStorage.removeItem("ddc_data_layer-initiatingClickText")}),a.dataLayer.events.link.clicked=function(t){t.currentTarget.classList.contains("dialog")&&!e(t.currentTarget).parents(".ui-dialog").length&&t.currentTarget.dataset.title&&localStorage.setItem("ddc_data_layer-initiatingClickText",e(t.currentTarget).text().trim());var n="ddc.link.generic",i=h(/ws-inv-listing/);!E(t.timeStamp,n)&&this instanceof Element&&a.pushToGtmDataLayer({event:n,eventData:{text:I(this),url:this.getAttribute("href")||"",pageName:a.dataLayer.page.pageInfo.pageName,element:this,eventType:n,isSRP:i}})},a.dataLayer.events.link.recommendedVehicle=function(e){var t="ddc.link.recommendedVehicle";E(e.timeStamp,t)||a.pushToGtmDataLayer({event:t,eventData:{text:I(e.element)||"",url:e.element.getAttribute("data-vdp-href")||"",pageName:a.dataLayer.page.pageInfo.pageName,element:e.element,eventType:t}})},a.dataLayer.events.link.clickToCall=function(t){var n=e(this),i="ddc.link.clickToCall";E(t.timeStamp,i)||a.pushToGtmDataLayer({event:i,eventData:{clickToCallDepartment:n.closest("[data-click-to-call]").data("click-to-call"),phoneNumber:n.closest("[data-click-to-call]").data("click-to-call-phone"),element:this}})},a.dataLayer.events.link.vehicleCompare=function(e){var t=e.target,n=!!t.checked,i=h(/ws-inv-listing/),r={element:t,checked:n};if(!i){var d=t.closest(".inventoryList .item"),o=d&&d.querySelector(".hproduct, .vehicle-card[data-uuid]");if(o){var s=b(o),l=s["data-vin"];r.vin=void 0===l?"":l;var c=s["data-make"];r.make=void 0===c?"":c;var m=s["data-model"];r.model=void 0===m?"":m;var v=s["data-year"];r.year=void 0===v?"":v;var p=s["data-bodystyle"];r.bodyStyle=void 0===p?"":p;var f=s["data-trim"];r.trim=void 0===f?"":f;var u=s["data-exteriorcolor"];r.exteriorColor=void 0===u?"":u;var g=s["data-index-position"];r.position=void 0===g?"":g;var y=s["data-type"];r.type=void 0===y?"":y;try{r.internetPrice=atob(s["data-internetprice"])||"",r.msrp=atob(s["data-msrp"])||""}catch(L){r.internetPrice="",r.msrp=""}}a.pushToGtmDataLayer({event:"ddc.link.vehicleCompareCheck",eventData:r})}},a.dataLayer.events.link.incentive=function(n){var i=e(this),r="ddc.link.offerClick";if(!E(n.timeStamp,r)){i.hasClass("dialog")&&t.trigger("modulesRefresh",{modules:{dialog:a.modules.dialog}});var d=i.data("incentive-id"),o=i.data("incentive-name");a.pushToGtmDataLayer({event:r,eventData:{offerId:d,offerName:o,element:this,eventType:r}})}},a.dataLayer.events.link.getDirections=function(t){var n=e(this),i="ddc.link.getDirections";E(t.timeStamp,i)||(!n.data("validator")||n.data("validator").checkValidity())&&a.pushToGtmDataLayer({event:i,eventData:{linkText:n.find('button[type="submit"]').text().trim(),element:this}})},a.dataLayer.events.link.socialHeader=function(t){var n=e(this),i="ddc.link.socialHeaderClick";E(t.timeStamp,i)||a.pushToGtmDataLayer({event:i,eventData:{service:n.attr("title"),url:n.attr("href"),element:this}})},a.dataLayer.events.link.navigationClick=function(t){var n=e(this),i="ddc.link.navClick";if(!E(t.timeStamp,i)){var r=void 0,d=void 0,o=void 0,s=n.parents(".ddc-footer").length>0?"bottomNav":"topNav";a.client.isMobile?(r=n.hasClass("accordion-faux")&&n.not(".heading-tier2").length>0,d=n.hasClass("tier3"),o=n.hasClass("heading-tier2")):(r=n.parent().parent(".navbar-nav").length>0&&n.parent().hasClass("nav-no-children"),d=n.hasClass("child"),o=n.parent("h4").length>0),(r||d||o)&&a.pushToGtmDataLayer({event:i,eventData:{element:this,position:s,linkText:n.text().trim(),eventType:i,url:n.attr("href")}})}},a.dataLayer.events.link.share=function(t){var n=e(this),i="ddc.link.socialShare";E(t.timeStamp,i)||a.pushToGtmDataLayer({event:i,eventData:{service:n.attr("title"),url:n.attr("href"),element:this}})},a.dataLayer.events.link.hproduct=function(t,n){var i="ddc.link.hproductClick";if(!E(t.timeStamp,i)){var r=void 0,d=void 0,o=void 0,s={};r=e(this===document?n.target:this),s.text=r.text().trim(),s.element=r[0];var l="ws-inv-listing"===P(r);if(l){var c=g("uuid",r.parents(".vehicle-card-detailed").data("uuid"));s.vin=c.vin,s.make=c.make,s.model=c.model,s.year=c.modelYear,s.bodyStyle=c.bodyStyle,s.trim=c.trim,s.exteriorColor=c.exteriorColor,s.position=c.indexPosition,s.type=c.inventoryType,s.internetPrice=c.internetPrice,s.msrp=c.msrp,s.url=c.link}else{if(!r.hasClass("hproduct")){var m=r.parents(".hproduct");m.length>0&&(r=m)}try{d=atob(r.data("internetprice")),o=atob(r.data("msrp"))}catch(t){d=r.data("internetprice"),o=r.data("msrp")}s.vin=r.data("vin"),s.make=r.data("make"),s.model=r.data("model"),s.year=r.data("year"),s.bodyStyle=r.data("bodystyle"),s.trim=r.data("trim"),s.exteriorColor=r.data("exteriorcolor"),s.position=r.data("index-position"),s.type=r.data("type"),s.internetPrice=d,s.msrp=o,s.url=r.find(".media a").attr("href")}a.pushToGtmDataLayer({event:i,eventData:s})}},a.dataLayer.events.link.compare=function(t){var n=e(this),i="ddc.link.comparePageClick";if(!E(t.timeStamp,i)){var r=n.data("compareId"),d=g("vin",r),o=n.data("index-position"),s=n.data("type");a.pushToGtmDataLayer({event:i,eventData:{vin:r,make:d.make,model:d.model,year:d.modelYear,bodyStyle:d.bodyStyle,trim:d.trim,exteriorColor:d.exteriorColor,position:o,type:s,element:this}})}},a.dataLayer.events.link.mycarsSave=function(e){T(e,"mycarsSave")},a.dataLayer.events.link.mycarsGetAlerts=function(e){T(e,"mycarsGetAlerts")},a.dataLayer.events.link.mycarsCompare=function(e){T(e,"mycarsCompareCheck")},a.dataLayer.events.link.mycarsCompareSubmit=function(t){var n=e(t).closest(".popup").find(".item-compare .checkbox:checked").map(function(){return e(this).val()}).get(),i=n.map(function(e){var a=k(e),t=a.vin,n=a.make,i=a.model,r=a.year,d=a.trim;return{vin:t,make:n,model:i,year:r,trim:d,condition:D(a)||""}});a.pushToGtmDataLayer({event:"ddc.link.mycarsCompareSubmit",eventData:{vehicles:i,element:t[0]}})},a.dataLayer.events.link.mycarsLogin=function(e){var t=e instanceof Element&&e.closest(".mycars-form");t&&a.pushToGtmDataLayer({event:"ddc.link.mycarsLogin",eventData:{element:e,text:e.getAttribute("value")||"",type:t.className.indexOf("forgot-password-form")>-1?"forgot-password":"login"}})},a.dataLayer.events.dialog=a.dataLayer.events.dialog||{},a.dataLayer.events.dialog.ajaxContentLoaded=function(e,t,n,i){var r="ddc.dialog.ajaxContentLoaded";if(!E(e.timeStamp,r)){var d=void 0,o=!1;if(i)o=i.find("form").size()>0,d=i;else if(a.dialogs&&(t||O(n))){var s=a.dialogs[t]||a.dialogs[n];o=s&&!_.isEmpty(s)&&s.size()>0&&s.find("form").size()>0||!1,d=s}o&&d&&d.find("form").data("modal",!0),a.pushToGtmDataLayer({event:r,eventData:{element:d,hasForm:o,name:t||"",path:n}})}},a.dataLayer.events.dialog.publishDialogAction=function(e,t){var n="ddc.dialog."+t;E(e.timeStamp,n)||a.pushToGtmDataLayer({event:n,eventData:{element:e.target}})},a.dataLayer.events.dialog.opened=function(e){a.dataLayer.events.dialog.publishDialogAction(e,"opened")},a.dataLayer.events.dialog.closed=function(e){a.dataLayer.events.dialog.publishDialogAction(e,"closed")},a.dataLayer.events.page=a.dataLayer.events.page||{},a.dataLayer.events.page.view=function(){a.pushToGtmDataLayer({event:"ddc.page.view",eventData:{alias:a.dataLayer.page.pageInfo.pageName}})},a.dataLayer.events.page.filterSearch=function(){var e=a.dataLayer.page.queryFacets,t=a.dataLayer.page.pageInfo.pageName.indexOf("NO_RESULTS")>-1,n="SHOWROOM"===a.dataLayer.page.pageInfo.pageName,i=t?"0":a.dataLayer.page.attributes.vehicleResultCount,r=h(/ws-inv-listing/);r||n||!(a.dataLayer.page.pageInfo.isVlp||t||h(/\.inventory-listing\.(?!blank|sitemap)/)||e&&L(e))||a.pushToGtmDataLayer({event:"ddc.inventory.filterSearch",eventData:{resultCount:i,queryFacets:e}})},a.dataLayer.events.page.filterSearchClick=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ddc.inventory.filterSearch.click",n=!!e.checked,i={},r=e.closest(".facetmulti, .facets-container")||document.querySelector(".facetmulti"),d=function(e){return{name:e.getAttribute("name"),value:e.getAttribute("value")}},o=function(e){var a=e.querySelector(".facet-user-range-chart[data-range-chart-min-val][data-range-chart-max-val]"),t=e.querySelector(".facet-user-range-submit-values[name][value]"),n="",i="0",r="any",d="",o="";if(a&&(r=a.getAttribute("data-range-chart-min-val")||r,i=a.getAttribute("data-range-chart-max-val")||i,n=r+"-"+i,o=n),t){d=t.getAttribute("name");var s=t.getAttribute("value").split("-");o=(s[0]||r)+"-"+(s[1]||i)}return{name:d,value:o,defaultValue:n}},s=!!e.closest(".facet-breadcrumb-list"),l=!!e.closest(".facet-user-range-input-slider");if(r){for(var c=r.querySelectorAll('input[type="checkbox"]:checked'),m=0;m<c.length;m++){var v=d(c[m]),p=v.name,f=v.value;i[p]=i[p]?i[p]+","+f:f}for(var u=r.querySelectorAll(".facet-user-range"),g=0;g<u.length;g++){var y=o(u[g]),h=y.name,L=y.value,k=y.defaultValue;L!==k&&(i[h]=L)}}var D=e.getAttribute("name"),T=e.getAttribute("value");if(!D&&!T){var C=e.closest(".facet-user-range"),I=o(C);D=I.name,T=I.value}if(s&&!n&&i[D]){var S=i[D].split(","),b=S.indexOf(T);b>-1&&S.splice(b,1),S.length>0?i[D]=S.join():delete i[D]}a.pushToGtmDataLayer({event:t,eventData:{element:e,checked:n,clickedFacetName:D||"",clickedFacetValue:T||"",facets:i,isBreadcrumb:s,isSlider:l}})},a.dataLayer.events.page.typedSearch=function(){var e=a.dataLayer.page.queryFacets,t=e?e.search:null,n=a.dataLayer.page.pageInfo.pageName.indexOf("NO_RESULTS")>-1,i=n?"0":a.dataLayer.page.attributes.vehicleResultCount;!t&&n&&(e=e||{},t=e.search=a.getUrlParams().search),t&&(a.dataLayer.page.pageInfo.isVlp||n||h(/\.inventory-listing\.(?!blank)/))&&a.pushToGtmDataLayer({event:"ddc.inventory.typedSearch",eventData:{element:this,resultCount:i,queryFacets:e}})},a.dataLayer.events.page.typedSearchInit=function(){if("INPUT"!==this.tagName||-1===r.indexOf(this)){var e=void 0;if("INPUT"===this.tagName)r.push(this),e=this.value;else{var t=this.closest(".facetlist-keyword"),n=t&&t.querySelector('input[name="search"]');e=n&&n.value}a.pushToGtmDataLayer({event:"ddc.inventory.typedSearch.init",eventData:{element:this,search:e||""}})}},a.dataLayer.events.page.vehicleDetailView=function(){a.dataLayer.page.pageInfo.isVdp&&a.pushToGtmDataLayer({event:"ddc.page.vehicleDetailView",eventData:{alias:a.dataLayer.page.pageInfo.pageName}})},a.dataLayer.events.video=a.dataLayer.events.video||{},a.dataLayer.events.video.play=function(){var t="ddc.video.play",n=this.duration,i=e(this).find("source").attr("src"),r="string"==typeof i?i.split(".").pop():"";a.pushToGtmDataLayer({event:t,eventData:{element:this,eventName:t,eventType:"video-play",videoSource:i,videoDuration:n,fileType:r}})},a.dataLayer.events.video.milestones=a.dataLayer.events.video.milestones||{},a.dataLayer.events.video.milestones.report=function(e,t){var n=e.currentSrc,i="string"==typeof n?n.split(".").pop():"";a.pushToGtmDataLayer({event:"ddc.video.milestone",eventData:{element:e,eventType:"video-play-milestone",videoSource:n,videoDuration:e.duration,videoMilestone:t,fileType:i}})},a.dataLayer.events.video.milestones.complete=function(){a.dataLayer.events.video.milestones.report(this,"complete")},a.dataLayer.events.video.milestones.track=function(){var e=F(this.currentSrc),t=this.currentTime/this.duration,n={25:!1,50:!1,75:!1,95:!1};a.dataLayer.video=a.dataLayer.video||{},a.dataLayer.video[e]=a.dataLayer.video[e]||n,t>=.25&&!a.dataLayer.video[e][25]?(a.dataLayer.video[e][25]=!0,a.dataLayer.events.video.milestones.report(this,"25")):t>=.5&&!a.dataLayer.video[e][50]?(a.dataLayer.video[e][50]=!0,a.dataLayer.events.video.milestones.report(this,"50")):t>=.75&&!a.dataLayer.video[e][75]?(a.dataLayer.video[e][75]=!0,a.dataLayer.events.video.milestones.report(this,"75")):t>=.95&&!a.dataLayer.video[e][95]&&(a.dataLayer.video[e][95]=!0,a.dataLayer.events.video.milestones.report(this,"95"))},a.dataLayer.events.drIntegrated=a.dataLayer.events.drIntegrated||{},a.dataLayer.events.drIntegrated.click=function(){var t=void 0;if(a.dataLayer.page.pageInfo.isVlp){var n=e(this).closest(".hproduct").data("vin");t=g("vin",n)}var i="ddc.drIntegrated.click";a.pushToGtmDataLayer({event:i,eventData:{vehicle:t}})},a.dataLayer.events.drIntegrated.leadFormStart=function(){var e="ddc.drIntegrated.leadFormStart";a.pushToGtmDataLayer({event:e})},a.dataLayer.events.drPaymentCalc=a.dataLayer.events.drPaymentCalc||{},a.dataLayer.events.drPaymentCalc.click=function(){var e="ddc.drPaymentCalc.click";a.pushToGtmDataLayer({event:e})},a.dataLayer.events.slideshow.pagerClick=function(e,t){var n="ddc.slideshow.pagerClick";a.pushToGtmDataLayer({event:n,eventData:{element:t.element,eventType:n,destinationIndex:t.destinationIndex,linkUrl:t.linkUrl,linkText:t.linkText,pageName:a.dataLayer.page.pageInfo.pageName,position:t.position,currentItem:t.currentItem,totalItems:t.totalItems}})},a.classes.namespace("dataLayer.events.selectors",a);var G=a.dataLayer.events.selectors;G.clickToCall='[data-click-to-call] a[href*="tel:"]',G.compareId="[data-compare-id]",G.getDirectionsForm="[data-widget-name='directions-form'] form",G.getDirections="[data-widget-name='ws-contact'] .direction-link a",G.formChange="form select",G.formInitiation="[data-form-tracking-id] input,\n													 [data-form-tracking-id] select,\n													 [data-form-tracking-id] textarea",G.formOnPage="[data-form-tracking-id]",G.formPaymentCalc="[data-form-payment-calc],\n		                                             [data-widget-name='calculator-payment'] form",G.formSubmission='[data-form-tracking-id] [type=submit],\n													 [data-form-tracking-id="PREQUAL"] .finance-prequal-submit,\n													 [data-form-tracking-id="FINANCE"] .finance-application-submit',G.incentiveId="[data-incentive-id]",G.incentiveLabel='.vehicle-card dl.pricing-detail [role="button"]',G.linkClick="a[href],\n													 a[data-href],\n													 a.facetmulti-collapse-toggle,\n													 button",G.linksShareId="[data-links-share-link-id]",G.mapTypeId="[data-map-type-id]",G.mycarsGetAlerts=".mycars-btn[data-mycars-get-alerts]",G.mycarsGetAlertsCheckbox="[data-mycars-get-alerts] input",G.mycarsLogin='.mycars .login-form input[type="submit"]:not([disabled]),\n													 .mycars .forgot-password-form input[type="submit"]:not([disabled])',G.mycarsSave="[data-mycars-save], [data-mycars-remove]",G.mycarsCompare=".mycars-vehicle .item-compare input",G.mycarsCompareSubmit=".mycars-form-btn.compare-btn:not(.disabled)",G.navigationId="[data-navigation-id]",G.specialsIncentiveId="[data-widget-name='specials-listing'] .special .ddc-link-primary.dialog,\n		                                             [data-widget-name='specials-listing'] .special .ddc-nav-inline .dialog",G.specialsEvents=".promotion-body [data-promo-tracking-action],\n		                                             .promotion-details-content[data-promo-id] [data-promo-tracking-action]",G.slideType="[data-slide-type]",G.socialHeaderButtonId="[data-social-header-button-id]",G.typedSearchInit='.facetmulti input[type="search"],\n		                                             .facetmulti button.facetmulti-freeform-search-submit',G.vehicleCompare='.vlp .item-compare input[type="checkbox"], .vehicle-card-footer input[type="checkbox"]',G.vin="[data-showroom-listing-vehicle-id],\n		                                             [data-modelselector-vehicle-id],\n		                                             .inventoryList .hproduct .photo,\n		                                             .inventoryList .hproduct .url,\n		                                             .inventoryList .hproduct .video,\n		                                             .inventory-similar-default .hproduct .media a,\n		                                             .inventory-similar-default .hproduct .url,\n		                                             .inventory-similar-default .hproduct .view-link,\n		                                             .srp .ws-inv-listing .img-container img,\n		                                             .srp .ws-inv-listing .vehicle-card-title a,\n		                                             .srp .ws-inv-listing .more-details-link",G.video="video",G.dRIntegrated=".digital-retailing-default [data-tab-name],\n													 .digital-retailing-default .digital-retailing-tabs a,\n													 .digital-retailing-default .digital-retailing-tabs input,\n													 .digital-retailing-default .digital-retailing-tabs select,\n													 .digital-retailing-default .digital-retailing-tabs button,\n													 .digital-retailing-toolbox .tools-list,\n		                                             .ws-dr-toolbox .dr-button,\n		                                             .hproduct a[href*='toolbox='],\n		                                             [data-widget-name='ws-detailed-pricing'] .payment-calculator-wrapper button,\n		                                             .fixed-vdp-footer .calculate-payment-integrated",G.dRIntegratedForm='[data-form-tracking-id="MENU_DRIVER"] input,\n													 [data-form-tracking-id="MENU_DRIVER"] select,\n													 [data-form-tracking-id="MENU_DRIVER"] textarea,\n													 [data-form-tracking-id="TRADE_IN"]:not(.tradedriver-form) input,\n													 [data-form-tracking-id="TRADE_IN"]:not(.tradedriver-form) select,\n													 [data-form-tracking-id="TRADE_IN"]:not(.tradedriver-form) textarea,\n													 [data-form-tracking-id="INFO_REQUEST"] input,\n													 [data-form-tracking-id="INFO_REQUEST"] select,\n													 [data-form-tracking-id="INFO_REQUEST"] textarea,\n													 [data-form-tracking-id="FINANCE"] input,\n													 [data-form-tracking-id="FINANCE"] select,\n													 [data-form-tracking-id="FINANCE"] textarea,\n													 [data-form-tracking-id="CONTACT_ON_DEPOSIT"] input,\n													 [data-form-tracking-id="CONTACT_ON_DEPOSIT"] select,\n													 .digital-retailing-form.finance-prequal-form input,\n													 .digital-retailing-form.finance-prequal-form select,\n													 .digital-retailing-form.finance-prequal-form textarea',G.dRPaymentCalc="[data-form-payment-calc] [payment-dealertrack-format-field],\n												 	 [data-form-payment-calc] .form-control,\n													  [data-form-payment-calc] button",G.incentiveFacet=".incentives-search-default .facets-container input",G.searchFacet='.facetmulti input[type="checkbox"],\n													 .facet-breadcrumb-list input[type="checkbox"],\n													 .facetmulti-item input[type="radio"]',G.searchFacetVlpSlider=".facet-user-range-input-slider.noUi-target",t.on("ajaxDialogComplete slideOpen",a.dataLayer.events.dialog.ajaxContentLoaded),t.on("hproductClick",a.dataLayer.events.link.hproduct),t.on("videoGalleryFacetBrowseChange",function(e,t){a.dataLayer.events.form.change(t)
}),t.on("slideshowPagerClick",a.dataLayer.events.slideshow.pagerClick),n.on("click input",G.formInitiation,a.dataLayer.events.form.initiation),n.on("change",G.formChange,a.dataLayer.events.form.change),n.on("click focus",G.formPaymentCalc,a.dataLayer.events.form.paymentCalcInit),n.on("click submit",G.formSubmission,a.dataLayer.events.form.submission),n.on("click",G.clickToCall,a.dataLayer.events.link.clickToCall),n.on("click",G.compareId,a.dataLayer.events.link.compare),n.on("click",G.incentiveId,a.dataLayer.events.link.incentive),n.on("click",G.getDirections,a.dataLayer.events.link.getDirections),n.on("click",G.linkClick,a.dataLayer.events.link.clicked),n.on("click",G.incentiveLabel,a.dataLayer.events.link.clicked),n.on("click",G.linksShareId,a.dataLayer.events.link.share),n.on("click",G.navigationId,a.dataLayer.events.link.navigationClick),n.on("click",G.vehicleCompare,a.dataLayer.events.link.vehicleCompare),n.on("click",G.slideType,a.dataLayer.events.slideshow.click),n.on("click",G.socialHeaderButtonId,a.dataLayer.events.link.socialHeader),n.on("click",G.vin,a.dataLayer.events.link.hproduct),n.on("click",G.dRIntegrated,a.dataLayer.events.drIntegrated.click),n.on("click focus",G.dRIntegratedForm,a.dataLayer.events.drIntegrated.leadFormStart),n.on("click",G.dRPaymentCalc,a.dataLayer.events.drPaymentCalc.click),n.on("dialogopen show.bs.modal slideOpen",a.dataLayer.events.dialog.opened),n.on("dialogclose hide.bs.modal slideClose",a.dataLayer.events.dialog.closed),n.on("slidechange",a.dataLayer.events.form.slideChange),n.on("click input",G.typedSearchInit,a.dataLayer.events.page.typedSearchInit),n.on("tabsshow",function(e,t){t.tab&&a.dataLayer.events.link.clicked.call(t.tab,e)}),t.on("ddc-mega-menu-nav-ajax-load-complete ajaxDialogComplete ajaxDialogShown slideOpen",function(t){var n=e(t.target);n.find(G.formOnPage).each(function(){a.dataLayer.events.form.onPage(this)})}),t.on("ajaxFormConfirm",a.dataLayer.events.form.ajaxFormConfirm),n.add(".mycars").on("click",G.mycarsSave,function(){a.dataLayer.events.link.mycarsSave(e(this))}),n.on("click",G.mycarsGetAlerts,function(){a.dataLayer.events.link.mycarsGetAlerts(e(this))}),n.on("click",G.mycarsCompare,function(){a.dataLayer.events.link.mycarsCompare(e(this))}),n.on("click",G.mycarsCompareSubmit,function(){a.dataLayer.events.link.mycarsCompareSubmit(e(this))}),e(G.mycarsGetAlertsCheckbox).on("click",function(){var t=e(this);t.is(":checked")&&a.dataLayer.events.link.mycarsGetAlerts(t)}),n.on("click",G.mycarsLogin,function(){a.dataLayer.events.link.mycarsLogin(this)}),e(G.getDirectionsForm).on("submit",a.dataLayer.events.link.getDirections),n.on("click",G.incentiveFacet,function(){a.dataLayer.events.page.filterSearchClick(this,"ddc.incentive.filterSearch")}),n.on("click",G.searchFacet,function(){a.dataLayer.events.page.filterSearchClick(this,"ddc.inventory.filterSearch.click")}),e(G.searchFacetVlpSlider).on("set",function(){a.dataLayer.events.page.filterSearchClick(this,"ddc.inventory.filterSearch.click")}),t.on("ddc-mega-menu-nav-ajax-load-complete",function(t){e(t.target).on("click submit",G.formSubmission,a.dataLayer.events.form.submission)}),a.dataLayer.events.page.view(),a.dataLayer.events.page.vehicleDetailView(),a.dataLayer.events.page.filterSearch(),a.dataLayer.events.page.typedSearch(),a.dataLayer.page.pageInfo.isConfirm&&a.dataLayer.events.form.confirmation(a.dataLayer.page.pageInfo.pageName),t.on("trackEvent",function(e,t,n){n&&(a.dataLayer.confirmation=a.dataLayer.confirmation||{},a.dataLayer.confirmation.element=n.element||n),t&&t.eventName&&t.widgetName&&(t.eventName.toLowerCase().includes("submit")&&"facetmulti"!==t.widgetName?a.dataLayer.events.form.confirmation(t.widgetName):t.eventName.toLowerCase().includes("confirm")?a.dataLayer.events.form.confirmation(t.widgetName.includes("protect")?t.data:t.widgetName):t.widgetName.includes("KBB")?("submit_calculate_trade_integrated"===t.data||"send_update_calculate_trade_integrated"===t.data)&&a.dataLayer.events.form.confirmation(t.widgetName):t.widgetName.includes("recommended_vehicles")?(a.client.isDesktop&&"list_clicked"===t.data||a.client.isMobile&&"list_hovered"===t.data)&&a.dataLayer.events.link.recommendedVehicle(t):"string"==typeof t.data&&t.data.includes("Submitted Instant ePrice")&&a.dataLayer.events.form.confirmation(t.data))}),n.find(G.mapTypeId).length>0&&a.dataLayer.events.maps(),n.find(G.formOnPage).each(function(){a.dataLayer.events.form.onPage(this)}),t.on("ajaxSuccess",function(e,t,n){var i=n.url;i.indexOf("/apis/mycars/")>-1&&(i.indexOf("statusType=SAVED")>-1?a.dataLayer.myCars.savedVehicles=JSON.parse(t.responseText).results:i.indexOf("statusType=RECENTLY_VIEWED")>-1?a.dataLayer.myCars.viewedVehicles=JSON.parse(t.responseText).results:i.indexOf("statusType=NOTIFICATIONS_ENABLED")>-1&&(a.dataLayer.myCars.priceChangeVehicles=JSON.parse(t.responseText).results))}),e(G.video).on("play",a.dataLayer.events.video.play),e(G.video).on("timeupdate",a.dataLayer.events.video.milestones.track),e(G.video).on("ended",a.dataLayer.events.video.milestones.complete),a.dataLayer.events.listener.initialize(window.dataLayer)})}(jQuery,window.DDC,window.newrelic);
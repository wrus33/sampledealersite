!function(){var i=$("#ddc-clickmap-img-click"),t=("true"===DDC.getUrlParams()._debugClickmap,window.DDC.client.isMobile?0:1),e={click:0===t?"tap.ddclickmap":"mousedown.ddclickmap"},a={content:"[data-page-body]"},d=$(window),o=function(){return window.DDC&&window.DDC.Widgets&&window.DDC.Widgets.DDCClickmap&&window.DDC.Widgets.DDCClickmap.url&&""!==window.DDC.Widgets.DDCClickmap.url},s=function(i,e){if(o()){var d=$(a.content);if(0!=d.size()){var s,n,l=d.width(),c=d.offset().left,g=d.offset().top,p="{clickmapUrl}/click.gif?siteid={siteId}&type={type}&alias={alias}&widgetid={widgetId}&x={x}&y={y}&width={width}&height={height}",w=0,h=0,f=function(i){var t,e=$(i.target).closest("[data-widget-id]");return e.length>0&&e.attr("data-widget-id")?t=e.attr("data-widget-id"):0===e.length&&$(i.target).closest("#ddc-slidein-panel-primary-navigation").size()>0?(e=$(i.target).closest("#ddc-slidein-panel-primary-navigation"),t="template-navigation1"):t="pageV2",{widget:e,widgetId:t}},D=f(i),u=function(i,t){var e=void 0!==t&&void 0!==t.x?t.x:i.originalEvent.pageX,a=void 0!==t&&void 0!==t.y?t.y:i.originalEvent.pageY;return(void 0===e||void 0===a)&&(e=i.pageX,a=i.pageY),{x:e,y:a}},m=u(i,e);if(D.widget.length>0){var C=D.widget.outerWidth(),v=D.widget.outerHeight(),k=Math.floor(D.widget.offset().top),y=Math.floor(D.widget.offset().left);w=Math.floor(m.x-y),h=Math.floor(m.y-k),s=Math.floor(C),n=Math.floor(v)}else w=Math.floor(m.x-c-l/2),h=Math.floor(m.y-g),s=l,n=0;if(window.DDC.Widgets.DDCClickmap.newUrl){var I=p.replace("{clickmapUrl}",window.DDC.Widgets.DDCClickmap.newUrl).replace("{siteId}",window.DDC.siteSettings.siteId).replace("{type}",t).replace("{alias}",window.DDC.siteSettings.pageAlias).replace("{widgetId}",D.widgetId).replace("{x}",w).replace("{y}",h).replace("{width}",s).replace("{height}",n);r.add(I)}var x=p.replace("{clickmapUrl}",window.DDC.Widgets.DDCClickmap.url).replace("{siteId}",window.DDC.siteSettings.siteId).replace("{type}",t).replace("{alias}",window.DDC.siteSettings.pageAlias).replace("{widgetId}",D.widgetId).replace("{x}",w).replace("{y}",h).replace("{width}",s).replace("{height}",n);r.add(x)}}},r={ready:!1,store:sessionStorage||{getItem:$.noop,setItem:$.noop},storageKey:"ddc-clickmap-queue",load:function(){var i=this.store.getItem(this.storageKey);return i?i.split(","):[]},save:function(){this.store.setItem(this.storageKey,this.items.join(","))},add:function(i){i&&(this.items.push(i),this.process())},process:function(){if(this.ready)for(;this.items.length>0;){var t=this.items[0];if(t&&i.attr("src")!==t)return this.ready=!1,void i.attr("src",t);this.items.shift()}},kick:function(){this.ready=!0,this.process()},init:function(){this.items=this.load();var t=this;d.on("load",function(){t.kick()}),i.on("load",function(){t.kick()}),d.unload(function(){t.save()})}};r.init(),$("body").on(e.click,function(i,t){s(i,t)})}();
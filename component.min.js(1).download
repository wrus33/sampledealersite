!function(a){"use strict";var t=function(){var t=window.DDC.recaptcha.captchaVersion||"",e=window.DDC.recaptcha.captchaSiteKey||"";if(!t||!e)return void DDC.log("error","window.DDC.recaptcha is not configured");var c=window.DDC.recaptcha.forms||[];if(0==c.length)return void DDC.log("info","no forms registered");if(window.DDC.recaptcha.captchaLoaded!==!0){if(window.DDC.recaptcha.captchaLoaded===!1)return;window.DDC.recaptcha.captchaLoaded=!1,DDC.log("info","loading reCAPTCHA library");var i="https://www.google.com/recaptcha/api.js?onload=recaptchaRefreshCallback";"v2"==t?i+="&render=explicit":"v3"==t&&(i+="&render="+e);var n=document.createElement("script");return n.setAttribute("type","text/javascript"),n.setAttribute("src",i),n.setAttribute("async",""),n.setAttribute("defer",""),void document.body.appendChild(n)}c.forEach(function(c){try{var i=a('form[data-form-id="'+c.formUniqueId+'"]'),n=i.find('button[type="submit"]'),r=i.find('input[name="captchaToken"]'),o=i.find('input[name="captchaVersion"]');if(i.data("captchaLoaded"))return;c.captchaAction=c.captchaAction||"social";var d=function(){i.data("captchaState",null),"v2"==t&&(DDC.log("info","resetting captcha v2"),grecaptcha.reset(c.widgetId)),n.button("reset")},h=function(a){DDC.log("info","beginning captcha verification");var r=i.data("captchaState");if(r){if(r.hasToken&&Math.ceil(Date.now()-r.ts)<90)return;d()}a.preventDefault();var o=i.data("validator");o&&o.checkValidity()!==!0||(n.button("loading"),"v2"==t?(DDC.log("info","executing captcha v2"),grecaptcha.execute(c.widgetId)):"v3"==t&&(DDC.log("info","executing captcha v3"),grecaptcha.execute(e,{action:c.captchaAction}).then(p)))},p=function(a){i.data("captchaState",{hasToken:!!a,ts:Date.now()}),a?(r.val(a),i.trigger(i.data("captchaValidateAction")||"submit")):d()};o.val(t),i.on("submit",h),i.on("recaptchaExecute",h),i.on("captchaReset",d),"v2"==t&&(c.widgetId=grecaptcha.render(c.captchaContainer,{sitekey:e,action:c.captchaAction,size:"invisible",badge:"inline",callback:p})),i.data("captchaLoaded",!0)}catch(D){DDC.log("error",D)}})};window.DDC=window.DDC||{},window.DDC.recaptcha=window.DDC.recaptcha||{forms:[]},window.DDC.recaptcha.refresh=t,window.recaptchaRefreshCallback=function(){window.DDC.recaptcha.captchaLoaded=!0,window.DDC.recaptcha.refresh()},window.DDC.recaptcha.refresh()}(jQuery);
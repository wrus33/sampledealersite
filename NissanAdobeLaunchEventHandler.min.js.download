"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _get=function e(t,a,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,a,i)}if("value"in n)return n.value;var o=n.get;return void 0===o?void 0:o.call(i)},_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},_slicedToArray=function(){function e(e,t){var a=[],i=!0,n=!1,r=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(s){n=!0,r=s}finally{try{!i&&l["return"]&&l["return"]()}finally{if(n)throw r}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};DDC.classes.namespace("tracking.adobe_launch.util"),tracking.adobe_launch.util.DataMapper=tracking.adobe_launch.util.DataMapper||function(){function e(e,t){if("object"===("undefined"==typeof e?"undefined":_typeof(e))&&"string"==typeof t)for(var a=t.split(".");e&&a.length;)e=e[a.shift()];return e}var t=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;_classCallCheck(this,t),this.window=e,DDC.WidgetData.adobe_launch.wsTaggingEnable&&window.DDC.WidgetData["ws-tagging"]&&window.DDC.WidgetData["ws-tagging"].mapping&&window.DDC.WidgetData["ws-tagging"].mapping.adobe_launch&&(this.setPageAliasMapping(window.DDC.WidgetData["ws-tagging"].mapping.adobe_launch.pageAlias),this.setFormTrackingIdMapping(window.DDC.WidgetData["ws-tagging"].mapping.adobe_launch.form),this.setGTMMapping(window.DDC.WidgetData["ws-tagging"].mapping.adobe_launch.gtm)),this.mapping={clientDevice:{desktop:"large",mobile:"small",tablet:"medium","default":"large"},formTrackingId:{},inventoryType:{1:"used",2:"new",3:"cpo","new":"new",used:"used",certified:"cpo",all:"all","default":"all"},franchise:{ch:{buick:"bu",cadillac:"ca",chevrolet:"ch",gmc:"gm",nissan:"na"},full:{buick:"buick",cadillac:"cadillac",chevrolet:"chevrolet",gmc:"gmc",nissan:"nissan"}},orientation:{"landscape-primary":"landscape","landscape-secondary":"landscape","portrait-primary":"portrait","portrait-secondary":"portrait"}}}return _createClass(t,[{key:"getMapping",value:function(){return this.mapping}},{key:"setMapping",value:function(e){"object"===("undefined"==typeof e?"undefined":_typeof(e))&&(this.mapping=this.mergeObjects(this.mapping,e))}},{key:"getFormTrackingIdMapping",value:function(){return this.formTrackingIdMapping}},{key:"setFormTrackingIdMapping",value:function(e){"object"===("undefined"==typeof e?"undefined":_typeof(e))&&(this.formTrackingIdMapping=this.mergeObjects(this.formTrackingIdMapping,e))}},{key:"getPageAliasMapping",value:function(){return this.pageAliasMapping}},{key:"setPageAliasMapping",value:function(e){"object"===("undefined"==typeof e?"undefined":_typeof(e))&&(this.pageAliasMapping=this.mergeObjects(this.pageAliasMapping,e))}},{key:"getGTMMapping",value:function(){return this.gtmMapping}},{key:"setGTMMapping",value:function(e){"object"===("undefined"==typeof e?"undefined":_typeof(e))&&(this.gtmMapping=this.mergeObjects(this.gtmMapping,e))}},{key:"lookup",value:function(t){return e(this.window,t)}},{key:"mergeObjects",value:function(e,t){if("object"===("undefined"==typeof t?"undefined":_typeof(t))){"object"!==("undefined"==typeof e?"undefined":_typeof(e))&&(e={});for(var a in t)t.hasOwnProperty(a)&&(e[a]=this.mergeObjects(e[a],t[a]))}else e=t;return e}},{key:"map",value:function(t){var a=void 0;if("string"==typeof t){var i=t.split(".");a=e(this.mapping,t)||e(this.mapping,(i[i.length-2]||i[0])+".default")||i[i.length-1]||i[0]}return a}},{key:"mapPageAlias",value:function(e){if("string"==typeof e&&""!==e){e=e.toUpperCase();for(var t in this.pageAliasMapping)if(this.pageAliasMapping.hasOwnProperty(t)&&void 0!==this.pageAliasMapping[t]&&e.match(t))return this.pageAliasMapping[t]}return e}},{key:"mapFranchises",value:function(e,t){var a=this;if(Array.isArray(e)){var i=t?"ch":"full";return e.map(function(e){return a.map("franchise."+i+"."+e)}).join("|")}return""}},{key:"mapGTMs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";for(var i in this.gtmMapping)if(this.gtmMapping.hasOwnProperty(i)&&void 0!==this.gtmMapping[i]){var n=this.gtmMapping[i],r=n.event,o=n.formName,l=n.uniqueEvent;if(l===e)return i;if((o===a||void 0===o&&void 0===l)&&r&&(r===t||Object.values(r).includes(t)))return i}}}]),t}();return t}(),tracking.adobe_launch.util.DataMapper.prototype.pageAliasMapping={},tracking.adobe_launch.util.DataMapper.prototype.gtmMapping={},tracking.adobe_launch.util.DataMapper.prototype.formTrackingIdMapping={},DDC.classes.namespace("tracking.adobe_launch.util"),tracking.adobe_launch.util.DecoratorUtils=tracking.adobe_launch.util.DecoratorUtils||function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getStringForElement",value:function(e,t){if(e instanceof Element){var a=!0,i=!1,n=void 0;try{for(var r,o=t[Symbol.iterator]();!(a=(r=o.next()).done);a=!0){var l=_slicedToArray(r.value,2),s=l[0],c=l[1];if(null!==e.closest(c))return s}}catch(d){i=!0,n=d}finally{try{!a&&o.return&&o.return()}finally{if(i)throw n}}}return""}},{key:"getFirstWord",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return function(a){var i=a[e];return i&&i.split(t).shift()}}},{key:"parseStringValue",value:function(e,t){return e&&"string"==typeof e&&t&&Object.entries(t).length?e.replace(/{(.*?)}/g,function(e,a){return t[a]}):e}},{key:"replaceObjectValues",value:function(e,t){for(var a in e){var i=e[a];e[a]="function"==typeof i?i(t):this.parseStringValue(i,t)}return e}}]),e}();return e}(),DDC.classes.namespace("tracking.adobe_launch.decorators"),tracking.adobe_launch.decorators.Decorator=function(e){function t(e,a,i){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a,i));return n.formCategorySelectors=new Map([["SERVICE_APPT","other"]]),n}return _inherits(t,e),_createClass(t,[{key:"handleFormChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.element,a=e.label;if(t instanceof Element&&t.matches(".vlp-refine-sort-by select, .facet-filters select")){var i=$.extend({},e);return i.text=a,i.linkType="search.link",i.uniqueEvent="vlp-srp-sort-by-dropdown",this.log.debug("rerouting VLP sort by change to link click event"),void this.delegate.handleLinkClick(i)}this.delegate.handleFormChange(e)}},{key:"handleFormInitiation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.trackingId,a=void 0===t?"":t;return a.indexOf("MYCARS_REGISTER")>-1?void this.log.debug("consuming MyCars register form initiation event"):void this.delegate.handleFormInitiation(e)}},{key:"handleFormSubmission",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.trackingId,a=void 0===t?"":t;return a.indexOf("MYCARS_REGISTER")>-1?(this.log.debug("rerouting MyCars register form submission event to link click event"),void this.delegate.handleLinkClick(e)):void this.delegate.handleFormSubmission(e)}},{key:"handleMycarsLogin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.log.debug("rerouting MyCars login event to link click event"),this.delegate.handleLinkClick(e)}},{key:"handleFormConfirmation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.formCategory=this.formCategorySelectors.get(e.trackingId),this.delegate.handleFormConfirmation(e)}}]),t}(tracking.framework.runtime.EventHandlerDecorator),tracking.adobe_launch.decorators.Decorator.prototype.logCategory="Decorator",DDC.classes.namespace("tracking.adobe_launch.decorators"),tracking.adobe_launch.decorators.LinkTypeDecorator=tracking.adobe_launch.decorators.LinkTypeDecorator||function(){window.DDC=window.DDC||{},window.DDC.WidgetData=window.DDC.WidgetData||{},window.DDC.WidgetData.adobe_launch=window.DDC.WidgetData.adobe_launch||{},window.DDC.WidgetData.adobe_launch.searchLinkClasses=window.DDC.WidgetData.adobe_launch.searchLinkClasses||"";var e=new Map([["arrow.next",[".previousNext a.next","a[rel='next']",".ddc-icon[class*=arrow-right]","button.slick-next"]],["arrow.prev",[".previousNext a.prev","a[rel='prev']",".ddc-icon[class*=arrow-left]","button.slick-prev"]],["search.link",DDC.WidgetData.adobe_launch.searchLinkClasses.split(",")],["image.link",["a img","img"]],["button.link",[".btn","button"]],["text.link",["a"]]]),t=function(t){function a(e,t,i){return _classCallCheck(this,a),_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t,i))}return _inherits(a,t),_createClass(a,[{key:"handleLinkClick",value:function(e){var t=e,i=t.linkType,n=t.element;i||(e.linkType=a.determineLinkType(n),$(n).closest('[data-widget-name="ws-detailed-specs"], [data-widget-id="inventory-listing1"]').length>0&&(e.uniqueEvent="detailed-specs-accordion",e.expand=a.expanded(n,this.log)),e=_extends(e,a.decorateSlideshow(e,this.log),a.decorateShowroomLinks(e,this.log)),this.log.debug('applied type "'+e.linkType+'"')),this.delegate.handleLinkClick(e)}}],[{key:"determineLinkType",value:function(t){if(t instanceof Element){var a=!0,i=!1,n=void 0;try{for(var r,o=e[Symbol.iterator]();!(a=(r=o.next()).done);a=!0)for(var l=_slicedToArray(r.value,2),s=l[0],c=l[1],d=0;d<c.length;d++){var p=c[d]?t.querySelector(c[d]):null,g=window.getComputedStyle(t).getPropertyValue("background-image");if(g&&"none"!==g&&(s=t.classList.contains("dropdown-toggle")?"button.link":"image.link"),null!==p||c[d]&&t.matches(c[d]))return s}}catch(u){i=!0,n=u}finally{try{!a&&o.return&&o.return()}finally{if(i)throw n}}}return"generic.link"}},{key:"determineSlidePositionPostClick",value:function(e,t){if("undefined"!=typeof e.data("slide-position")){if(e.closest('[data-widget-name="slideshow-carousel"]').length>0){var i=a.determineSlideTotal(e),n=e.data("slide-position");return t.includes("next")?n===i?1:n+1:1===n?i:n-1}return parseInt(e.data("slide-position"))}return"undefined"!=typeof e.data("slick-index")?parseInt(e.data("slick-index"))+1:e.index()+1}},{key:"determineSlideTotal",value:function(e){var t=void 0;if("undefined"!=typeof e.data("group")){var a=e.data("group");t=e.siblings('[data-group="'+a+'"]')}else t=e.siblings();return t.not(".clone").length+1}},{key:"decorateSlideshow",value:function(e,t){var i=e.linkType,n=e.element;if(i.includes("arrow")){var r={},o=$(n).closest("[data-widget-name]"),l=o.find(".slick-current,.cycle-slide-active,.active");return l.length>0&&(r.slidePositionPostClick=a.determineSlidePositionPostClick(l,i),t.debug('applied slide position "'+r.slidePositionPostClick+'"'),r.slideTotal=a.determineSlideTotal(l),t.debug('applied slide total "'+r.slideTotal+'"')),r.slideControlLabel=$(n).text(),r}return{}}},{key:"decorateShowroomLinks",value:function(e,t){var a=e.element,i=$(a).closest(".showroom-details-section");if(i.length>0){var n={},r=i.find("h4").text();return n.showroomSectionHeading=r,n.uniqueEvent="showroom-toggle",t.debug('applied showroom section heading "'+r+'"'),$(a).closest(".showroom-details-section").find("ul li:first-of-type a").attr("ui-tabs-initial-load",!1),n}return{}}},{key:"expanded",value:function(e,t){var a=e.classList.contains("collapsed");return a||(a=!e.closest(".panel-heading").nextElementSibling.classList.contains("in")),t.debug('applied eventData expanded "'+a+'"'),a.toString()}}]),a}(tracking.framework.runtime.EventHandlerDecorator);return t.prototype.logCategory="LinkTypeDecorator",t}(),DDC.classes.namespace("tracking.adobe_launch.decorators"),window.DDC=window.DDC||{},window.DDC.client=window.DDC.client||{},window.DDC.client.isMobile=window.DDC.client.isMobile||!1,tracking.adobe_launch.decorators.CustomLinkDecorator=function(e){function t(e,a,i){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a,i));return n.logCategory="CustomLinkDecorator",n.OVERRIDE_TITLE="title",n.SELECT_MAKE="select make",n.widgetSectionSelectors=new Map([["datepicker","#ui-datepicker-div"],["Vehicle Details Sidebar",".vdp-sidebar"],["Global Nav:Viewed",".mycars-default .menu.recent-cars"],["Global Nav:Saved",".mycars-default .menu.saved-cars, .mycars-mobile"],["Carousel",'[data-widget-name="ws-vehicle-media"]'],["Incentives",'[data-widget-name="incentives-search-detail"]'],["Footer",".ddc-footer"],["Global Nav",".page-header, .navbar, .mycars-default"],["More Info",'[data-widget-name="ws-content-cta"]'],[n.SELECT_MAKE,'.alias-sitebuilder-gm-protection-plans-1 [data-widget-id="links1"], .alias-sitebuilder-gm-protection-plans-1 [data-widget-id="links2"]'],["amt",'.alias-sitebuilder-gm-protection-plans-1 [data-widget-id="content5"]'],["inventory-listing1",'.inventory-listing-default [data-widget-id="inventory-listing1"]']]),n.widgetTextOverride=new Map([[n.SELECT_MAKE,n.OVERRIDE_TITLE]]),n.arrowSelectors={next:[".previousNext a.next","a[rel='next']",".ddc-icon[class*=arrow-right]","button.slick-next"],prev:[".previousNext a.prev","a[rel='prev']",".ddc-icon[class*=arrow-left]","button.slick-prev"]},n.eventHandlers=["handleClickToCall","handleComparePageClick","handleFormChange","handleFormInitiation","handleFormSubmission","handleGetDirections","handleHproductClick","handleVehicleCompareCheck","handleLinkClick","handleMycarsGetAlerts","handleMycarsSave","handleMycarsCompareCheck","handleMycarsCompareSubmit","handleNavigationClick","handleOfferClick","handleSlideshowClick","handleSocialShare","handleSpecialsEvent","handleTypedSearch","handleRecommendedVehicleClick"],n.createHandlerDecorators(),n}return _inherits(t,e),_createClass(t,[{key:"determineCustomLinkSection",value:function(e){if(e instanceof Element){var t=!0,a=!1,i=void 0;try{for(var n,r=this.widgetSectionSelectors[Symbol.iterator]();!(t=(n=r.next()).done);t=!0){var o=_slicedToArray(n.value,2),l=o[0],s=o[1];if(null!==e.closest(s))return l}}catch(c){a=!0,i=c}finally{try{!t&&r.return&&r.return()}finally{if(a)throw i}}var d=e.closest("[data-widget-name]");if(d){d=d instanceof Node?d:d[0];var p=d.dataset.widgetName,g=DDC.client.isMobile?".ddc-page":".ddc-wrapper",u=e.closest(".ui-dialog");if((null!==u||null!==d.closest(g))&&p){if(null!==u){var m=u.querySelector(".ui-dialog-title");if(m)return m.innerText}var h=d.querySelector(".widget-heading"),f=h&&h.innerText;if("promotions-listing"===p&&null!==e.closest(".slick-dots"))return f+":scroller dot";if(f)return f}return d.dataset&&d.dataset.widgetId}return e.className}}},{key:"determineCustomLinkText",value:function(e,t,a){if(this.widgetTextOverride.get(a)===this.OVERRIDE_TITLE)return $(e).attr("title");var i=!t||"#"===t,n=!i&&-1!==t.indexOf("|");if(i||n){var r="";if(i){if(e instanceof Element){var o=e.getAttribute("value")||e.getAttribute("title")||e.getAttribute("aria-label");if(o)r=o;else{var l=!0,s=!1,c=void 0;try{for(var d,p=Object.entries(this.arrowSelectors)[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var g=_slicedToArray(d.value,2),u=g[0],m=g[1];if(m.some(function(t){return e.matches(t)})){r=u;break}}}catch(h){s=!0,c=h}finally{try{!l&&p.return&&p.return()}finally{if(s)throw c}}}}}else r=t.replace(/ \| /g," ");return this.log.debug("setting text of custom link for handleLinkClick to: "+r),r}return t}},{key:"determineCustomLinkLabel",value:function(e){var t="";return e&&"SELECT"===e.nodeName&&(t=$(e).siblings("label").length>0?$(e).siblings("label").text():$(e).find("option:first-child").text()),t}},{key:"determineCustomLinkHref",value:function(e){return $("a",e).attr("href")}},{key:"createHandlerDecorators",value:function(){var e=this;this.eventHandlers.forEach(function(t){e[t]=function(a){var i=a.element,n=a.section,r=a.text,o=void 0;n||(o=e.determineCustomLinkSection(i),a.section=o&&o.replace(/[\x00-\x1F\x7F-\x9F]/g," ")&&o.trim(),e.log.debug("setting section of custom link for handleLinkClick to: "+o)),a.text=e.determineCustomLinkText(i,r,o||n),a.label=e.determineCustomLinkLabel(i),"undefined"==typeof a.url&&(a.url=e.determineCustomLinkHref(i),e.log.debug("attempting to fill undefined url for handleLinkClick results: "+a.url)),e.delegate[t](a)}})}}]),t}(tracking.framework.runtime.EventHandlerDecorator),tracking.adobe_launch.decorators.CustomLinkDecorator.prototype.logCategory="CustomLinkDecorator",DDC.classes.namespace("tracking.adobe_launch.decorators"),tracking.adobe_launch.decorators.LinkClickFilterDecorator=function(e){function t(e,a,i){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a,i))}return _inherits(t,e),_createClass(t,[{key:"initFilterSelectors",value:function(){var e=DDC.dataLayer.events.selectors;e&&(this.filterSelectors=Object.values(e),this.filterSelectors.splice(this.filterSelectors.findIndex(function(e){return/^a\[href\]/.test(e)}),1),this.filterSelectors.push(".hproduct"),this.filterSelectors.push(".vehicle-card"),this.filterSelectors.push(".DefaultHandle_handle"),this.filterSelectors.push(".free-text-search-form"),this.filterSelectors.push(".free-text-search-form"),this.filterSelectors.push(".ws-inv-facets .panel-title a"),this.filterSelectors.push('[data-widget-name="recommendations-vehicles"]'),this.filterSelectors.push('[data-widget-name="ws-vehicle-media"]'),this.filterSelectors.push('[data-widget-name="ws-dealer-reviews"] .slider-control-centerleft, [data-widget-name="ws-dealer-reviews"] .slider-control-centerright, [data-widget-name="ws-dealer-reviews"] .slider-control-bottomcenter'),this.filterSelectors.push("#caoEngagementFullBg, #caoAgentInfoPopBackground, #caoSecondaryEngagementContainer, #caoMobileChatOnlyArea, #lpChat, .lp_survey_container_modal"),this.filterSelectors.push('[ui-tabs-initial-load="true"]'),this.filterSelectors.push(".slideshow-background .pager a, .slideshow-default .pager a"))}},{key:"handleLinkClick",value:function(e){this.filterSelectors||this.initFilterSelectors();var t=e.element,a=function(e){var t=void 0,a=void 0,i=void 0;return DDC.client.isMobile?(t=e.classList.contains("accordion-faux")&&e.classList.contains(".heading-tier2")===!1,a=e.classList.contains("tier3"),i=e.classList.contains("heading-tier2")):(t=e.closest(".navbar-nav")&&e.parentElement.classList.contains("nav-no-children"),a=e.classList.contains("child"),i=e.parentElement.classList.contains("h4")),t||a||i},i=function(e,t,i){for(var n=null;e;){if(e.matches(t)){if(t.includes("[data-navigation-id]")&&!a(e))break;n=e;break}if(i&&e.matches(i))break;e=e.parentElement}return n},n=function(e){return null!==i(t,e,"[data-widget-id]")},r=this.filterSelectors.some(n);r?this.log.info("dropping 'ddc.link.generic' click event!!"):this.delegate.handleLinkClick(e)}}]),t}(tracking.framework.runtime.EventHandlerDecorator),tracking.adobe_launch.decorators.LinkClickFilterDecorator.prototype.logCategory="LinkClickFilterDecorator",DDC.classes.namespace("tracking.adobe_launch.decorators"),window.DDC=window.DDC||{},window.DDC.client=window.DDC.client||{},window.DDC.client.isMobile=window.DDC.client.isMobile||!1,tracking.adobe_launch.decorators.WidgetUserEventDecorator=function(e){function t(e,a,i){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a,i));return n.logCategory="WidgetUserEventDecorator",n.utils=new tracking.adobe_launch.util.DecoratorUtils,n.getStringForElement=n.utils.getStringForElement,n.getFirstWord=n.utils.getFirstWord,n.parseStringValue=n.utils.parseStringValue,n.replaceObjectValues=n.utils.replaceObjectValues,n.widgetSectionSelectors=new Map([["Global Nav",".page-header,.navbar,.mycars-default"]]),n.widgetFormCategorySelectors=new Map([["other",".mycars-default form"]]),n.widgetFormTypeSelectors=new Map([["other",".mycars-default form"]]),n.eventHandlers=["handleWidgetUserEvent"],n.widgetUserEventMap={"ws-inv-facets":[{eventDataProperty:"element",includes:"accordion",additionalData:{linkType:"text.link",url:"#",text:n.getFirstWord("element"),handler:"handleLinkClick"}},{eventDataProperty:"widgetId",includes:"inventory-facets1",additionalData:{section:"inventory-facets1",handler:"handleLinkClick"}},{eventDataProperty:"result",includes:"collapsed",additionalData:{expand:"false",handler:"handleLinkClick"}},{eventDataProperty:"result",includes:"expanded",additionalData:{expand:"true",handler:"handleLinkClick"}}],"ws-vehicle-reccomendations":[{eventDataProperty:"element",includes:"fivestar",additionalData:{linkType:"text.link",url:"#",handler:"handleLinkClick"}}],"ws-dealer-reviews":[{eventDataProperty:"element",includes:"Carousel",additionalData:{interactionValue:"{currentItem}/{totalItems}",label:"{label}",text:"{label}",linkType:"button.link",section:"What Our Customers Say",handler:"handleLinkClick"}},{eventDataProperty:"element",includes:"dots",additionalData:{interactionValue:"{currentItem}/{totalItems}",label:"{label}",text:"page {currentItem} bullet",linkType:"button.link",section:"What Our Customers Say",handler:"handleLinkClick"}}]},n.getNewEntriesForWidget=function(e,t,a){var i=a.eventDataProperty,r=a.includes,o=a.additionalData,l=_extends({},o),s=e.hasOwnProperty(i)&&e[i].includes(r);if(s){var c=_extends(e,e.additionalData);_extends(t,n.replaceObjectValues(l,c))}return t},n.getNewEventData=function(e,t){var a=t&&t.reduce(this.getNewEntriesForWidget.bind(null,e),{});return a?a:e},n.createHandlerDecorators(),n}return _inherits(t,e),_createClass(t,[{key:"createHandlerDecorators",value:function(){var e=this;this.eventHandlers.forEach(function(t){var a=t;e[t]=function(t){var i=t&&t.optionalData,n=i&&i.element&&i.element.closest("[data-mycars-form-tracking-id]").getAttribute("data-mycars-form-tracking-id");if(n){var r=t,o=r.optionalData,l=o.element,s=o.trackingId,c=r.section,d=void 0;if(c||(d=e.getStringForElement(l,e.widgetSectionSelectors),t.section=d&&d.replace(/[\x00-\x1F\x7F-\x9F]/g," ")&&d.trim(),e.log.debug("setting section of widget user event to: "+d)),!s)try{t.trackingId=n}catch(p){e.log.debug("no trackingId found for event")}t.formCategory=e.getStringForElement(l,e.widgetFormCategorySelectors),t.formType=e.getStringForElement(l,e.widgetFormTypeSelectors)}else{var g=e.widgetUserEventMap[t.widgetName];g&&(t=e.getNewEventData(t,g),t.handler&&(a=t.handler))}e.delegate[a](t)}})}}]),t}(tracking.framework.runtime.EventHandlerDecorator),tracking.adobe_launch.decorators.WidgetUserEventDecorator.prototype.logCategory="WidgetUserEventDecorator",DDC.classes.namespace("tracking.adobe_launch.decorators"),window.DDC=window.DDC||{},window.DDC.client=window.DDC.client||{},window.DDC.client.isMobile=window.DDC.client.isMobile||!1,tracking.adobe_launch.decorators.DataAttributeDecorator=function(e){function t(e,a,i){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a,i));return n.logCategory="DataAttributeDecorator",n.eventHandlers=["handleLinkClick"],n.createHandlerDecorators(),n}return _inherits(t,e),_createClass(t,[{key:"createHandlerDecorators",value:function(){var e=this;this.eventHandlers.forEach(function(t){e[t]=function(a){if(a.element&&a.element.dataset){var i=!0,n=!1,r=void 0;try{for(var o,l=Object.entries(a.element.dataset)[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var s=_slicedToArray(o.value,2),c=s[0],d=s[1];a[c]=d}}catch(p){n=!0,r=p}finally{try{!i&&l.return&&l.return()}finally{if(n)throw r}}}e.delegate[t](a)}})}}]),t}(tracking.framework.runtime.EventHandlerDecorator),tracking.adobe_launch.decorators.DataAttributeDecorator.prototype.logCategory="DataAttributeDecorator",DDC.classes.namespace("tracking.adobe_launch.handlers"),tracking.adobe_launch.handlers.AdobeLaunchEventHandler=function t(){function t(e,t){tracking.framework.runtime.EventHandler.call(this,e,t),this.dataMapper=new tracking.adobe_launch.util.DataMapper(this.window),this.defaultTemplateStrings={}}var e=function(e){return"object"===_typeof((e||window)._satellite)},a=["ddc.form.onPage","ddc.form.initiation","ddc.form.submission","ddc.form.confirmation"];return DDC.classes.extend(t,tracking.framework.runtime.EventHandler),function(t){t.logCategory="AdobeLaunchEventHandler",t.getProviderId=function(){return this.providerId},t.setProviderId=function(e){this.providerId=e},t.getDealerBac=function(){return this.dealerBac},t.setDealerBac=function(e){this.dealerBac=e},t.initialize=function(){this.log.info("initializing..."),this.templateStrings=this.buildTemplateStrings(),this.initData(),this.log.info("initialized")},t.mapFormTrackingId=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=this.dataMapper.getFormTrackingIdMapping(),i=a["string"==typeof e&&e.replace(/-/g,"_").toUpperCase()]||a.DEFAULT;return{formType:i.formType||"",formCategory:i.formCategory||"",formName:this.determineFormName(i.formName,t)||""}},t.isMyCarsDataLayerEventSystemEvent=function(e){return a.includes(e.eventSource)&&("MYCARS_REGISTER"===e.trackingId||"mycars-register"===e.eventCategory)},t.initData=function(){var e={pageInfo:{pageName:"{pageBrands}:{pageRegion}:{country}:{language}:t3:{siteSectionsLevel5}",siteProvider:"{siteProvider}",siteEnvironment:"{siteEnvironment}",siteSectionsLevel1:"{siteSectionsLevel1}",siteSectionsLevel2:"{siteSectionsLevel2}",siteSectionsLevel3:"{siteSectionsLevel3}",siteSectionsLevel4:"{siteSectionsLevel4}",siteSectionsLevel5:"{siteSectionsLevel5}",siteTheme:this.page.dataLayerProperty("site.design.themekit"),url:this.page.dataLayerProperty("page.pageInfo.pageUrl"),seoStrategyPageName:"{pageTitle}",pageTool:"{pageTool}",pageType:"{pageType}",pageSubType:"{pageSubType}",languageSelected:"{language}",siteName:"tier3",brand:"{brands}",country:"{country}",region:"{region}",vendorName:this.providerId,locationBac:this.dealerBac,dealerAddress:this.page.dataLayerProperty("dealership.address1")+", "+this.page.dataLayerProperty("dealership.city")+" "+this.page.dataLayerProperty("dealership.stateProvince"),dealerId:this.page.dataLayerProperty("site.siteInfo.dealerId"),dealerName:this.page.dataLayerProperty("dealership.dealershipName"),dealerZip:this.page.dataLayerProperty("dealership.postalCode"),renderedExperience:"{deviceSize}",viewport:"{viewport}",orientation:"{orientation}"},visitorProfile:{zipCode:this.page.dataLayerProperty("user.userPostalCode")},vehicleInfo:{vehicleType:"{vehicle.bodyStyle}",modelYear:"{vehicle.modelYear}",make:"{vehicle.make}",modelName:"{vehicle.model}",bodyStyle:"{vehicle.bodyStyle}",trimLevel:"{vehicle.trim}",condition:"{vehicle.condition}",vin:"{vehicle.vin}",price:"{vehicle.internetPrice}"}},t=this.dataMapper.mapPageAlias(this.pageAlias);"object"===("undefined"==typeof t?"undefined":_typeof(t))&&(e=this.dataMapper.mergeObjects(e,t)),this.window.digitalData=this.parseData(e),this.log.debug("base digitalData object initialized")},t.buildFilteredSearchFilters=function(e){var t=[],a=function(a){if(e.hasOwnProperty(a)&&"compositeType"!==a&&"search"!==a){var i=void 0;"string"==typeof e[a]?(i=e[a].split(","),i.forEach(function(e){t.push(a+"-"+e)})):t.push(a+"-"+e[a])}};for(var i in e)a(i);return t.join("|")},t.buildSiteSectionsLevels=function(e,t){var a=void 0,i=void 0,n=void 0,r=void 0,o=void 0,l=t["vehicle.modelYear"],s=t["vehicle.model"],c=e.replace(/(?:sitebuilder|(?:_\d+)+$)/gi,"").replace(/_/g," ").toLowerCase().trim();if(this.page.isVehicleDetailPage(e))a="vehicles",i=l+" "+s;else if(this.page.isVehicleListingPage(e))a="vehicles";else if(e.match(".*MYCARS_.*FAVORITES.*"))a="vehicles";else if(this.page.isFinancePage(e))a="financing";else if(this.page.isOffersPage(e)||this.page.isIncentivesPage(e)||e.indexOf("PROMOTIONS")>-1){if(a="offers",e.indexOf("INCENTIVES")>-1&&this.page.dataLayerProperty("page.attributes.incentives.0")){var d=this.page.dataLayerProperty("page.attributes.incentives.0"),p=d.applicableCondition,g=d.currentVehicleModel,u=d.applicableYear;i=p,n=g&&u&&u+" "+g}}else this.page.isToolPage(e)?a="tool":this.page.isServicePage(e)?a="services":this.page.isHoursOrDirectionsPage(e)||this.page.isAboutOrStaffPage(e)||this.page.isContactPage(e)?a="dealer-information":this.page.isCorporatePage(e)?a="corporate":e.indexOf("SHOWROOM")>-1&&(a="vehicles",i=l&&l+" "+s,i?n="Model Showroom":i="Showroom");return-1===e.indexOf("SHOWROOM")&&(a&&i&&n?r=c:a&&i?n=c:a?i=c:a=c),o=a&&""+a||"",o+=i&&":"+i||"",o+=n&&":"+n||"",o+=r&&":"+r||"",{siteSectionsLevel1:a,siteSectionsLevel2:i,siteSectionsLevel3:n,siteSectionsLevel4:r,siteSectionsLevel5:o}},t.buildTemplateStrings=function(){var e=this.page.currentPageAlias(),t=_extends({},this.defaultTemplateStrings);t.pageTitle=$("head title").text(),t.siteProvider="DDC",t.siteEnvironment=this.dataMapper.lookup("DDC.isLive")?"prod":"nonprod","true"==DDC.WidgetData.adobe_launch.wsTaggingEnable?(t.pageType=this.dataMapper.getPageAliasMapping().pageType||"custom",t.pageSubType=this.dataMapper.getPageAliasMapping().pageSubType,t.pageTool=this.dataMapper.getPageAliasMapping().pageTool):(t.pageType=this.dataMapper.mapPageAlias(e).pageType||"custom",t.pageSubType=this.dataMapper.mapPageAlias(e).pageSubType,t.pageTool=this.dataMapper.mapPageAlias(e).pageTool);var a=void 0;a=this.dataMapper.lookup("DDC.client.isTablet")?"tablet":this.dataMapper.lookup("DDC.client.isMobile")?"mobile":"desktop",t.deviceSize=this.dataMapper.map("clientDevice."+a),t.language=this.page.dataLayerProperty("page.attributes.locale").substr(0,2).toLowerCase();var i=this.page.dataLayerProperty("site.franchises");t.pageBrands=this.dataMapper.mapFranchises(i,!0),t.brands=this.dataMapper.mapFranchises(i),t.country=this.page.dataLayerProperty("dealership.country").toLowerCase(),t.viewport=innerWidth+"x"+innerHeight;var n=this.window.screen.msOrientation||this.window.screen.mozOrientation||(this.window.screen.orientation||{}).type;if(n||(n=this.window.screen.width>this.window.screen.height?"landscape-primary":"portrait-primary"),t.orientation=this.dataMapper.map("orientation."+n),this.page.dataLayerProperty("page.pageInfo.isShowroomOverview")){var r=this.page.dataLayerProperty("page.pageInfo.pagePath");"string"==typeof r&&""!==r&&(r=r.split("/"),r=r.filter(function(e){return""!==e&&"showroom"!==e}),4===r.length&&(t["vehicle.modelYear"]=r[0],t["vehicle.make"]=r[1],t["vehicle.model"]=r[2].replace("+"," "),t["vehicle.bodyStyle"]=r[3].replace(/\..*/,"")))}else if(this.page.isVehicleDetailPage(e)&&this.page.dataLayerProperty("vehicles")&&1===this.page.dataLayerProperty("vehicles").length||this.page.dataLayerProperty("confirmation.vehicle")){var o=this.page.dataLayerProperty("confirmation"),l=this.page.dataLayerProperty("vehicles.0")||this.page.dataLayerProperty("confirmation.vehicle"),s=l.inventoryType,c=l.modelYear,d=l.make,p=l.model,g=l.bodyStyle,u=l.trim,m=l.vin,h=l.internetPrice;
s||(s="object"===("undefined"==typeof o?"undefined":_typeof(o))&&"string"==typeof o.type?o.type:"default"),t["vehicle.modelYear"]=c,t["vehicle.make"]=d,t["vehicle.model"]=p,t["vehicle.bodyStyle"]=g,t["vehicle.trim"]=u,t["vehicle.vin"]=m,t["vehicle.condition"]=this.dataMapper.map("inventoryType."+s),t["vehicle.internetPrice"]=h}return _extends({},t,this.buildSiteSectionsLevels(e,t))},t.parseTemplateStrings=function(e){var t=this;return"string"==typeof e&&(e=e.replace(/{(.*?)}/g,function(e,a){return t.templateStrings[a]||t.page.dataLayerProperty(a)||t.dataMapper.lookup(a)||""}),""===e.replace(/:/g,"")&&(e="undefined")),e},t.parseData=function(e){var t=this.dataMapper.mergeObjects({},e);if("object"===("undefined"==typeof t?"undefined":_typeof(t)))for(var a in t)if(t.hasOwnProperty(a))if("object"===_typeof(t[a]))t[a]=this.parseData(t[a]);else if("string"==typeof t[a]){var i=t[a]=this.parseTemplateStrings(t[a]);"undefined"!==i?t[a]=this.parseTemplateStrings(t[a]):delete t[a]}return t},t.sendData=function(t,a){return e(this.window)?"string"!=typeof t?void this.log.error("invalid direct call event value, unable to send data"):(this.window.digitalData=this.parseData(this.window.digitalData),this.log.info("digitalData: \n "+JSON.stringify(this.window.digitalData,null,2)),this.log.info('sending "'+t+'" event to Adobe Launch'),void(a&&"object"===("undefined"==typeof a?"undefined":_typeof(a))?(this.log.info("additionalData: \n"+JSON.stringify(a,null,2)),this.window._satellite.track(t,a)):this.window._satellite.track(t))):void this.log.error("_satellite object not defined - cannot send event")},t.handlePageView=function(){this.sendData("general.bottom.of.page")},t.handleVehicleDetailView=function(){this.sendData("vdp.bottom.of.page")},t.handleWidgetUserEvent=function(e){var t=window.DDC.Widgets.MyCars.WIDGET_USER_EVENT_CONSTANTS.FORM;switch(e.widgetName){case"ws-vehicle-media":"Favorite added"!==e.result&&"Vehicle saved"!==e.result&&this.handleVehicleMediaEvent(e);break;case"mycars-default":[t.LOGIN.IMPRESS.result,t.REGISTER.IMPRESS.result,t.FORGOT.IMPRESS.result].includes(e.result)&&this.handleFormOnPage(e),(e.result===t.FORGOT.INTERACT.result||e.result===t.LOGIN.INTERACT.result||e.result===t.REGISTER.INTERACT.result)&&this.handleFormInitiation(e),(e.result===t.FORGOT.SUBMIT.result||e.result===t.LOGIN.SUBMIT.result||e.result===t.REGISTER.SUBMIT.result||e.result===t.FORGOT.FAIL.result||e.result===t.LOGIN.FAIL.result||e.result===t.REGISTER.FAIL.result||e.result===t.REGISTER.EXISTING.result)&&this.handleFormSubmission(e),(e.result===t.FORGOT.CONFIRM_IMPRESS.result||e.result===t.LOGIN.CONFIRM_IMPRESS.result||e.result===t.REGISTER.CONFIRM_IMPRESS.result)&&this.handleFormConfirmation(e),e.result===t.LOGOUT.CLICK.result&&this.sendData("global-onClick",e)}},t.handleClickToCall=function(e){var t=this.dataMapper.lookup("digitalData.pageInfo.pageName"),a=e.clickToCallDepartment,i=e.phoneNumber,n=e.section;this.sendData("telephone.dial",{customLink:n+":"+a+":call",position:n,pageName:t,department:a,phoneNumber:i})},t.handleComparePageClick=function(e){var t=void 0,a=this.dataMapper.lookup("digitalData.pageInfo.pageName"),i="inventory",n=e.bodyStyle,r=e.element,o=e.make,l=e.model,s=e.trim,c=e.type,d=e.vin,p=e.year,g=r.firstElementChild,u=r.innerText;if(g&&g.classList.contains("photo")){var m=g.getAttribute("alt");t=m?m:"Image "+d}else t=u;this.sendData("link.compare.page.click",{customLink:i+":"+d,linkText:t,pageName:a,position:i,vehicleInfo:{bodyStyle:n,make:o,modelName:l,modelYear:p,trimLevel:s,vehicleType:c,vin:d}})},t.handleGetDirections=function(e){var t=this.dataMapper.lookup("digitalData.pageInfo.pageName"),a=e.linkText,i=e.section;this.sendData("link.get.directions",{customLink:i+":"+a,position:i,pageName:t,linkText:a})},t.handleSlideshowPagerClick=function(e){var t=this.dataMapper.lookup("digitalData.pageInfo.pageName"),a=e.destinationIndex,i=e.element,n=e.linkText,r=e.linkUrl,o=e.currentItem,l=e.totalItems,s=e.position;this.sendData("text.link",{customLink:s+":pager:"+a,element:JSON.stringify(i,["id","className","href","tagName","innerText","type"]),interactionValue:o+"/"+l,interactionLabel:"dots",linkUrl:r,linkText:n,pageName:t,position:s})},t.handleLinkClick=function(e){var t=this.dataMapper.lookup("digitalData.pageInfo.pageName"),a=e.element,i=e.text,n=e.linkType,r=e.section,o=e.url,l=e.currentItem,s=e.totalItems,c={customLink:r+":"+(i||void 0),element:JSON.stringify(a,["id","className","href","tagName","innerText","type"]),pageName:t,position:r,linkText:i,linkUrl:o};if(e.slidePositionPostClick&&e.slideTotal&&(n.includes("next")||n.includes("prev"))){var d=e.slidePositionPostClick,p=e.slideTotal,g=void 0;g=e.linkType.includes("next")?1===d?p:d-1:d===p?1:d+1,c.interactionValue=g+"/"+p}e.slideControlLabel&&(c.interactionLabel=e.slideControlLabel.trim()),e.label&&(c.searchFilterLabel=e.label.trim()),e.expand&&(c.expand=e.expand),e.showroomSectionHeading&&(c.interactionLabel=e.showroomSectionHeading.trim()),e.uniqueEvent&&(c.uniqueEvent=e.uniqueEvent),l&&s&&(c.interactionValue=l+"/"+s),e.interactionValue&&(c.interactionValue=e.interactionValue),e.label&&(c.label=e.label),this.sendData(n,c)},t.handleNavigationClick=function(e){var t=this.dataMapper.lookup("digitalData.pageInfo.pageName"),a=e.linkText,i=e.position,n=e.section,r=e.url;this.sendData("nav.link",{customLink:n+":"+a,position:i,pageName:t,linkText:a,linkUrl:r})},t.handleSocialHeaderClick=function(e){var t=this.dataMapper.lookup("digitalData.pageInfo.pageName"),a="Global Navigation",i=e.service,n=e.url;this.sendData("link.social.header.click",{customLink:a+":"+i,position:a,pageName:t,linkText:i,url:n})},t.handleSocialShare=function(e){var t=this.dataMapper.lookup("digitalData.pageInfo.pageName"),a=e.section,i=e.service,n=e.url;this.sendData("footer.social.icons",{customLink:a+":"+i,position:a,pageName:t,linkText:i,url:n})},t.handleRecommendedVehicleClick=function(e){var t=this.dataMapper.lookup("digitalData.pageInfo.pageName"),a=e.section,i=e.url,n=e.text;this.sendData("link.recommended.vehicles",{customLink:a+":"+n,position:a,pageName:t,url:i})},t.handleFilterSearch=function(e){var t=this.dataMapper.lookup("digitalData.pageInfo.pageName"),a=e.eventName,i=void 0===a?"filtered.search.results":a,n=e.position,r=void 0===n?"inventory":n,o=e.queryFacets.search,l=e.resultCount,s=this.buildFilteredSearchFilters(e.queryFacets);o||this.sendData(i,{customLink:r+":"+s,position:r,pageName:t,resultCount:l,queryFacets:s})},t.handleFilterSearchClick=function(e){var t=e.checked,a=e.clickedFacetName,i=e.clickedFacetValue,n=e.facets,r=e.isSlider,o=this.dataMapper.lookup("digitalData.pageInfo.pageName"),l="inventory",s=l+":"+a+"-"+i;r||(s+=":"+(t?"checked":"unchecked")),this.sendData("filtered.search.click",{customLink:s,position:l,pageName:o,queryFacets:n,inventoryFilterLabel:a,inventoryFilterValue:i})},t.handleTypedSearchInit=function(e){var t=this.dataMapper.lookup("digitalData.pageInfo.pageName"),a="inventory",i=e.search;this.sendData("typed.search.init",{customLink:a+":"+(i||void 0),position:a,pageName:t,search:i})},t.handleTypedSearchResults=function(e){var t=this.dataMapper.lookup("digitalData.pageInfo.pageName"),a=e.eventName,i=void 0===a?"typed.search.results":a,n=e.position,r=void 0===n?"inventory":n,o=e.queryFacets.search,l=e.resultCount;this.sendData(i,{customLink:r+":"+o,position:r,pageName:t,resultCount:l,queryFacets:o})},t.handleIncentiveFilter=function(e){var t=this.dataMapper.lookup("digitalData.pageInfo.pageName"),a=e.checked?"checked":"unchecked";this.sendData("incentive.filter",{customLink:"incentives:"+e.clickedFacetName+"-"+e.clickedFacetValue+":"+a,position:"incentives",pageName:t,queryFacets:e.facets})},t.handleFormChange=function(e){var t=this.dataMapper.lookup("digitalData.pageInfo.pageName"),a=e.element,i=e.event,n=e.firstOptionText,r=e.label,o=e.name,l=e.section,s=e.selectedValue,c=void 0,d={customLink:l+":"+r,position:l,pageName:t,toggle:r||o};switch(i){case"ddc.form.inventorySearchLeadChange":c="form.inventory.search.lead.change";break;case"ddc.form.facetBrowseChange":c="form.facet.browse.change",a&&$(a).parents(".video-gallery").length>0&&(n&&(d.label=n),s?d.value=s:r&&(d.value=r));break;case"ddc.form.slideChange":c="ddc.form.slideChange"}"ddc.form.inventorySearchLeadChange"===i?c="form.inventory.search.lead.change":"ddc.form.facetBrowseChange"===i?(c="form.facet.browse.change",a&&$(a).parents(".video-gallery").length>0&&(n&&(d.label=n),s?d.value=s:r&&(d.value=r))):"ddc.form.slideChange"===i&&(c="form.slideChange"),""!==c&&this.sendData(c,d)},t.handleFormInitiation=function(e){if(!this.isMyCarsDataLayerEventSystemEvent(e)){var t=this.dataMapper.lookup("digitalData.pageInfo.pageName"),a=this.mapFormTrackingId(e.trackingId,e.element),i=a.formName,n=a.formType,r=a.formCategory;this.window.digitalData.formInfo={formName:i};var o=["input","select","textarea"],l=document.activeElement;-1!==o.indexOf(l.tagName.toLowerCase())&&(this.window.digitalData.formInfo.formFieldName=l.name),this.sendData("form.initiation",{customLink:e.section+":"+i+" - "+l.name,pageName:t,position:e.section,formLeadId:e.formEventId||"",formName:i,formType:n,formCategory:r})}},t.handleFormConfirmation=function(e){if(!this.isMyCarsDataLayerEventSystemEvent(e)){var t=this.dataMapper.lookup("digitalData.pageInfo.pageName"),a=e.trackingId,i=e.formEventId,n=this.mapFormTrackingId(a,e.element),r=n.formName,o=n.formType,l=n.formCategory;localStorage.getItem("adobe_launch-formName."+i)&&(r=localStorage.getItem("adobe_launch-formName."+i),localStorage.removeItem("adobe_launch-formName."+i)),this.window.digitalData.formInfo={formName:r},this.page.isVehicleDetailPage(DDC.dataLayer.confirmation.pageName)?r="VDP:"+r:this.page.isVehicleListingPage(DDC.dataLayer.confirmation.pageName)&&(r="VLP:"+r);var s={formName:r,pageName:t,formCategory:l||"lead",formType:o||a,formLeadId:e.formEventId||""};e.initiatingClickText&&(s.initiatingClickText=e.initiatingClickText),this.sendData("form.confirmation",s)}},t.determineFormName=function(e,t){for(var a in e)if($(t).closest(a).length>0)return e[a];return e["default"]},t.handleFormSubmission=function(e){if(!this.isMyCarsDataLayerEventSystemEvent(e)){var t=this.dataMapper.lookup("digitalData.pageInfo.pageName"),a=e.invalidFields,i=void 0===a?{}:a,n=e.isModal,r=e.section,o=e.trackingId,l=e.formEventId,s=Object.keys(i),c=this.mapFormTrackingId(o,e.element),d=c.formName,p=c.formType,g=c.formCategory;if(this.window.digitalData.formInfo={formName:d},s.length>0){var u=s.map(function(e){return e+": "+i[e]});this.window.digitalData.formInfo.errorMessage=u.join()}localStorage.setItem("adobe_launch-formName."+l,d),this.sendData("form.submission",{customLink:r+":"+d,formName:d,isModal:n,pageName:t,trackingId:o,position:r,formLeadId:e.formEventId||"",formType:p,formCategory:g})}},t.handlePaymentCalcInit=function(){var e=this.dataMapper.lookup("digitalData.pageInfo.pageName"),t="finance";this.sendData("form.payment.calc.init",{customLink:t+":paymentCalculator",position:t,pageName:e})},t.handleFormOnPage=function(e){if(!this.isMyCarsDataLayerEventSystemEvent(e)){var t=e.trackingId,a=e.vehicle,i=this.mapFormTrackingId(t,e.element),n=i.formName,r=i.formType,o=i.formCategory;this.window.digitalData.formInfo={formName:n};var l={formName:n,formLeadId:e.formEventId||"",formType:r,formCategory:o};a&&a.hasOwnProperty("bodyStyle")?this.sendData("form.show",_extends(a,l)):this.sendData("form.show",l)}},t.handleTypedSearch=function(e){var t="Typed Search Form",a=this.dataMapper.lookup("digitalData.pageInfo.pageName"),i=e.typedSearchContent;this.sendData("typed.search.submit",{customLink:t+":"+i,position:t,pageName:a,typedSearchContent:i})},t.handleAjaxContentLoad=function(e){this.sendData("dialog.ajax.content.loaded",{hasForm:e.hasForm})},t.handleDialog=function(e,t){var a=e.element.closest(".ui-dialog"),i=a&&a.querySelector(".ui-dialog-title"),n=i&&i.innerText.trim(),r="dialog",o=this.dataMapper.lookup("digitalData.pageInfo.pageName");this.sendData("dialog."+t,{customLink:r+":"+n,position:r,pageName:o})},t.handleDialogOpened=function(e){this.handleDialog(e,"opened")},t.handleDialogClosed=function(e){this.handleDialog(e,"closed")},t.handleSlideshowClick=function(e){var t=e.element,a=e.name,i=e.position,n=e.section,r=e.url,o=this.dataMapper.lookup("digitalData.pageInfo.pageName");this.sendData("image.link",{customLink:n+":"+(a||t.className||""),element:JSON.stringify(t,["id","className","href","tagName","innerText","type"]),linkUrl:r,pageName:o,position:n,slideOrder:i})},t.handleVehicleMediaEvent=function(e){var t=e.action,a=e.element,i=e.result,n=e.optionalData,r=void 0===n?{}:n,o=e.widgetState,l=this.dataMapper.lookup("digitalData.pageInfo.pageName"),s=void 0,c=void 0;Object.keys(r).length&&(s=r.currentItem,c=r.totalItems);var d="image.link";if("swiped"===t)d="carousel swiped";else{var p=a.match(/(?:next|previous)/i);p?d="arrow."+p[0].substring(0,4).toLowerCase():/button/i.test(a)&&(d="button.link")}var g={customLink:"Carousel:"+o+":"+a,element:a,pageName:l,position:"Carousel",result:i};s&&c&&(g.interactionValue=s+"/"+c),a.includes("Thumbnail Carousel")?g.interactionLabel="thumbnail":a.includes("Next")?g.interactionLabel="next":a.includes("Previous")&&(g.interactionLabel="previous"),this.sendData(d,g)},t.handleOfferClick=function(e){var t=e.offerId,a=e.offerName,i=e.section,n=this.dataMapper.lookup("digitalData.pageInfo.pageName"),r=this.page.dataLayerProperty("page.attributes"),o=r.incentives,l=void 0===o?[]:o,s=Array.isArray(l)&&l.find(function(e){var a=e.id;return a===t}),c={customLink:i+":"+t,position:i,pageName:n,offerId:t,offerName:a};if(s&&Object.keys(s).length>0){var d=s.currentVehicleModel,p=s.currentVehicleBodyStyle,g=s.applicableTrims,u=s.applicableYear,m=s.applicableMake,h=s.type,f=d;m&&d&&d.match(m)&&(f=d.replace(m+" ",""));var v=void 0;if(Array.isArray(g)&&g.length>0){var y=u+" "+m+" "+d+" "+p+" ";v=g.reduce(function(e,t){return e+=t.indexOf(y)>-1&&""+(e&&"|")+t.replace(y,"")},"")}_extends(c,{offerType:h,vehicleBodyStyle:p,vehicleModel:f,vehicleTrim:v,vehicleYear:u})}this.sendData("offer.click",c)},t.handleSpecialsEvent=function(e){var t=e||{},a=t.element,i=t.section,n=t.specialCategory,r=t.specialCta,o=t.specialCtaType,l=t.specialEvent,s=t.specialHeading,c=t.specialId,d=t.specialIncentiveType,p=t.specialMake,g=t.specialModel,u=t.specialPlacementType,m=t.specialYear,h=this.dataMapper.lookup("digitalData.pageInfo.pageName"),f=n.toLowerCase(),v=i?i:u,y=a&&a.innerText?a.innerText:r;if(("click"===l||"click-details"===l)&&"string"==typeof n){var k={},T=void 0;if("service"===f||"parts"===f)T=f+".offer.click",k={customLink:v+":"+s+":"+y};else if("incentive"===f){var D=(o&&o)+" "+(m&&" - "+m)+(p&&" "+p)+(g&&" "+g)+(d&&" - "+d);T="offer.click",k={customLink:v+":"+D+":"+y}}_extends(k,{position:v,pageName:h,offerId:c,offerName:s,offerYear:m,offerMake:p,offerModel:g}),this.sendData(T,k)}},t.handleHproductClick=function(e){var t=e.bodyStyle,a=e.exteriorcolor,i=e.internetPrice,n=e.make,r=e.model,o=e.msrp,l=e.section,s=e.trim,c=e.type,d=e.vin,p=e.year,g=e.url,u=e.text,m=this.dataMapper.lookup("digitalData.pageInfo.pageName");this.sendData("link.hproduct.click",{customLink:l+":"+(d||r),position:l,pageName:m,linkText:u,linkUrl:g,vehicleInfo:{modelYear:p,make:n,modelName:r,bodyStyle:t,trimLevel:s,condition:c,vin:d,exteriorColor:a,internetPrice:i,msrp:o}})},t.handleVehicleCompareCheck=function(e){var t=e.bodyStyle,a=e.exteriorcolor,i=e.internetPrice,n=e.make,r=e.model,o=e.msrp,l=e.section,s=e.trim,c=e.type,d=e.vin,p=e.year,g=this.dataMapper.lookup("digitalData.pageInfo.pageName");this.sendData("link.vehicleCompareCheck",{customLink:l+":"+(d||r),position:l,pageName:g,vehicleInfo:{modelYear:p,make:n,modelName:r,bodyStyle:t,trimLevel:s,condition:c,vin:d,exteriorColor:a,internetPrice:i,msrp:o}})},t.handleMycars=function(e,t,a){var i=e.inventoryType,n=e.make,r=e.model,o=e.section,l=e.trim,s=e.vin,c=e.year,d=this.dataMapper.lookup("digitalData.pageInfo.pageName");this.sendData("mycars."+t,{customLink:o+":"+c+" "+n+" "+r+" "+l+":"+a,position:o,pageName:d,vehicleInfo:{modelYear:c,make:n,modelName:r,trimLevel:l,vin:s,condition:this.dataMapper.map("inventoryType."+i)}})},t.handleMycarsGetAlerts=function(e){this.handleMycars(e,"get.alerts","Get Price Alerts")},t.handleMycarsSave=function(e){this.handleMycars(e,"save","Save This Car")},t.handleMycarsCompareCheck=function(e){var t=e.element.checked?"checked":"unchecked";this.handleMycars(e,"compare."+t,"Compare Checkbox")},t.handleMycarsCompareSubmit=function(e){var t=this,a=e.section,i=this.dataMapper.lookup("digitalData.pageInfo.pageName"),n=e.vehicles.map(function(e){return{modelYear:e.year,make:e.make,modelName:e.model,trimLevel:e.trim,vin:e.vin,condition:t.dataMapper.map("inventoryType."+e.condition)}});this.sendData("mycars.compare.submit",{customLink:a+":Compare Button Click",position:a,pageName:i,vehicleInfo:n})},t.handleMapClick=function(){this.sendData("map.show")},t.handleVideoPlay=function(e){(this.page.isVideoGalleryPage()||this.page.isVehicleDetailPage(this.page.currentPageAlias()))&&0===e.position&&this.sendData("vdp.video.play",{fileType:e.fileType,videoDuration:e.videoDuration,videoSource:e.videoSource})},t.handleVideoMilestone=function(e){(this.page.isVideoGalleryPage()||this.page.isVehicleDetailPage(this.page.currentPageAlias()))&&"complete"===e.videoMilestone&&this.sendData("vdp.video.complete",{fileType:e.fileType,videoDuration:e.videoDuration,videoSource:e.videoSource})}}(t.prototype),t}(),DDC.classes.namespace("tracking.adobe_launch.handlers.mappings"),DDC.WidgetData.adobe_launch.wsTaggingEnable||tracking.adobe_launch.util.DataMapper.prototype.setPageAliasMapping({".*(BLOG_VIDEO|NEWS_DEFAULT).*":{pageType:"blog",pageSubType:"Blog"},".*(ABOUT_DEFAULT|STAFF_LISTING|WHY_BUY).*":{pageType:"company",pageSubType:"About Us"},".*(DIRECTIONS|HOURS).*":{pageType:"hoursdirections",pageSubType:"Hours and Directions"},".*MYCARS_.*FAVORITES.*":{pageType:"favorites",pageSubType:"Saved Vehicles"},".*BROCHURE.*":{pageType:"requestinfo"},".*(CONTACT_|CONTACT_DEFAULT).*":{pageType:"company",pageSubType:"Contact"},".*FINANC.*":{pageType:"finance"},".*(LEAD_TRADE_IN|KBB.*CASH_OFFER).*":{pageType:"tradein"},".*TEST_DRIVE.*":{pageTool:"book a test drive",pageType:"testdrive",pageSubType:"Test Drive"},".*404.*":{pageType:"pagenotfound",pageSubType:"Page Not Found"},".*PRIVACY.*":{pageType:"helpcenter"},"^INDEX$":{pageType:"homepage",pageSubType:"Homepage"},".*INCENTIVES.*":{pageType:"offers",pageSubType:"OEM Incentives"},".*CALCULATOR_PAYMENT.*":{pageTool:"payment calculator"},".*PROMOTIONS_LISTING_NEW.*":{pageType:"offers",pageSubType:"New Vehicles Incentives"},".*(PROMOTIONS|SPECIALS)_LISTING_PARTS.*":{pageType:"parts",pageSubType:"Parts Specials"},".*(PROMOTIONS|SPECIALS)_LISTING_SERVICE.*":{pageType:"serviceoffers",pageSubType:"Service Specials"},".*PROMOTIONS_LISTING_USED.*":{pageType:"offers",pageSubType:"Used Vehicles Incentives"},".*(VEHICLES_ACCESSORIES|LISTING_ACCESSORY).*":{pageType:"accessories"},".*CERTIFIED_SERVICE.*":{pageType:"certifiedservice"},".*MAINTENANCE_MENU.*":{pageType:"servicemenu",pageSubType:"Maintenance Menu"},".*PARTS_LEAD.*":{pageType:"parts",pageSubType:"Parts Lead"},".*SCHEDULE_(AN_APPOINTMENT|SERVICE).*":{pageType:"scheduleservice",pageSubType:"Schedule Service"},".*SERVICE_LEAD_OSS.*":{pageType:"scheduleservice"},"^INVENTORY_COMPARE_.*":{pageType:"showroom"},".*(SHOWROOM|MODEL_SPECIFIC_INDEX).*":{pageType:"showroom",pageSubType:"New Vehicles Showroom"},".*SITEMAP.*":{pageType:"helpcenter"},"^AUTO.*(BARGAIN|USED).*DETAILS.*":{pageTool:"search inventory",pageType:"vehicledetails",pageSubType:"Used Vehicle Details"},"^AUTO.*CERTIFIED.*DETAILS.*":{pageTool:"search inventory",pageType:"vehicledetails",pageSubType:"CPO Vehicle Details"},"^AUTO.*NEW.*DETAILS.*":{pageTool:"search inventory",pageType:"vehicledetails",pageSubType:"New Vehicle Details"},".*INVENTORY_LISTING.*(ALL|NO_RESULTS).*":{pageTool:"search inventory",pageType:"vehiclesearchresults",pageSubType:"All Inventory Search Results"},".*INVENTORY_LISTING.*(BARGAIN|USED).*":{pageTool:"search inventory",pageType:"vehiclesearchresults",pageSubType:"Used Inventory Search Results"},".*INVENTORY_LISTING.*CERTIFIED.*":{pageTool:"search inventory",pageType:"vehiclesearchresults",pageSubType:"CPO Inventory Search Results"},".*INVENTORY_LISTING.*NEW.*":{pageTool:"search inventory",pageType:"vehiclesearchresults",pageSubType:"New Inventory Search Results"},".*(ADVANCED_LEASE|APPEARANCE_GUARD).*":{pageType:"protection"},".*(WARRANTY|GAP_COVERAGE|XS_WEAR).*":{pageType:"protection"},".*(PREPAID_MAINTENANCE|PROTECTION).*":{pageType:"protection"},".*BATTERY.*":{pageType:"battery",pageSubType:"Battery Service"},".*BRAKE.*":{pageType:"brakes",pageSubType:"Brake Service"},".*CPO_VEHICLE.*":{pageType:"cpo",pageSubType:"CPO Vehicle"},".*FLEET.*":{pageType:"fleet"},".*(NEW_TIRES|TIRE_QUOTE|TIRE_REBATE).*":{pageType:"tires"},".*OIL_CHANGE.*":{pageType:"oilchange",pageSubType:"Oil Change"},".*PARTS_ORDER.*":{pageType:"partsorder",pageSubType:"Parts Order"},".*REFERRAL_PROGRAM.*":{pageType:"discountprograms",pageSubType:"Referral Program"},".*REWARDS.*":{pageType:"rewardsprogram",pageSubType:"Rewards"},".*SERVICE_AND_PART.*SPECIALS.*":{pageType:"serviceoffers",pageSubType:"Service and Parts Specials"},".*TIRE.*FINDER.*":{pageType:"tirefinder",pageSubType:"Tire Finder"},".*TIRE.*":{pageType:"service",pageSubType:"Tires"},".*SERVICE.*":{pageType:"service"}}),DDC.classes.namespace("tracking.adobe_launch.mappings"),DDC.WidgetData.adobe_launch.wsTaggingEnable||tracking.adobe_launch.util.DataMapper.prototype.setFormTrackingIdMapping({BODYSHOP:{formName:{"default":"Service"}},BUILD_AND_PRICE:{formName:{"default":"Get a Quote"}},CONTACT:{formName:{"default":"General Contact"}},DEFAULT:{formName:{"default":"Other"}},EMAIL_A_FRIEND:{formName:{"default":"Email a friend"}},EMPLOYMENT:{formName:{"default":"Employment"}},EPRICE:{formName:{"default":"Get a Quote"}},FINANCE:{formName:{"default":"Finance"}},GLOBAL_VEHICLE_INCENTIVE_LEAD:{formName:{"default":"Specials"}},INFO_REQUEST:{formName:{"default":"Request More Info"}},INVENTORY_SEARCH_LEAD:{formName:{"default":"Vehicle Finder"}},INVENTORYFINDER:{formName:{"default":"Vehicle Finder"}},MAKE_AN_OFFER:{formName:{"default":"Make an Offer"}},MSLP:{formName:{"default":"Request More Info"}},MYCARS_FORGOT_PASSWORD:{formName:{"default":"Mycars Forgot Password"}},MYCARS_LOGIN:{formName:{"default":"Mycars Login"}},MYCARS_REGISTER:{formName:{"default":"Mycars Register"}},PARTS_ORDER:{formName:{"default":"Parts"}},PROMO_CTA_LEAD:{formName:{"default":"Promotions Request More Info"}},SCHEDULE_A_TEST_DRIVE:{formName:{"default":"Test Drive"}},SERVICE_APPT:{formName:{"default":"Schedule service"}},SHOWROOM:{formName:{"default":"Request More Info"}},SPECIALS_EMAIL_A_FRIEND:{formName:{"default":"Email a Friend"}},SPECIALS_INFO_REQUEST:{formName:{"default":"Specials"}},TEST_DRIVE:{formName:{"default":"Test Drive"}},TRADE_IN:{formName:{"default":"Trade in"}},VEHICLE_LEAD:{formName:{"default":"Request More Info"}}}),DDC.classes.namespace("tracking.adobe_launch.handlers"),tracking.adobe_launch.handlers.NissanAdobeLaunchEventHandler=function(e){function t(e,a){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return i.defaultTemplateStrings={pageRegion:"na",region:"na"},i}return _inherits(t,e),_createClass(t,[{key:"transformEvent",value:function(e,t){return{event:e,"nissan-t3-tagging":t}}},{key:"sendData",value:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"sendData",this).call(this,e,a)}catch(i){console.error(i)}var n=a,r=n.uniqueEvent,o=n.formName,l=this.dataMapper.mapGTMs(r,e,o);if("nissan-t3-tagging-TrackPageLoad"==l){var s=this.dataMapper.lookup("digitalData"),c=s.pageInfo,d=s.visitorProfile,p=s.vehicleInfo;a=_extends({},c,d,p)}DDC&&DDC.pushToGtmDataLayer&&l?DDC.pushToGtmDataLayer(this.transformEvent(l,a)):["map.show","form.show","dialog.ajax.content.loaded","vdp.bottom.of.page","form.initiation","global-onClick"].includes(e)||console.log("excluded event",e)}}]),t}(tracking.adobe_launch.handlers.AdobeLaunchEventHandler),DDC.classes.namespace("tracking.adobe_launch.handlers.mappings"),DDC.WidgetData.adobe_launch.wsTaggingEnable||tracking.adobe_launch.util.DataMapper.prototype.setPageAliasMapping({}),DDC.classes.namespace("tracking.adobe_launch.mappings"),DDC.WidgetData.adobe_launch.wsTaggingEnable||tracking.adobe_launch.util.DataMapper.prototype.setFormTrackingIdMapping({CONTACT:{formType:"Contact dealer",formCategory:"Handraiser",formName:{".ddc-mega-menu-nav":"Navigation General Contact","default":"General Contact"}},EMAIL_A_FRIEND:{formType:"Other",formCategory:"Handraiser",formName:{"default":"Email a friend"}},EPRICE:{formType:"Request a Quote",formName:{"default":"Get a Quote"}},INSTANT_EPRICE:{formType:"Request a Quote",formName:{"default":"Get a Quote"}},FINANCE:{formType:"Other",formName:{"default":"Finance"}},INFO_REQUEST:{formType:"Request a Quote",formName:{"default":"Request More Info"}},PARTS_ORDER:{formType:"Other",formName:{"default":"Parts"}},SERVICE_APPT:{formType:"Other",formName:{"default":"Schedule Service Appointment"}},TEST_DRIVE:{formType:"Book a Test Drive",formName:{"default":"Test Drive"}}}),DDC.classes.namespace("tracking.adobe_launch.mappings"),DDC.WidgetData.adobe_launch.wsTaggingEnable||tracking.adobe_launch.util.DataMapper.prototype.setGTMMapping({}),DDC.classes.namespace("tracking.adobe_launch.mappings"),DDC.WidgetData.adobe_launch.wsTaggingEnable||tracking.adobe_launch.util.DataMapper.prototype.setGTMMapping({"nissan-t3-tagging-TrackPageLoad":{event:"general.bottom.of.page"},"nissan-t3-tagging-TrackToggle":{uniqueEvent:"showroom-toggle"},"nissan-t3-tagging-TrackAccordion":{uniqueEvent:"detailed-specs-accordion"},"nissan-t3-tagging-TrackLinkClick":{event:["text.link","button.link","generic.link","link.hproduct.click","image.link","nav.link"]},"nissan-t3-tagging-TrackDropDown":{uniqueEvent:"vlp-srp-sort-by-dropdown"},"nissan-t3-tagging-TrackSignIn":{formName:"Mycars Login",event:"form.confirmation"},"nissan-t3-tagging-TrackSignUp":{formName:"Mycars Register",event:"form.confirmation"},"nissan-t3-tagging-TrackServiceAppointment":{formName:"Schedule Service",event:"form.confirmation"},"nissan-t3-tagging-TrackLeadFormSuccess":{event:"form.confirmation"},"nissan-t3-tagging-TrackInventoryResults":{event:"filtered.search.results"},"nissan-t3-tagging-TrackClickToCall":{event:"telephone.dial"},"nissan-t3-tagging-TrackCarousel":{event:["arrow.next","arrow.prev"]},"nissan-t3-tagging-TrackOfferDetails":{event:"offer.click"},"nissan-t3-tagging-TrackVideoPlay":{event:"vdp.video.play"},"nissan-t3-tagging-TrackVideoCompleted":{event:"vdp.video.complete"}});